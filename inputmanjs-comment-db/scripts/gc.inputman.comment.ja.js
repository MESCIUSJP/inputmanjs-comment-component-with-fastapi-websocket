/*!
 *
 * InputManJS 5.1
 *
 * Copyright(c) MESCIUS inc. All rights reserved.
 *
 * Licensed under the InputManJS Commercial License.
 * sales@mescius.com
 * https://developer.mescius.jp/license/javascript
 *
 *
 */

 (()=>{"use strict";var __webpack_modules__={5:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getItemInfo=void 0;const o=n(9129),i=n(9529),r=n(7286),a=n(5213);const m="gcim__search-text",s="gcim__clear-btn",l="gcim__search-next-btn",c="gcim__search-next-btn-img",d="gcim__search-previous-btn-img",u="gcim__search-previous-btn",C="gcim__search-container",A="gcim__search-box",g="gcim__search-box-input-container",p="gcim__search-counter",h="gcim__select-box",f="gcim__search-watermark",v="gcim-search-count",E="gcim-selected",w="gcim-has-previous",I="gcim-has-next",y=r.GcCommentCommand.Search,x=r.GcCommentCommand.SearchNext,G=r.GcCommentCommand.SearchPrevious,b=r.GcCommentCommand.ClearSearch,S=(e,t)=>{if(_(e),!t)return void e.getElement().removeAttribute(v);let n=o.CommentUIHelper.createFindHighlightWrapper(),i=0;B(e).forEach((e=>{i+=(()=>{var e,t;let n;return n=(null===(e=null===a.GCIM||void 0===a.GCIM?void 0:a.GCIM.GcRichTextEditorDEVTool)||void 0===e?void 0:e.findAndMark)?null===(t=null===a.GCIM||void 0===a.GCIM?void 0:a.GCIM.GcRichTextEditorDEVTool)||void 0===t?void 0:t.findAndMark:(e,t,n,o,i)=>{let r=0;const a=[],m=document.createTreeWalker(t,NodeFilter.SHOW_TEXT,null);let s;for(;s=m.nextNode();)e.regex.test(s.textContent)&&a.push(s);return e.regex.lastIndex=0,a.forEach((t=>{e.regex.lastIndex=0;const o=[...t.textContent.matchAll(e.regex)];if(o.length>0){const e=document.createDocumentFragment();let a=0;o.forEach((o=>{const m=o[0],s=o.index,l=document.createTextNode(t.textContent.slice(a,s));e.appendChild(l);const c=n.cloneNode(!0);c.innerText=m,c.setAttribute("data-richtexteditor-index",`${i+r}`),e.appendChild(c),a=s+m.length,r++})),e.appendChild(document.createTextNode(t.textContent.slice(a))),t.parentNode.replaceChild(e,t)}})),r},n})()({regex:new RegExp(`(${t})`,"gi"),matchIndex:1},e,n,!1,i)})),e.getElement().setAttribute(v,`${i}`)},_=e=>{T(e).forEach((e=>{let t=e.firstChild;if(t){e.before(t),e.remove();let n=t.previousSibling,o=t.nextSibling;n&&n.nodeType===Node.TEXT_NODE&&(n.nodeValue+=t.nodeValue,t.remove(),t=n),o&&o.nodeType===Node.TEXT_NODE&&(t.nodeValue+=o.nodeValue,o.remove())}}))},T=e=>e.getElement().querySelectorAll(".gcim__highlight-marker"),B=e=>e.getElement().querySelectorAll(".gcim__comment-content,.gcim__comment-name");t.getItemInfo=e=>{let t=(0,i.h)("input",{type:"text",class:m}),n=(0,i.h)("div",{class:`${s} ${o.GcCommentClassNames.CommonImg}`}),a=(0,i.h)("div",{class:l},(0,i.h)("div",{class:`${c} ${o.GcCommentClassNames.CommonImg}`})),_=(0,i.h)("div",{class:u},(0,i.h)("div",{class:`${d} ${o.GcCommentClassNames.CommonImg}`})),T=(0,i.h)("div",{class:p}),B=(0,i.h)("div",{class:h,"gcim-has-next":"false","gcim-has-previous":"false"},_,a),D=(0,i.h)("div",{class:g},t),k=(0,i.h)("div",{class:C},(0,i.h)("div",{class:A},D,T,(0,i.h)("div",{class:`${o.GcCommentClassNames.VR} ${o.GcCommentClassNames.R}`}),B,n)),M=(0,i.h)("div",{class:f},e.options.watermark.searchBox),R=()=>D.appendChild(M);R();let L=e.getElement(),N=()=>t.value,P=e=>L.querySelectorAll(`.gcim__highlight-marker[data-richtexteditor-index="${e}"]`),O=()=>Number(L.getAttribute(v)),H=-1,F=(e=!0)=>{0!==O()&&H!==O()-1&&(Q(),H++,j(e))},U=(e=!0)=>{0!==O()&&0!==H&&(Q(),H--,j(e))},Q=()=>{let e=P(H);e&&e.forEach((e=>e.removeAttribute(E)))},j=(e=!0)=>{let t=P(H);null==t||t.forEach((e=>e.setAttribute(E,"")));let n=t[0];n&&e&&o.CommentUIHelper.scrollElementIntoView(n),Y(),T.innerText=`${H+1}/${O()}`},Y=()=>{let e=O();H>0?B.setAttribute(w,"true"):0===H&&B.setAttribute(w,"false"),H<e-1?B.setAttribute(I,"true"):H===e-1&&B.setAttribute(I,"false")};n.addEventListener("click",(()=>{W()}));let W=()=>{$(),S(e,"")},V=()=>{N()?M.remove():R()};t.addEventListener("input",(()=>{N()&&V()})),t.addEventListener("input",o.CommentUIHelper.debounce((()=>{K()}),500,!1));let K=(t=!0)=>{S(e,N());let n=P(0);n&&n.length>0?(H=-1,F(t)):N()?T.innerText="0/0":$()};a.addEventListener("click",(()=>F())),_.addEventListener("click",(()=>U()));let $=()=>{t.value="",T.innerText="",R(),B.setAttribute(I,"false"),B.setAttribute(w,"false")};e.addEventListener(r.GcCommentEvent.AfterExecuteCommand,(e=>{e.command===r.GcCommentCommand.Clear&&$()}));return{getElement:()=>k,onSetup:()=>{e.addCommand(y,((e,n)=>{var o;"string"==typeof n.text&&(o=n.text,t.value=o,V(),K())})),e.addCommand(x,(()=>{F()})),e.addCommand(G,(()=>{U()})),e.addCommand(b,(()=>{W()}));let n=[r.GcCommentCommand.Sort,r.GcCommentCommand.ResetSort,r.GcCommentCommand.AddCommentElement,r.GcCommentCommand.AddReplyCommentElement,r.GcCommentCommand.UpdateCommentElement,r.GcCommentCommand.DeleteCommentElement,r.GcCommentCommand.Clear],o=[r.GcCommentCommand.ChangeUserInfo,r.GcCommentCommand.SetComments];e.addEventListener(r.GcCommentEvent.AfterExecuteCommand,(t=>{if(N())if(n.includes(t.command)){let e=H;K(!1),H=Math.min(e,O()-1),j(!1)}else o.includes(t.command)&&e.execCommand(r.GcCommentCommand.ClearSearch)}))}}}},118:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.register=void 0;t.register=e=>{const t=()=>e.execCommand("mention");e.ui.registry.addButton("mention",{tooltip:"Mention",icon:"mention",onAction:t}),e.ui.registry.addMenuItem("mention",{text:"Mention...",icon:"mention",onAction:t})}},127:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PluginManager=void 0,t.PluginManager=(()=>{const e=new Map;return{add:(t,n)=>{t&&!e.has(t)&&"function"==typeof n&&e.set(t,n)},remove:t=>{e.has(t)&&e.delete(t)},setup:t=>{e.forEach((e=>{e(t)}))}}})()},136:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GcMultilineCommentEditor=void 0;const o=n(9316),i=n(9529);t.GcMultilineCommentEditor=(e,t)=>{let n=(0,i.h)("textarea",null);t.containerElement.appendChild(n);let r=Object.assign({width:"100%",height:100},e.options.editorConfig),a=new o.GCIM.GcMultiLineTextBox(n,r);setTimeout((()=>a.setFocus()));let m=!1;a.onInput((()=>{m=!0,t.onContentChanged()}));return{destroy:()=>{a.destroy(),a=null},getContent:()=>a.value,setContent:e=>{a.setText(e)},getIsDirty:()=>m,getEditor:()=>a}}},317:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const o=n(5213),i=n(6813),r=n(9818),a=n(118);t.default=e=>{if(!o.GCIM.GcRichTextEditorDEVTool)return;let t=o.GCIM.GcRichTextEditorDEVTool.PluginManager,n="mention";t.get(n)||t.add(n,((t,n)=>(i.register(t),a.register(t),r.init(t,e),{getMetadata:()=>({name:"mention plugin",url:""})})))}},424:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.StringCache=void 0;const o=n(8976);class i{static AddElementCache(e,t){i.TextElementCacheCount>1e4&&(i.TextElementCache={},i.TextElementCacheCount=0),i.TextElementCache[e]=t,i.TextElementCacheCount++}static SuspendSurrogateCharCheck(){i._suspendSurrogateCharCheckCount++,i.CanCheckSurrogateChar=!1}static ResumeSurrogateCharCheck(){i._suspendSurrogateCharCheckCount--,i.CanCheckSurrogateChar=0==i._suspendSurrogateCharCheckCount}}t.StringCache=i,i.TextElementCache={},i.TextElementCacheCount=0,i._suspendSurrogateCharCheckCount=0,i.CanCheckSurrogateChar=!0,String.prototype.GetStandardPosition=function(e){this.CreateSurrogateArray();var t=e;if(null!==i.TextElementArray&&e>0){for(var n=Math.min(e,i.TextElementArray.length),o=0,r=0;r<n;r++)o+=i.TextElementArray[r].length;t=o}return t},String.prototype.CreateSurrogateArray=function(){if(void 0===i.TextElementArray||i._InnerValue.toString()!=this.toString()){i._InnerValue=this;var e=i.TextElementCache[this];if(void 0===e&&i.CanCheckSurrogateChar&&(e=o.StringInfo.GetTextElement(this),i.AddElementCache(this,e)),null==e||e.length===this.length)i.TextElementArray=null;else{i.TextElementArray=e,i.MultiCharExit=!1;for(var t=0;t<e.length;t++)if(e[t].length>2){i.MultiCharExit=!0;break}}}},String.prototype.GetLength=function(){if(!i.CanCheckSurrogateChar)return this.length;this.CreateSurrogateArray();var e=this.length;return null!==i.TextElementArray&&(e=i.TextElementArray.length),e},String.prototype.Substring=function(e,t){if(this.CreateSurrogateArray(),e>=t)return"";var n=this.substring(e,t);if(null!==i.TextElementArray){e=Math.max(0,e),t=Math.min(i.TextElementArray.length,t);for(var o=[],r=e;r<t;r++)o.push(i.TextElementArray[r]);n=o.join("")}return n},String.prototype.IndexOf=function(e,t){this.CreateSurrogateArray();var n=this.indexOf(e,t);if(null!==i.TextElementArray&&n>0)for(var o=0,r=0;r<i.TextElementArray.length;r++)if((o+=i.TextElementArray[r].length)==n){n=r+1;break}return null!==i.TextElementArray&&n>=0&&this.Substring(n,n+e.GetLength()).length!=e.length&&(n=-1),n},String.prototype.LastIndexOf=function(e){this.CreateSurrogateArray();var t=this.lastIndexOf(e);if(null!==i.TextElementArray&&t>0)for(var n=0,o=0;o<i.TextElementArray.length;o++)if((n+=i.TextElementArray[o].length)==t){t=o+1;break}return null!==i.TextElementArray&&t>=0&&this.Substring(t,t+e.GetLength()).length!=e.length&&(t=-1),t},String.prototype.CharAt=function(e){if(!i.CanCheckSurrogateChar)return this.charAt(e);this.CreateSurrogateArray();var t=this.charAt(e);return null!==i.TextElementArray&&(t=e>=0&&e<i.TextElementArray.length?i.TextElementArray[e]:""),t},String.prototype.startWith=function(e){return!(null==e||""==e||0==this.length||e.length>this.length)&&this.substr(0,e.length)==e},String.prototype.IsNulOrEmpty=e=>null==e||""==e},1029:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Device=void 0;const o=n(5785);t.Device={isMobile:(0,o.lazy)((()=>/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent))),isTablet:(0,o.lazy)((()=>/iPad/i.test(navigator.userAgent))),isDesktop:(0,o.lazy)((()=>!t.Device.isMobile()&&!t.Device.isTablet())),isTouch:(0,o.lazy)((()=>"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0)),isIOS:(0,o.lazy)((()=>/iPad|iPhone|iPod/.test(navigator.userAgent))),isAndroid:(0,o.lazy)((()=>/Android/.test(navigator.userAgent))),isMac:(0,o.lazy)((()=>/Mac OS X/.test(navigator.userAgent))),isWindows:(0,o.lazy)((()=>/Windows/.test(navigator.userAgent))),isLinux:(0,o.lazy)((()=>/Linux/.test(navigator.userAgent))),isChrome:(0,o.lazy)((()=>/Chrome/.test(navigator.userAgent))),isFirefox:(0,o.lazy)((()=>/Firefox/.test(navigator.userAgent))),isSafari:(0,o.lazy)((()=>/Safari/.test(navigator.userAgent))),isEdge:(0,o.lazy)((()=>/Edge/.test(navigator.userAgent))),isWebkit:(0,o.lazy)((()=>/WebKit/.test(navigator.userAgent))),isIpadOS:(0,o.lazy)((()=>/Macintosh/.test(navigator.userAgent)&&"ontouchstart"in window))}},1139:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Browser=void 0;class n{static init(){n.IsEdge=void 0!==n.edge,n.IsIE=void 0!==n.ie||n.IsEdge,n.IsFireFox4OrLater=null!=n.firefox&&parseFloat(n.firefox)>=4,n.IsIE11OrLater=n.IsIE&&n.engine>=11||n.IsEdge,n.IsIE10OrLater=n.IsIE&&n.engine>=10||n.IsEdge,n.IsIE9OrLater=n.IsIE&&n.engine>=9||n.IsEdge,n.IsIE9=n.IsIE&&9==n.engine,n.IsIE10=n.IsIE&&10==n.engine,n.IsIE11=n.IsIE&&11==n.engine,n.webkit=n.chrome||n.safari||n.isPad()}static getBrowserType(){var e=navigator.userAgent.toLowerCase();if(window.ActiveXObject)n.ie=e.match(/msie ([\d.]+)/)[1];else if(-1!=e.indexOf("edge"))n.edge=e.match(/edge\/([\d.]+)/)[1];else if(-1!=e.indexOf("chrome")){n.chrome=e.match(/chrome\/([\d.]+)/)[1];try{n.ChromeVersion=parseInt(n.chrome)}catch(e){}}else if(-1!=e.indexOf("safari")){if(e.match(/version\/([\d.]+)/))n.safari=e.match(/version\/([\d.]+)/)[1];else if(-1!=e.indexOf("ipad")){if(t=e.match(/crios\/([\d.]+)/))n.chrome=t[1],n.ChromeVersion=parseInt(n.chrome);else if(-1!=e.indexOf("applewebkit")){var t;(t=e.match(/applewebkit\/([\d.]+)/))&&(n.safari=t[1])}}}else-1!=e.indexOf("firefox")&&(n.firefox=e.match(/firefox\/([\d.]+)/)[1]);n.isMacTouchDevice()?(n.IPad=!0,n.IPadOS=!0):-1!=e.indexOf("ipad")&&(n.IPad=!0),n.engine=null,"Microsoft Internet Explorer"==window.navigator.appName&&(document.documentMode?n.engine=document.documentMode:(n.engine=5,document.compatMode&&"CSS1Compat"==document.compatMode&&(n.engine=7),n.ie&&0==n.ie.indexOf("6")&&(n.engine=6))),-1!==e.indexOf("rv:")&&-1===e.indexOf("firefox")&&(n.ie=n.engine=e.match(/rv:([\d.]+)/)[1]),n.IsMicrosoftEdge=n.isMicrosoftEdge()}static isMicrosoftEdge(){const e=window.navigator.userAgent;return[/\sedg\//i,/edg([ea]|ios)/i].some((t=>t.test(e)))}static isMacTouchDevice(){return!(-1==navigator.userAgent.toLowerCase().indexOf("mac os")||!n.isTouchDevice())}static isTouchDevice(){return"ontouchstart"in window||navigator.maxTouchPoints}static isChrome37OrLater(){if(n.chrome&&parseInt(n.chrome)>=37)return!0;return!1}static isPad(){return n.IPad||"android"==n.getClientOS().toLowerCase()}static getClientOS(){var e;if(n.IsIE)e=navigator.appVersion;else{var t=navigator.userAgent,o=t.indexOf("("),i=t.indexOf(")");e=t.substring(o+1,i)}if(-1!=e.indexOf("NT 6.0"))return"vista";if(-1!=e.indexOf("NT 5.2"))return"win2003";if(-1!=e.indexOf("NT 5.1"))return"winxp";if(-1!=e.indexOf("NT 5.0"))return"win2000";if(-1!=e.indexOf("NT 6.1"))return"Win7";if(-1!=e.indexOf("NT 6.2"))return"Win8";if(-1!=e.indexOf("NT 6.3"))return"Win8";var r=e.indexOf("NT ");if(r>=0){var a=e.substr(r+3,3);if(parseFloat(a)>=6.3)return"Win8"}return-1!=e.indexOf("Android")?"Android":"unknow"}static isIPhoneDevice(){const e=window.navigator.userAgent,t=/ipod|iphone/i.test(e),n=/like (ipod|iphone)/i.test(e);if(t&&!n){const t=e.match(/(ipod|iphone)/i);return"iphone"===(t&&t.length>0&&t[1]||"").toLowerCase()}return!1}}t.Browser=n,n.getBrowserType(),n.init()},1394:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.tipText=t.name=t.onAction=t.img=t.text=t.shouldAppendItem=void 0;const o=n(5452),i=n(9129),r=n(7286),a=n(9529);t.shouldAppendItem=(e,t)=>i.CommentUIHelper.isCommentPostedByCurrentUser(e,t);t.text=()=>(0,o.SR)().getResource(o.GcCommentResourceNames.Edit);t.img=()=>(0,a.h)("div",{class:`${i.GcCommentClassNames.EditCommentImage} ${i.GcCommentClassNames.CommonImg}`});t.onAction=(e,t)=>{e.execCommand(r.GcCommentCommand.DoEditCommentAction,{commentId:t.id})};const m=r.GcCommentContextToolbar.Edit;t.name=m;t.tipText=()=>(0,o.SR)().getResource(o.GcCommentResourceNames.Edit)},1409:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const o=n(317),i=n(3777);t.default=e=>{(0,o.default)(e),(0,i.default)(e)}},1462:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MessageBox=void 0;const o=n(8581),i=n(5452);t.MessageBox={show:async(e,t=!0,n)=>{var o,i;return t?(n=n?{showOkButton:null===(o=n.showOkButton)||void 0===o||o,showCancelButton:null===(i=n.showCancelButton)||void 0===i||i}:{showOkButton:!0,showCancelButton:!0},r(e,n)):confirm(e)}};const r=(e,t)=>new Promise(((n,r)=>{const a=(0,o.buildDomElement)({tag:"dialog",classes:["gcim__modal-dialog"],children:[{tag:"p",classes:["gcim__modal-dialog-content"],innerText:e},{tag:"div",classes:["gcim__modal-dialog-actions"],children:[(null==t?void 0:t.showCancelButton)&&{tag:"button",innerText:(0,i.SR)().getResource(i.GcCommentResourceNames.Cancel),classes:["gcim__modal-dialog-actions-cancel","gcim__modal-dialog-actions-button"],events:{click:()=>{n(!1),a.close(),a.remove()}}},(null==t?void 0:t.showOkButton)&&{tag:"button",innerText:(0,i.SR)().getResource(i.GcCommentResourceNames.OK),classes:["gcim__modal-dialog-actions-ok","gcim__modal-dialog-actions-button"],events:{click:()=>{n(!0),a.close(),a.remove()}}}]}]});document.body.appendChild(a),a.showModal()}))},1550:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Plugin=void 0;const o=n(127),i=n(7962),r=n(9126),a=n(5640),m=n(7595),s=n(8307),l=n(7286),c=n(2264);t.Plugin=()=>{o.PluginManager.add("stick",(e=>{r.register(e),a.register(e),s.register(e),m.register(e),e.addEventListener(l.GcCommentEvent.BeforeFirstLoad,(()=>{const t=(0,i.getCommentDom)(e),n=(0,i.buildStickedContainerElement)(e);t.headerWrapper.appendChild(n),t.stickedCommentsContainer=n})),e.addEventListener(l.GcCommentEvent.AfterFirstLoad,(async()=>{const t=await e.dataManager.commentsManager.loadStickedComment();(null==t?void 0:t.id)&&e.execCommand(l.GcCommentCommand.StickCommentElement,{commentId:null==t?void 0:t.id})})),e.addEventListener(l.GcCommentEvent.AfterExecuteCommand,(t=>{var n;if(t.command===l.GcCommentCommand.Clear)(0,c.clearStickedCommentsContainer)(e),(0,c.clearStickedCommentService)(e);else if(t.command===l.GcCommentCommand.DeleteCommentElement)(0,c.updateStickedCommentService)(e);else if(t.command===l.GcCommentCommand.UpdateCommentElement){const o=t.value,i=(0,c.peekStickedComment)(e);(null==i?void 0:i.id)===(null===(n=o.comment)||void 0===n?void 0:n.id)&&(0,c.updateStickedComments)(e,i)}}))}))}},1629:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CommentEditorAPI=void 0;const o=n(5213),i=n(1950),r=n(7286),a=n(8794),m=n(9129);t.CommentEditorAPI=(e,t,n)=>{const s=(0,a.LocalStorageManager)(t);let l=m.CommentUIHelper.createEditorAPI(t),c=(0,i.getCommentEditor)(t),d=null,u=e.querySelector(".gcim__add-comment"),C=()=>()=>{},A=null,g={content:"",state:r.GcCommentCreateEditorReason.AddComment,commentId:""},p=!1,h=()=>!(null==d?void 0:d.getIsDirty())||n(),f=()=>{null==A||A.remove(),l.dom.wrapperEL.removeAttribute(m.GcCommentAttrNames.EmptyContentWarning)},v=(e=!1,t=!0)=>{(e||h())&&(p=!1,d&&(t&&s.remove(g.commentId,g.state),null==d||d.destroy(),l.dom.wrapperEL.remove(),l.dom.editor.innerHTML="",E(),f(),d=null,m.CommentUIHelper.showElement(u)))},E=()=>{let e=l.dom.okBtn.cloneNode(!0),t=l.dom.cancelBtn.cloneNode(!0);l.dom.okBtn.replaceWith(e),l.dom.cancelBtn.replaceWith(t),l.dom.okBtn=e,l.dom.cancelBtn=t,e.addEventListener("keypress",(t=>m.CommentUIHelper.clickIfPressEnterKey(t,e))),t.addEventListener("keypress",(e=>m.CommentUIHelper.clickIfPressEnterKey(e,t)))},w=()=>{var e;let n=null!==(e=d.getContent())&&void 0!==e?e:"";const i=t.registry.commentEditorsRegistry.getContentProcessors();if(i&&i.length>0&&i.forEach((e=>{n=e(n)})),o.GCIM.GcRichTextEditor&&d.getEditor()instanceof o.GCIM.GcRichTextEditor){let e=I(d.getEditor());return{content:n,mentionInfo:e}}return{content:n.replace(/</g,"&lt;").replace(/>/g,"&gt;"),mentionInfo:[]}},I=e=>{let t=[],n=e.getContent(),o=document.createElement("div");o.innerHTML=n;let i=o.querySelectorAll(m.GcCommentClassNames.Selector(m.GcCommentClassNames.Mention));return i&&i.forEach((e=>{let n=e.getAttribute(m.GcCommentAttrNames.MentionUserName),o=e.getAttribute(m.GcCommentAttrNames.MentionUserId);t.push({userName:n,userId:o})})),t},y=(e,n,o)=>{E(),g.state=e,e===r.GcCommentCreateEditorReason.AddComment&&(g.commentId=null);let i=e=>()=>{v(e),p||o&&o(d)};l.dom.cancelBtn.addEventListener("click",i(!1));l.dom.okBtn.addEventListener("click",(()=>{let e=w();if(!e.content)return A=null!=A?A:m.CommentUIHelper.createWarningMessage(t.options.warningMessage.emptyContent),l.dom.addCommentActionContainer.appendChild(A),void l.dom.wrapperEL.setAttribute(m.GcCommentAttrNames.EmptyContentWarning,"true");n&&n({content:e.content,mentionInfo:e.mentionInfo}),v(!0)})),C=i},x=(e,n)=>{let o=t.dispatchEvent(r.GcCommentEvent.CreateEditor,{element:e,createEditorReason:n});if(o)return o;return c(t,{onContentChanged:()=>{f()},activeReason:n,containerElement:l.dom.editor})},G=()=>{if(p&&d.getIsDirty()){let e=w();s.save({commentId:g.commentId,content:e.content,state:g.state})}};const b=()=>{G()};window.addEventListener("beforeunload",b),t.addEventListener(r.GcCommentEvent.BeforeExecuteCommand,(e=>{e.command!==r.GcCommentCommand.ChangeUserInfo&&e.command!==r.GcCommentCommand.Clear||G()})),t.addEventListener(r.GcCommentEvent.AfterExecuteCommand,(e=>{e.command!==r.GcCommentCommand.ChangeUserInfo&&e.command!==r.GcCommentCommand.Clear||v(!0,!1)}));let S=(e=!0)=>{C&&C(e)()};return t.addEventListener(r.GcCommentInnerEvent.Destroy,(()=>{G(),S(!0),window.removeEventListener("beforeunload",b),l.destroy(),C=null,u=null,n=null})),{deactive:S,active:(e,n,i,a,c,C)=>{if((!!t.options.userInfo.id||t.options.allowAnonymous)&&h()){S(),i&&i(),u.after(l.dom.wrapperEL),y(e,a,c),m.CommentUIHelper.hideElement(u),l.setIsLoading(!0),d=x(l.dom.editor,e),p=!0,g.commentId=n,g.state=e;let A=s.load(n,e);A=(null==A?void 0:A.state)===e?A:null,o.GCIM.GcRichTextEditor&&d.getEditor()instanceof o.GCIM.GcRichTextEditor?(d.getEditor().autoAdjustToolbarPositionInInlineMode=!1,d.getEditor().addEventListener(o.GCIM.GcRichTextEditorEvent.Init,(()=>{l.setIsLoading(!1),d.getEditor().execCommand(o.GCIM.GcRichTextEditorCommand.Focus),C&&C(d),A&&d.setContent(A.content),t.dispatchEvent(r.GcCommentEvent.EditorCreated,{editor:d,createEditorReason:e})}))):(l.setIsLoading(!1),C&&C(d),t.dispatchEvent(r.GcCommentEvent.EditorCreated,{editor:d,createEditorReason:e}),A&&d.setContent(A.content))}},getIsAnonymous:()=>l.getIsAnonymous(),getDom:()=>l.dom,updateOkCancelEvent:y,getIsActive:()=>p,getTargetCommentId:()=>g.commentId}}},1701:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Tip=void 0;const o=n(8581);t.Tip=(()=>{const e=(0,o.buildDomElement)({tag:"div",classes:["gcim__gccomment-tip"]});let t=0;const n=n=>{const o=()=>{t>0&&t--,0===t&&(e.remove(),e.textContent="")};(null==n?void 0:n.delay)?setTimeout(o,n.delay):o()};return{show:(o,i,r)=>{var a,m;if(i.message){if(t++,e.textContent=i.message,e.style="",e.style.display="block",(null==i?void 0:i.style)&&Object.entries(i.style).forEach((([t,n])=>{n&&(e.style[t]=n)})),document.body.appendChild(e),i.position)e.style.left=`${i.position.x}px`,e.style.top=`${i.position.y}px`;else{const t=(()=>{let{height:t,width:n}=e.getBoundingClientRect();return{height:t,width:n}})(),n=o.getBoundingClientRect(),r=e.getBoundingClientRect();if(!(null===(a=null==i?void 0:i.style)||void 0===a?void 0:a.left)){let o=window.scrollX+n.left-(t.width-n.width)/2;o+r.width>window.innerWidth&&(o=window.innerWidth-r.width-8),e.style.left=`${Math.max(8,o)}px`}if(!(null===(m=null==i?void 0:i.style)||void 0===m?void 0:m.top)){let o=window.scrollY+n.top-8-t.height;o<8&&(o=window.scrollY+n.bottom+8),e.style.top=`${Math.max(8,o)}px`}}r&&setTimeout((()=>{n()}),r.delay)}},hide:n}})()},1724:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CommentEditorsRegistry=void 0;t.CommentEditorsRegistry=()=>{const e=[];return{addContentProcessor:t=>{e.push(t)},removeContentProcessor:t=>{const n=e.indexOf(t);-1!==n&&e.splice(n,1)},getContentProcessors:()=>e,destroy:()=>{e.length=0}}}},1828:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.register=void 0;const o=n(7286),i=n(2114);t.register=e=>{e.addCommand(o.GcCommentCommand.UpdateReactionCount,((t,n)=>{"number"==typeof n.count&&(0,i.updateCommentCount)(e,n.count)}))}},1836:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.buildHeaderElement=t.getCommentCountInnerHTML=t.getCommentDom=void 0;const o=n(5452),i=n(7935),r=n(8581),a="gcim__reaction-count",m="gcim__count",s="gcim__text";t.getCommentDom=e=>(0,i.enhanceType)(e.elementDom);t.getCommentCountInnerHTML=(e,t)=>{let n;if(!e.options.reactionCountFormatter){let e=document.createDocumentFragment(),n=(0,r.buildDomElement)({tag:"span",innerText:`${t}`,classes:[m]}),i=(0,o.SR)().getResource(o.GcCommentResourceNames.Reactions).split("{}");const a=(0,r.buildDomElement)({tag:"span",innerText:`${i[0]}`,classes:[s]});if(e.appendChild(a),e.appendChild(n),i[1]){const t=(0,r.buildDomElement)({tag:"span",innerText:`${i[1]}`,classes:[s]});e.appendChild(t)}return e}{let o=e.options.reactionCountFormatter(t);n="string"==typeof o?document.createTextNode(o):o}return n};t.buildHeaderElement=e=>{if(e.options.loadReactionCount){let n=(0,r.buildDomElement)({tag:"div",classes:[a]}),o=e.options.loadReactionCount();if(o instanceof Promise||"[object Promise]"===Object.prototype.toString.call(o))o.then((o=>{let i=(0,t.getCommentCountInnerHTML)(e,o);n.appendChild(i)}));else{let i=(0,t.getCommentCountInnerHTML)(e,o);n.appendChild(i)}return n}return null}},1950:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getCommentEditor=void 0;const o=n(9316),i=n(7873),r=n(136),a=n(6090),m=n(3892),s=n(5213);t.getCommentEditor=e=>{let t,n=e.options.editorConfig;switch(n.editorType){case m.GcCommentEditorType.GcMultilineTextBox:t=o.GCIM.GcMultiLineTextBox?r.GcMultilineCommentEditor:i.CommonEditor;break;case m.GcCommentEditorType.GcRichTextEditor:t=s.GCIM.GcRichTextEditor?a.GcRichTextCommentEditor:i.CommonEditor;break;case m.GcCommentEditorType.Custom:t=n.editor;break;default:t=i.CommonEditor}return t}},2022:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.updateCommentCount=void 0;const o=n(9344);t.updateCommentCount=(e,t)=>{const n=(0,o.getCommentDom)(e).commentCounterElement;if(n){const i=(0,o.getCommentCountInnerHTML)(e,t);i&&(n.innerHTML="",n.appendChild(i))}}},2028:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.OptionsUtil=t.resolveConfig=t.OptionNames=void 0;const o=n(7286),i=n(5),r=n(6629),a=n(5479),m=n(3979),s=n(6404),l=n(9252),c=n(6270),d=n(8706),u=n(8999),C=n(4099),A=n(1394),g=n(4676),p=n(4055),h=n(6613),f=n(9129),v=n(5452),E=n(4219);t.OptionNames={userInfo:"userInfo",candidateReactionList:"candidateReactionList",candidateReactionListColumns:"candidateReactionListColumns",postTimeFormatter:"postTimeFormatter",updateTimeFormatter:"updateTimeFormatter",showIcon:"showIcon",addCommentEditorPosition:"addCommentEditorPosition",commentMode:"commentMode",header:"header",footer:"footer",headerFooterItems:"headerFooterItems",commentAction:"commentAction",commentInfoAction:"commentInfoAction",commentActionItem:"commentActionItem",commentInfoActionItem:"commentInfoActionItem",loadOnDemand:"loadOnDemand",pageSize:"pageSize",allowAnonymous:"allowAnonymous",anonymousUserInfo:"anonymousUserInfo",commentFormatter:"commentFormatter",editorConfig:"editorConfig",avatarType:"avatarType",loadUsersInfoHandler:"loadUsersInfoHandler",loadComments:"loadComments",warningMessage:"warningMessage",watermark:"watermark",addNewCommentTo:"addNewCommentTo",keepDraft:"keepDraft",dataSource:"dataSource",showCurrentUserName:"showCurrentUserName",contextToolbar:"contextToolbar",contextToolbarItem:"contextToolbarItem",loadCommentCount:"loadCommentCount",commentCountFormatter:"commentCountFormatter",loadReactionCount:"loadReactionCount",reactionCountFormatter:"reactionCountFormatter",commentActionButtonType:"commentActionButtonType",sortInfo:"sortInfo",loadRepliesOnDemand:"loadRepliesOnDemand",loadCommentReplies:"loadCommentReplies",replyLevel:"replyLevel",collapseRepliesMode:"collapseRepliesMode",setup:"setup",showZeroReaction:"showZeroReaction",showOpenReactionListButton:"showOpenReactionListButton"},t.resolveConfig=function(e,n){var E,b;let S=(()=>{let e=new Map,t=!1;return{get:t=>{let n=e.get(t);return(null==n?void 0:n.option)?null==n?void 0:n.option.get():null==n?void 0:n.defaultValue},set:(n,o,i)=>{if(!t||void 0!==o)if(e.has(n)){let t=e.get(n);t&&(t.option?t.option.set(o):t.defaultValue=o)}else e.set(n,{defaultValue:o,option:i})},beginInit:()=>{t=!0},afterInit:()=>{t=!1},destroy:()=>{e.clear()}}})();S.set(t.OptionNames.userInfo,void 0),S.set(t.OptionNames.candidateReactionList,["👍","👏","🔥","😯","🤔"]),S.set(t.OptionNames.candidateReactionListColumns,null,y(5,1)),S.set(t.OptionNames.postTimeFormatter,f.CommentUIHelper.formatPostDate),S.set(t.OptionNames.updateTimeFormatter,f.CommentUIHelper.formatUpdateDate),S.set(t.OptionNames.showIcon,null,x(!0)),S.set(t.OptionNames.showCurrentUserName,null,x(!1)),S.set(t.OptionNames.addCommentEditorPosition,null,I(o.GcCommentEditorPosition,o.GcCommentEditorPosition.Bottom)),S.set(t.OptionNames.commentMode,null,I(o.GcCommentMode,o.GcCommentMode.ThreadMode)),S.set(t.OptionNames.header,[[{name:o.GcCommentHeaderFooterItem.Sort,align:o.GcCommentAlign.Left},{name:o.GcCommentHeaderFooterItem.Search,align:o.GcCommentAlign.Right}]]),S.set(t.OptionNames.footer,[]),S.set(t.OptionNames.headerFooterItems,null,w({[o.GcCommentHeaderFooterItem.Sort]:r.getItemInfo,[o.GcCommentHeaderFooterItem.Search]:i.getItemInfo})),S.set(t.OptionNames.commentAction,[o.GcCommentCommentActionItem.Reply,o.GcCommentCommentActionItem.Edit,o.GcCommentCommentActionItem.Delete,o.GcCommentCommentActionItem.SeparateLine,o.GcCommentCommentActionItem.AddReactions]),S.set(t.OptionNames.commentInfoAction,[o.GcCommentCommentInfoActionItem.UpdateTime]),S.set(t.OptionNames.contextToolbar,[o.GcCommentContextToolbar.AddReactions,o.GcCommentContextToolbar.SeparateLine,o.GcCommentContextToolbar.Edit,{name:o.GcCommentContextToolbar.Reply,collapse:!0},{name:o.GcCommentContextToolbar.Delete,collapse:!0}]),S.set(t.OptionNames.commentActionItem,null,w({[a.name]:a,[m.name]:m,[s.name]:s,[l.name]:l,[c.name]:c})),S.set(t.OptionNames.commentInfoActionItem,null,w({[d.name]:d,[u.name]:u})),S.set(t.OptionNames.contextToolbarItem,null,w({[C.name]:C,[A.name]:A,[g.name]:g,[p.name]:p,[h.name]:h})),S.set(t.OptionNames.loadOnDemand,null,x(!1)),S.set(t.OptionNames.pageSize,null,y(10,1)),S.set(t.OptionNames.allowAnonymous,null,x(!1)),S.set(t.OptionNames.anonymousUserInfo,{name:(0,v.SR)().getResource(v.GcCommentResourceNames.AnonymousUser),avatar:"",id:f.CommentUIHelper.getRandomString(10)}),S.set(t.OptionNames.commentFormatter,(e=>f.CommentUIHelper.createDiv(e))),S.set(t.OptionNames.editorConfig,{}),S.set(t.OptionNames.avatarType,null,I(o.GcCommentUserIconType,o.GcCommentUserIconType.Circle)),S.set(t.OptionNames.loadUsersInfoHandler,(()=>[])),S.set(t.OptionNames.loadComments,(()=>({comments:[],hasMore:!1}))),S.set(t.OptionNames.addNewCommentTo,null,I(o.AddNewCommentPosition,o.AddNewCommentPosition.Bottom)),S.set(t.OptionNames.keepDraft,null,x(!0)),S.set(t.OptionNames.dataSource,{}),S.set(t.OptionNames.loadCommentCount,void 0),S.set(t.OptionNames.commentCountFormatter,void 0),S.set(t.OptionNames.loadReactionCount,void 0),S.set(t.OptionNames.reactionCountFormatter,void 0),S.set(t.OptionNames.commentActionButtonType,null,I(o.GcCommentActionButtonType,o.GcCommentActionButtonType.Button)),S.set(t.OptionNames.sortInfo,void 0),S.set(t.OptionNames.loadRepliesOnDemand,null,x(!1)),S.set(t.OptionNames.loadCommentReplies,(()=>({comments:[],hasMore:!1}))),S.set(t.OptionNames.replyLevel,null,y(0,0)),S.set(t.OptionNames.setup,void 0),S.set(t.OptionNames.collapseRepliesMode,null,I(o.GcCommentCollapseRepliesMode,o.GcCommentCollapseRepliesMode.NotAllowed)),S.set(t.OptionNames.watermark,null,G({addComment:(0,v.SR)().getResource(v.GcCommentResourceNames.AddCommentHere),searchBox:(0,v.SR)().getResource(v.GcCommentResourceNames.SearchAnyTextHere),continueAddComment:(0,v.SR)().getResource(v.GcCommentResourceNames.ContinueToAddCommentHere)})),S.set(t.OptionNames.warningMessage,null,G({emptyContent:(0,v.SR)().getResource(v.GcCommentResourceNames.CommentIsEmptyAddYourFeedbackAndClickSave),notAllowPostComment:(0,v.SR)().getResource(v.GcCommentResourceNames.PleaseLogInBeforePostingAComment),confirmDeleteComment:(0,v.SR)().getResource(v.GcCommentResourceNames.SureToDeleteThisComment),stopEditing:(0,v.SR)().getResource(v.GcCommentResourceNames.AreYouSureYouWillStopEditingTheComment)})),S.set(t.OptionNames.showZeroReaction,!1),S.set(t.OptionNames.showOpenReactionListButton,!0),e.commentMode===o.GcCommentMode.ChatMode?(S.set(t.OptionNames.commentAction,[o.GcCommentCommentActionItem.AddReactions]),S.set(t.OptionNames.commentInfoAction,[o.GcCommentCommentInfoActionItem.UpdateTime]),S.set(t.OptionNames.contextToolbar,[o.GcCommentContextToolbar.AddReactions,o.GcCommentContextToolbar.SeparateLine,o.GcCommentContextToolbar.Edit,{name:o.GcCommentContextToolbar.Reply,collapse:!0},{name:o.GcCommentContextToolbar.Delete,collapse:!0},{name:o.GcCommentContextToolbar.CopyLink,collapse:!0},{name:o.GcCommentContextToolbar.StickComment,collapse:!0}])):S.set(t.OptionNames.commentInfoAction,[o.GcCommentCommentInfoActionItem.UpdateTime,o.GcCommentCommentInfoActionItem.StickComment,o.GcCommentCommentInfoActionItem.CopyLink]),S.beginInit(),Object.keys(e||{}).forEach((t=>{S.set(t,e[t])}));let _=null!==(E=S.get(t.OptionNames.editorConfig))&&void 0!==E?E:{};if(_[t.OptionNames.loadUsersInfoHandler]=S.get(t.OptionNames.loadUsersInfoHandler),_.plugins=["mention","comment-link-style","gccomment-content-styles"].concat(null!==(b=_.plugins)&&void 0!==b?b:[]),!S.get(t.OptionNames.userInfo)){let e=S.get(t.OptionNames.anonymousUserInfo);S.get(t.OptionNames.allowAnonymous)?S.set(t.OptionNames.userInfo,e):S.set(t.OptionNames.userInfo,{id:"",name:"",avatar:""})}return S.afterInit(),S};const w=e=>({get:()=>e,set:t=>{if(t){let n={};Object.assign(n,t),Object.assign(n,e),e=n}}}),I=(e,t)=>{let n=t;return{get:()=>n,set:o=>{n=E.Utility.validateEnumOrDefault(e,o,t)}}},y=(e,t,n)=>{let o=e;return{get:()=>o,set:i=>{var r;o=null!==(r=E.Utility.CheckInt(i,t,n))&&void 0!==r?r:e}}},x=e=>{let t=e;return{get:()=>t,set:e=>{t=E.Utility.CheckBool(e)}}},G=e=>({get:()=>e,set:t=>{if(t)for(let n in t)t.hasOwnProperty(n)&&e.hasOwnProperty(n)&&(e[n]=t[n])}});t.OptionsUtil=e=>{const n={get userInfo(){return e.get(t.OptionNames.userInfo)},get candidateReactionList(){return e.get(t.OptionNames.candidateReactionList)},get candidateReactionListColumns(){return e.get(t.OptionNames.candidateReactionListColumns)},get postTimeFormatter(){return e.get(t.OptionNames.postTimeFormatter)},get updateTimeFormatter(){return e.get(t.OptionNames.updateTimeFormatter)},get showIcon(){return e.get(t.OptionNames.showIcon)},get addCommentEditorPosition(){return e.get(t.OptionNames.addCommentEditorPosition)},get commentMode(){return e.get(t.OptionNames.commentMode)},get header(){return e.get(t.OptionNames.header)},get footer(){return e.get(t.OptionNames.footer)},get headerFooterItems(){return e.get(t.OptionNames.headerFooterItems)},get commentAction(){return e.get(t.OptionNames.commentAction)},get commentInfoAction(){return e.get(t.OptionNames.commentInfoAction)},get commentActionItem(){return e.get(t.OptionNames.commentActionItem)},get commentInfoActionItem(){return e.get(t.OptionNames.commentInfoActionItem)},get loadOnDemand(){return e.get(t.OptionNames.loadOnDemand)},get pageSize(){return e.get(t.OptionNames.pageSize)},get allowAnonymous(){return e.get(t.OptionNames.allowAnonymous)},get anonymousUserInfo(){return e.get(t.OptionNames.anonymousUserInfo)},get commentFormatter(){return e.get(t.OptionNames.commentFormatter)},get editorConfig(){return e.get(t.OptionNames.editorConfig)},get avatarType(){return e.get(t.OptionNames.avatarType)},get loadUsersInfoHandler(){return e.get(t.OptionNames.loadUsersInfoHandler)},get loadComments(){return e.get(t.OptionNames.loadComments)},get warningMessage(){return e.get(t.OptionNames.warningMessage)},get watermark(){return e.get(t.OptionNames.watermark)},get addNewCommentTo(){return e.get(t.OptionNames.addNewCommentTo)},get keepDraft(){return e.get(t.OptionNames.keepDraft)},get dataSource(){return e.get(t.OptionNames.dataSource)},get showCurrentUserName(){return e.get(t.OptionNames.showCurrentUserName)},get contextToolbar(){return e.get(t.OptionNames.contextToolbar)},get contextToolbarItem(){return e.get(t.OptionNames.contextToolbarItem)},get loadCommentCount(){return e.get(t.OptionNames.loadCommentCount)},get commentCountFormatter(){return e.get(t.OptionNames.commentCountFormatter)},get loadReactionCount(){return e.get(t.OptionNames.loadReactionCount)},get reactionCountFormatter(){return e.get(t.OptionNames.reactionCountFormatter)},get commentActionButtonType(){return e.get(t.OptionNames.commentActionButtonType)},get sortInfo(){return e.get(t.OptionNames.sortInfo)},get loadRepliesOnDemand(){return e.get(t.OptionNames.loadRepliesOnDemand)},get loadCommentReplies(){return e.get(t.OptionNames.loadCommentReplies)},get replyLevel(){return e.get(t.OptionNames.replyLevel)},get collapseRepliesMode(){return e.get(t.OptionNames.collapseRepliesMode)},get setup(){return e.get(t.OptionNames.setup)},get showZeroReaction(){return e.get(t.OptionNames.showZeroReaction)},get showOpenReactionListButton(){return e.get(t.OptionNames.showOpenReactionListButton)},get:e.get,set:e.set,beginInit:()=>{},afterInit:()=>{},destroy:()=>{e.destroy()}};return new Proxy(n,{get:(t,n)=>n in t?t[n]:e.get(n),set:(t,n,o)=>(n in t?t[n]=o:e.set(n,o),!0)})}},2114:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.updateCommentCount=void 0;const o=n(1836);t.updateCommentCount=(e,t)=>{const n=(0,o.getCommentDom)(e).reactionCounterElement;if(n){const i=(0,o.getCommentCountInnerHTML)(e,t);i&&(n.innerHTML="",n.appendChild(i))}}},2147:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Plugin=void 0;const o=n(7286),i=n(9487),r=n(2767),a=n(9110),m=n(6140),s=n(127),l=n(3074),c=n(5213),d=n(8581);t.Plugin=()=>{s.PluginManager.add("copy",(e=>{i.register(e),r.register(e),a.register(e),m.register(e),"complete"!==document.readyState&&window.addEventListener("load",(()=>{(0,l.gotoLinkedComment)(e)}),{once:!0}),e.addEventListener(o.GcCommentEvent.EditorCreated,(t=>{const n=t.editor.getEditor();if(c.GCIM.GcRichTextEditor&&n instanceof c.GCIM.GcRichTextEditor){(0,l.handlePasteLinkToGcRichTextEditor)(e,n),(0,l.handleInsertContentToGcRichTextEditor)(e,n);n.getContentBody().querySelectorAll("a").forEach((t=>{t.hasAttribute("data-link-type")&&((0,l.buildCommentLinkElement)(e,t,t.getAttribute("data-link-type")),t.removeAttribute("data-link-type"))}))}})),e.addEventListener(o.GcCommentEvent.AfterExecuteCommand,(t=>{var n,i,r;let a;if(t.command===o.GcCommentCommand.AddCommentElement){a=null===(n=t.value.comment)||void 0===n?void 0:n.id}else if(t.command===o.GcCommentCommand.AddReplyCommentElement){a=null===(i=t.value.reply)||void 0===i?void 0:i.id}else if(t.command===o.GcCommentCommand.UpdateCommentElement){a=null===(r=t.value.comment)||void 0===r?void 0:r.id}a&&(0,l.handleNewCommentCreated)(e,a)})),e.addEventListener(o.GcCommentEvent.CreateEditor,(t=>{if(!c.GCIM.GcRichTextEditorDEVTool)return null;let n=c.GCIM.GcRichTextEditorDEVTool.PluginManager;n.get("comment-link-style")&&n.remove("comment-link-style"),n.add("comment-link-style",((t,n)=>(t.ui.registry.addContextToolbar("custom_toolbar",{predicate:u(e,t),items:"link-link link-inline link-card",position:"node"}),C(e,t),{getMetadata:A})))})),e.registry.commentEditorsRegistry.addContentProcessor((e=>{const t=(0,d.buildDomElement)({tag:"div",innerHTML:e});return t.querySelectorAll([".gcim__comment-link-url",".gcim__comment-link-inline",".gcim__comment-link-card"].join(",")).forEach((e=>{(0,l.destroyAndMarkCommentLinkElement)(e,!0).removeAttribute("contentEditable")})),t.innerHTML}))}))};const u=(e,t)=>()=>{var n,o,i;const r=t.selection.getNode();return e.options.showLinkTypeContextToolbar&&((null===(n=r.classList)||void 0===n?void 0:n.contains("gcim__comment-link-card"))||(null===(o=r.classList)||void 0===o?void 0:o.contains("gcim__comment-link-inline"))||(null===(i=r.classList)||void 0===i?void 0:i.contains("gcim__comment-link-url")))},C=(e,t)=>{c.GCIM.GcRichTextEditorDEVTool.addI18nItem("ja","link","リンク"),c.GCIM.GcRichTextEditorDEVTool.addI18nItem("ja","card","カード"),[{linkType:"link",resourceName:"link",cssSuffix:"url"},{linkType:"inline",resourceName:"inline",cssSuffix:"inline"},{linkType:"card",resourceName:"card",cssSuffix:"card"}].forEach(((n,o)=>{t.ui.registry.addToggleButton(`link-${n.linkType}`,{text:`${n.resourceName}`,onAction:function(){const o=t.selection.getNode();if(o.classList.contains(`gcim__comment-link-${n.cssSuffix}`));else{const i=(0,l.destroyCommentLinkElement)(o);(0,l.buildCommentLinkElement)(e,i,n.linkType).then((e=>{t.dispatch("contexttoolbar-hide"),t.selection.select(e),t.nodeChanged(),t.setDirty(!0);const n=t.dom.createRng();n.setStartAfter(e),n.setEndAfter(e),t.selection.setRng(n),t.focus()}))}},onSetup:function(e){const o=()=>{const o=t.selection.getNode();e.setActive(o.classList.contains(`gcim__comment-link-${n.cssSuffix}`))},i=()=>{const e=t.selection.getNode();if(e&&1===e.nodeType){const n=e.closest(".gcim__comment-link-card");if(n&&n!==e){t.selection.select(n),t.selection.collapse(!0),t.nodeChanged();const e=t.dom.createRng();e.setStartBefore(n),e.setEndAfter(n),t.selection.setRng(e),t.focus()}}};return o(),t.on("NodeChange",o),t.on("SelectionChange",i),()=>{t.off("NodeChange",o),t.off("SelectionChange",i)}}})}))},A=()=>({name:"comment-link-style plugin",url:""})},2207:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.request=void 0;const o=n(7286),i=(e,t=new FormData,n="")=>{for(let o in e)if(e.hasOwnProperty(o)){const r=n?`${n}[${o}]`:o;null===e[o]||"object"!=typeof e[o]||e[o]instanceof File?t.append(r,e[o]):i(e[o],t,r)}return t};t.request=e=>{let t=async(t,n,r,a)=>{var m;const s={method:n},l={};if(r)switch(a){case o.GcCommentRequestDataType.FormData:s.body=i(r);break;case"url":t=((e,t)=>{const n=new URLSearchParams;for(let e in t)t.hasOwnProperty(e)&&n.append(e,String(t[e]));return e.includes("?")?`${e}&${n.toString()}`:`${e}?${n.toString()}`})(t,r);break;case o.GcCommentRequestDataType.JSON:default:s.body=JSON.stringify(r),l["Content-Type"]="application/json"}try{let n=await fetch(t,Object.assign(Object.assign({},s),{headers:l}));if(!n.ok){let t=new Error(`HTTP error! status: ${n.status}`);e.dispatchEvent(o.GcCommentEvent.PreprocessError,{error:t})}return(null===(m=n.headers.get("Content-Type"))||void 0===m?void 0:m.startsWith("application/json"))?await n.json():await n.text()}catch(t){e.dispatchEvent(o.GcCommentEvent.PreprocessError,{error:t})}};return{get:(e,n)=>t(e,"Get",n,"url"),put:(e,n,i=o.GcCommentRequestDataType.FormData)=>t(e,"Put",n,i),del:(e,n)=>t(e,"Delete",n,"url"),post:(e,n,i=o.GcCommentRequestDataType.FormData)=>t(e,"Post",n,i)}}},2258:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.win=void 0;const n={get GCIMImpl(){return window.GCIM}};t.win=n},2264:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.updateStickedCommentService=t.updateStickedComments=t.peekStickedComment=t.isCommentIdSticked=t.isCommentSticked=t.clearStickedCommentService=t.clearStickedCommentsContainer=t.stickComment=t.isCommentAlreadySticked=t.stickCommentElement=t.stickCommentService=void 0;const o=n(7286),i=n(7962),r=n(5585),a=n(1462),m=n(5452);t.stickCommentService=(0,r.StickCommentService)();t.stickCommentElement=(e,n)=>{var o;let r;if(r=n?null===(o=e.getComment(n))||void 0===o?void 0:o.comment:t.stickCommentService.peekComment(e),r||(r=t.stickCommentService.getComment(e,n)),!r)return;(0,i.getCommentDom)(e).stickedCommentsContainer&&((0,t.isCommentAlreadySticked)(e,r.id)?s(e,r):l(e,r))};t.isCommentAlreadySticked=(e,n)=>t.stickCommentService.isCommentSticked(e,n);const s=(e,n)=>{var o;n===t.stickCommentService.peekComment(e)?(t.stickCommentService.popStickedComment(e),c(e,t.stickCommentService.peekComment(e))):t.stickCommentService.stickComment(e,n),null===(o=e.getCommentElement(n.id))||void 0===o||o.classList.remove("gcim__comment--sticked")},l=(e,n)=>{var o;c(e,n),t.stickCommentService.stickComment(e,n),null===(o=e.getCommentElement(n.id))||void 0===o||o.classList.add("gcim__comment--sticked")},c=(e,n)=>{if((0,t.clearStickedCommentsContainer)(e),!n)return;const o=(0,i.getCommentDom)(e).stickedCommentsContainer,r=(0,i.buildStickedCommentElement)(e,n);o.appendChild(r)};t.stickComment=async(e,n)=>{var i,r,s,l,c;const d=n.commentId;let u;u=d?null===(i=e.getComment(d))||void 0===i?void 0:i.comment:t.stickCommentService.peekComment(e),u?!t.stickCommentService.peekComment(e)||t.stickCommentService.isCommentSticked(e,null==u?void 0:u.id)||await a.MessageBox.show((0,m.SR)().getResource(m.GcCommentResourceNames.WantToReplaceTheCurrentlyStickedCommentWithThisOne),!0)?await e.dataManager.commentsManager.stickComment(u,!t.stickCommentService.isCommentSticked(e,null==u?void 0:u.id))?(e.execCommand(o.GcCommentCommand.StickCommentElement,{commentId:u.id}),null===(c=n.onSuccess)||void 0===c||c.call(n)):null===(l=n.onFailed)||void 0===l||l.call(n):null===(s=n.onFailed)||void 0===s||s.call(n):null===(r=n.onFailed)||void 0===r||r.call(n)};t.clearStickedCommentsContainer=e=>{const t=(0,i.getCommentDom)(e).stickedCommentsContainer;t&&t.querySelectorAll("[gcim-comment-id]").forEach((e=>{e.remove()}))};t.clearStickedCommentService=e=>{t.stickCommentService.clear(e)};t.isCommentSticked=(e,n)=>t.stickCommentService.isCommentSticked(e,n);t.isCommentIdSticked=(e,n)=>t.stickCommentService.isCommentSticked(e,n);t.peekStickedComment=e=>t.stickCommentService.peekComment(e);t.updateStickedComments=(e,t)=>{c(e,t)};t.updateStickedCommentService=e=>{t.stickCommentService.update(e)}},2366:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CustomExceptions=void 0,t.CustomExceptions={abstractMethodCalled:()=>new Error("Abstract method called"),containerShouldBeInputElement:()=>new Error("The host element should be a HTMLInputElement"),shouldGraterThan:(e,t,n)=>console.warn(`The value of field ${n} is ${e}, which should be grater than ${t}`),shouldGraterOrEqualThan:(e,t,n,o)=>console.warn(`The value of field ${n} is ${e}, which should be grater or equal than field ${o} is ${t}`),shouldLessThan:(e,t,n)=>console.warn(`The value of field ${n} is ${e}, which should be less than ${t}`),invalidValue:e=>console.warn(`Invalid value: ${e}`),invalidText:e=>console.warn(`Invalid text: ${e}`),invalidEnumeration:e=>console.warn(`Invalid enumeration: ${e}`),canNotSetDecimalPoint:e=>console.warn(`Cannot set DecimalPoint with the value ${e}`),invalidTextFilterFormat:e=>console.warn(`Invalid text filter: ${e}`),duplicatedCharInTextFilter:e=>console.warn(`Duplicated character in text filter: ${e}`),argumentOutOfRange:()=>console.warn("Argument out of range exception"),argumentException:()=>console.warn("Argument Exception"),argumentNullException:()=>console.warn("Argument null exception"),invalidFormatPattern:()=>console.warn("Invalid format pattern"),invalidParameter:()=>console.warn("Invalid parameter"),invalidDate:()=>console.warn("Invalid date"),invalidYearValue:()=>console.warn("Invalid year value"),valueIsOutOfRange:(e,t,n)=>console.warn(`Given value: ${e} is not in the valid range of max: ${t} and min: ${n}`),cannotSetDecimalPointWithValue:e=>console.warn(`Cannot set decimal point with value: ${e}`),cannotSetSeperatorWithDecimalPoint:()=>console.warn("Cannot set Separator with the value of DecimalPoint."),cannotSetSeperatorWithValue:e=>console.warn(`Cannot set Separator with value: ${e}`),valueOutOfRange:()=>console.warn("The value is out of range."),minValueShouldNotBiggerThanMaxValue:()=>console.warn("The MinValue should not bigger than the MaxValue."),notSupportedOperation:()=>console.warn("Operation not supported "),formatDigitValueIsInvalid:()=>console.warn("The Format.Digit's value is invalid."),displayFormatDigitValueIsInvalid:()=>console.warn("NumberDisplayFormat.Digit"),shouldNotEndWithSeperator:()=>console.warn("Should not end with separator."),shouldNotStartWithSeperator:()=>console.warn("Should not start with separator."),integerFormatContainsSharpShouldNotStartWithZero:()=>console.warn("If the intenger format contains '#', it should not start with '0'."),itemNotExist:()=>console.warn("Item not exist"),canNotDoSuchOperationInReadOnlyCollection:()=>console.warn("Can not do such operation in read only collection"),incorrectIndex:()=>console.warn("incorrect index."),keyExists:()=>console.warn("Key Exists"),indexOverrange:()=>console.warn("Index overrange"),notString:e=>t.CustomExceptions.notType(e,"string"),notNumber:e=>t.CustomExceptions.notType(e,"number"),notArray:e=>t.CustomExceptions.notType(e,"array"),notType:(e,t)=>console.warn(`Value: ${e} is not a ${t}`),invalidType:()=>console.warn("Invalid type"),invalidLength:()=>console.warn("Invalid length"),invalidPosition:()=>console.warn("Invalid position"),invalidPromptChar:()=>console.warn("Invalid prompt char"),notAvailableInTextBox:()=>console.warn("Not Available in GcTextBox"),notAvailableInGcNumber:()=>console.warn("Not Available in GcNumber"),methodNotImplemented:()=>new Error("Method not implemented"),formIdRequired:()=>console.warn("Form id is required"),invalidNumberForSize:()=>console.warn("Invalid value, size must be a positive number")}},2505:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.register=void 0;const o=n(7286),i=n(9344);t.register=e=>{const t=e.registry,n=o.GcCommentHeaderFooterItem.CommentCount;t.registerHeaderFooterItem(n,{getElement:()=>{const t=(0,i.buildHeaderElement)(e);return(0,i.getCommentDom)(e).commentCounterElement=t,t}})}},2647:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FindGcComment=t.MarkGcComment=t.CTRL_KEY=t.CTRL_TYPE=void 0,t.CTRL_TYPE="ctrl-type",t.CTRL_KEY="IMJS-CTRL";t.MarkGcComment=e=>{e.getElement().setAttribute(t.CTRL_TYPE,"GcComment"),e.getElement()[t.CTRL_KEY]=e};t.FindGcComment=e=>{for(;e!=document.documentElement;){const n=e[t.CTRL_KEY];if(n)return n;e=e.parentElement}return null}},2672:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Plugin=void 0;const o=n(127),i=n(1828),r=n(9349);t.Plugin=()=>{o.PluginManager.add("reactioncount",(e=>{i.register(e),r.register(e)}))}},2767:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.register=t.GcCommentPasteLinkType=t.GcCommentLinkSearchParams=void 0;const o=n(7286),i=n(8845),r=n(9473);var a,m;!function(e){e.UserName="username",e.UserId="userid",e.PosterName="postername",e.PosterId="posterid",e.CommentId="commentid",e.UpdateTime="updatetime",e.PostTime="posttime",e.ComponentId="componentid"}(a=t.GcCommentLinkSearchParams||(t.GcCommentLinkSearchParams={})),(0,i.expose)("GcCommentLinkSearchParams",a),function(e){e.Link="link",e.Inline="inline",e.Card="card"}(m=t.GcCommentPasteLinkType||(t.GcCommentPasteLinkType={})),(0,i.expose)("GcCommentPasteLinkType",m);t.register=e=>{var t,n,i,a,s,l,c,d,u,C,A,g,p,h;null!==(t=(d=e.options).showLinkTypeContextToolbar)&&void 0!==t||(d.showLinkTypeContextToolbar=!0),null!==(n=(u=e.options).copiedLinkDisplayTextFormatter)&&void 0!==n||(u.copiedLinkDisplayTextFormatter=void 0),null!==(i=(C=e.options).copiedLinkFormatter)&&void 0!==i||(C.copiedLinkFormatter=void 0),null!==(a=(A=e.options).copiedLinkSearchParams)&&void 0!==a||(A.copiedLinkSearchParams=[]),null!==(s=(g=e.options).pastedLinkType)&&void 0!==s||(g.pastedLinkType=m.Link),null!==(l=(p=e.options).openLinkMode)&&void 0!==l||(p.openLinkMode=o.OpenLinkMode.CurrentTab),null!==(c=(h=e.options).loadCommentByLink)&&void 0!==c||(h.loadCommentByLink=async t=>{var n;const o=new URL(t).searchParams.get("commentId"),i=null===(n=e.getComment(o))||void 0===n?void 0:n.comment;return Promise.resolve({comment:i,loadState:i?r.LoadCommentByLinkState.Success:r.LoadCommentByLinkState.NotExist})})}},3074:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getCommentContentText=t.destroyCommentLinkElement=t.destroyAndMarkCommentLinkElement=t.handleNewCommentCreated=t.buildCommentLinkElement=t.handlePasteLinkToGcRichTextEditor=t.handleInsertContentToGcRichTextEditor=t.gotoLinkedComment=t.copyCommentLink=void 0;const o=n(7286),i=n(2767),r=n(5213),a=n(8581),m=n(9473),s=n(5452),l=e=>e&&e(),c="data:image/svg+xml;base64,",d=`${c}${btoa('<?xml version="1.0" encoding="UTF-8"?>\n<svg width="16px" height="16px" viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <title>comment-link</title>\n    <g id="comment-link" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <path d="M13,1 C14.1045695,1 15,1.8954305 15,3 L15,11 C15,12.1045695 14.1045695,13 13,13 L8,13 L6.05078125,15 L3.93603516,13 L3,13 C1.8954305,13 1,12.1045695 1,11 L1,3 C1,1.8954305 1.8954305,1 3,1 L13,1 Z M13,2 L3,2 C2.44771525,2 2,2.44771525 2,3 L2,11 C2,11.5522847 2.44771525,12 3,12 L4.41259766,12 L6.05078125,13.6083984 L7.62512207,12 L13,12 C13.5522847,12 14,11.5522847 14,11 L14,3 C14,2.44771525 13.5522847,2 13,2 Z" fill="#6B6B6B"></path>\n        <rect  fill="#6B6B6B" x="4" y="4" width="8" height="1" rx="0.5"></rect>\n        <rect  fill="#6B6B6B" x="4" y="6" width="8" height="1" rx="0.5"></rect>\n        <rect  fill="#6B6B6B" x="4" y="8" width="5" height="1" rx="0.5"></rect>\n    </g>\n</svg>')}`,u=`${c}${btoa('<?xml version="1.0" encoding="UTF-8"?>\n<svg width="40px" height="40px" viewBox="0 0 40 40" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <title></title>\n    <defs>\n        <circle id="path-1" cx="20" cy="20" r="20"></circle>\n    </defs>\n    <g  stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <circle  fill="#C2DBFF" cx="20" cy="20" r="20"></circle>\n        <g >\n            <mask id="mask-2" fill="white">\n                <use xlink:href="#path-1"></use>\n            </mask>\n            <use fill="#C2DBFF" xlink:href="#path-1"></use>\n            <g mask="url(#mask-2)">\n                <g transform="translate(0.177184, 5.548190)">\n                    <path d="M28.5992948,30.9098996 C29.6805506,30.9261221 30.7550027,30.9794996 31.8289314,31.0213643 C31.8566693,30.8675116 31.8859773,30.7141821 31.9199955,30.5624226 C32.0759559,29.8753181 32.3282141,29.7741102 32.6704896,29.1414299 C29.263435,28.5699767 25.9746591,27.5581069 25.3277897,26.9699079 C24.3391682,26.0713867 24.2941595,18.6116202 24.2941595,18.6116202 L15.0689441,18.6116202 C15.0689441,18.6116202 15.0239354,26.0713867 14.0353139,26.9699079 C13.3690803,27.5758994 9.56741448,28.0191419 6.29224585,29.0375008 C6.98412392,29.729315 7.67652534,30.4216525 8.36892676,31.1134667 C11.0233939,31.1872532 14.3749727,34.2145944 16.9948982,34.2114643 C20.9959631,34.2067448 24.5982299,30.8507657 28.5992948,30.9098996 Z" id="Fill-4" fill="#ECB096"></path>\n                    <path d="M24.7472297,25.2558623 C24.4918314,22.8962631 24.299236,20.1536018 24.299236,20.1536018 L15.0473295,20.1536018 C15.0473295,20.1536018 14.9976106,20.8977469 14.9567887,21.9438411 C17.6724886,25.8456313 24.7472297,25.2558623 24.7472297,25.2558623" id="Fill-12" fill="#DF8E70"></path>\n                    <path d="M37.3681428,40.7343362 C45.1946789,34.0069427 39.0447089,30.8960243 37.3681428,30.2877093 C29.1838674,27.3181768 26.126956,26.8431049 25.9683788,26.9163682 C25.9683788,26.9163682 24.5984916,31.7130163 19.4813677,31.7130163 C14.3642438,31.7130163 13.4402569,27.0616365 13.4402569,26.9163682 C13.4402569,26.7289366 7.93773939,27.8148544 1.98581334,30.7843868 C-3.96611271,33.7539193 5.31513818,51.8975588 5.76522527,57.1133773 C6.21531236,62.3291958 2.0734644,63.9326138 5.22302733,71.2939983 L19.4688071,71.2939983 L19.9393052,71.2939983 L35.4735901,71.2939983 C38.6226297,63.9326138 34.6896012,62.3291958 35.1396883,57.1133773 C35.3443209,54.7433119 32.9968596,44.4917253 37.3681428,40.7343362 Z" id="Fill-14" fill="#1977FF"></path>\n                    <path d="M19.6068164,22.9017055 C14.8233327,22.9017055 10.94578,18.062146 10.94578,12.0917163 C10.94578,6.12128655 14.8233327,2.04261802 19.6068164,2.04261802 C23.3650436,2.21635653 25.590358,3.39327795 26.8422281,5.38132796 C29.6981877,6.225425 28.6499035,9.93725409 28.2673294,12.4789648 C28.2673294,18.4493945 24.3897768,22.9017055 19.6068164,22.9017055 Z" id="Fill-30" fill="#3D1525"></path>\n                    <path d="M26.788113,12.6645301 C26.788113,12.6645301 28.4429681,11.9230015 29.3086007,13.0774207 C30.4107907,14.3956355 29.9434328,18.2456181 26.3537266,17.9536118 C23.6013917,17.7191695 26.788113,12.6645301 26.788113,12.6645301" id="Fill-32" fill="#ECB096"></path>\n                    <path d="M26.3317456,17.9514139 L26.6567503,16.4751598 L26.7907298,17.9686831 C26.6331993,17.9712996 26.4819491,17.9644966 26.3317456,17.9514139" id="Fill-36" fill="#B9694B"></path>\n                    <path d="M12.6176442,12.6645301 C12.6176442,12.6645301 10.9627891,11.9230015 10.0976799,13.0774207 C8.99548986,14.3956355 9.46232438,18.2456181 13.0520306,17.9536118 C15.8043655,17.7191695 12.6176442,12.6645301 12.6176442,12.6645301" id="Fill-40" fill="#ECB096"></path>\n                    <path d="M13.074064,17.9514139 L12.7490592,16.4751598 L12.6150798,17.9686831 C12.7726103,17.9712996 12.9238605,17.9644966 13.074064,17.9514139" id="Fill-44" fill="#B9694B"></path>\n                    <path d="M26.8893302,10.0479339 C26.7987895,3.79230088 19.7041608,4.39305935 19.7041608,4.39305935 C19.7041608,4.39305935 12.6095322,3.79230088 12.5189914,10.0479339 C12.5189914,10.0479339 12.3405267,13.3364062 12.5885979,15.3035238 C12.8366692,17.2701182 13.2051126,19.3141622 13.948803,20.2592579 C14.6930168,21.2043535 17.5353691,23.2012998 19.7041608,23.2012998 C21.8729526,23.2012998 24.7153049,21.2043535 25.4595187,20.2592579 C26.2032091,19.3141622 26.5721758,17.2701182 26.8197237,15.3035238 C27.067795,13.3364062 26.8893302,10.0479339 26.8893302,10.0479339" id="Fill-48" fill="#ECB096"></path>\n                    <path d="M13.3624337,7.94773881 C13.3624337,7.94773881 17.6398311,10.997059 24.5319206,9.61604717 C28.9601499,7.22434242 27.6969225,4.37746332 27.6969225,4.37746332 C27.6969225,4.37746332 27.5438406,1.92550152 23.600345,0.759046272 C19.5270568,-0.445610512 12.7103308,-1.13899463 11.3668731,6.11825136 C9.73347569,7.14916964 10.5174646,10.4679938 10.9309167,12.5031416 C11.4103118,12.3906303 11.9163981,12.3942934 12.442372,12.5900109 C12.442372,12.5900109 12.3675319,9.76048039 13.3624337,7.94773881 Z" id="Fill-50" fill="#3D1525"></path>\n                </g>\n            </g>\n        </g>\n    </g>\n</svg>')}`;t.copyCommentLink=(e,t,n,o)=>{var i;if(!(null==t?void 0:t.id))return void l(o);const r=C(e,t);if((null===(i=null===navigator||void 0===navigator?void 0:navigator.clipboard)||void 0===i?void 0:i.write)&&"function"==typeof ClipboardItem){const i=A(e,t);p(r,i,n,o)}else h(r,n,o)};const C=(e,t)=>{const n=e.options.get("copiedLinkFormatter");let o;return n&&"function"==typeof n&&(o=n(t)),o||window.location.origin+window.location.pathname+"?"+g(e,t)},A=(e,n)=>{const o=e.options.copiedLinkDisplayTextFormatter;if(o)return o(n);const i=(0,t.getCommentContentText)(n);return{linkText:`${n.userInfo.name}:  ${i.length>65?i.slice(0,65)+"...":i} ${n.updateTime?"【"+e.options.updateTimeFormatter(n.updateTime)+"】":""}`}},g=(e,t)=>{var n;const o=new URLSearchParams(window.location.search),r=[i.GcCommentLinkSearchParams.CommentId].concat(null!==(n=e.options.copiedLinkSearchParams)&&void 0!==n?n:[]);return r?r.forEach((n=>{if("string"==typeof n)switch(n){case i.GcCommentLinkSearchParams.CommentId:o.set("commentId",t.id);break;case i.GcCommentLinkSearchParams.PostTime:o.set("postTime",`${t.postTime.valueOf()}`);break;case i.GcCommentLinkSearchParams.UpdateTime:o.set("updateTime",`${t.updateTime.valueOf()}`);break;case i.GcCommentLinkSearchParams.UserId:o.set("userId",e.userInfo.id);break;case i.GcCommentLinkSearchParams.UserName:o.set("userName",e.userInfo.name);break;case i.GcCommentLinkSearchParams.PosterId:o.set("posterId",t.userInfo.id);break;case i.GcCommentLinkSearchParams.PosterName:o.set("posterName",t.userInfo.name);break;case i.GcCommentLinkSearchParams.ComponentId:o.set("componentId",e.getElement().id)}else"object"==typeof n&&("function"==typeof n.value?o.set(n.key,n.value(t)):"string"==typeof n.value&&o.set(n.key,n.value))})):o.set("commentId",t.id),o.toString()},p=(e,t,n,o)=>{var i;let r=`<a href="${e}" target="_blank">${null!==(i=f(t.linkText))&&void 0!==i?i:e}</a>`;t.infoText&&(r=`<div>${r}</div><div>${t.infoText}</div>`);const a=new Blob([r],{type:"text/html"}),m=new Blob([e],{type:"text/plain"}),s=new ClipboardItem({"text/html":a,"text/plain":m});navigator.clipboard.write([s]).then((()=>{l(n)})).catch((()=>{l(o)}))},h=(e,t,n)=>{const o=document.createElement("a");o.innerText=e,o.href=e,document.body.appendChild(o),window.getSelection().removeAllRanges();let i=document.createRange();i.selectNode(o),window.getSelection().addRange(i);try{const e=document.execCommand("copy");l(e?t:n)}catch(e){l(n)}finally{window.getSelection().removeAllRanges(),document.body.removeChild(o)}},f=e=>{if("string"==typeof e){const t=document.createElement("div");return t.innerHTML=e,t.innerText}return null==e?void 0:e.outerHTML};t.gotoLinkedComment=e=>{let t=new URLSearchParams(window.location.search).get("commentId");t&&e.execCommand(o.GcCommentCommand.GotoComment,{commentId:t})};t.handleInsertContentToGcRichTextEditor=(e,n)=>{n.addEventListener(r.GCIM.GcRichTextEditorEvent.AfterExecCommand,((o,i)=>{i.cmd===r.GCIM.GcRichTextEditorCommand.InsertContent&&n.getContentBody().querySelectorAll("a").forEach((n=>{n.classList.contains("gcim__comment-link-inline")||n.classList.contains("gcim__comment-link-url")||n.closest(".gcim__comment-link-card")||v(n.href)&&(0,t.buildCommentLinkElement)(e,n)}))}))};const v=e=>{if(!e)return!1;const t=new URL(e),n=window.location.origin;return(null==t?void 0:t.href.startsWith(n))&&t.searchParams.has("commentId")};t.handlePasteLinkToGcRichTextEditor=(e,t)=>{const n=e=>{const n=document.createElement("div");n.innerHTML=e;const o=n.querySelector("a");return!!v(o.href)&&(t.insertContent(n.innerHTML.replace(/<!--[\s\S]*?-->/g,""),r.GCIM.ContentFormat.Html),!0)};t.addEventListener(r.GCIM.GcRichTextEditorEvent.Paste,((e,t)=>{const o=t.clipboardData.getData("text/html");let i=!1;if(o)i=n(o);else{const e=t.clipboardData.getData("text/plain"),o=e.replace(/(https?:\/\/[^\s]+)/g,(e=>`<a href="${e}" target="_self">${e}</a>`));i=n(o)}i&&t.preventDefault()}))};t.buildCommentLinkElement=async(e,t,n=e.options.pastedLinkType)=>{if(t){if(n!==i.GcCommentPasteLinkType.Card&&n!==i.GcCommentPasteLinkType.Inline)return w(t,e,null,n);{const o=await e.dataManager.commentsManager.loadCommentByLink(t.href);if(o.loadState===m.LoadCommentByLinkState.Success)return w(t,e,o.comment,n);if(o.loadState===m.LoadCommentByLinkState.AccessDenied)return I(t,e,n,"AccessDenied");if(o.loadState===m.LoadCommentByLinkState.NotExist)return I(t,e,n,"NotExist")}}return t};const E=(e,t)=>{t.addEventListener("click",(n=>{n.ctrlKey||n.metaKey||(n.preventDefault(),e.execCommand(o.GcCommentCommand.OpenCommentLink,{url:t.href}))}))};t.handleNewCommentCreated=(e,n)=>{const o=e.getCommentElement(n);if(o){o.querySelectorAll("a").forEach((async n=>{const o=n.href;if(v(o)){if(n.hasAttribute("data-link-type")){const o=n.getAttribute("data-link-type"),r=await(0,t.buildCommentLinkElement)(e,n,o);if(o===i.GcCommentPasteLinkType.Card){const t=r.querySelector("a.gcim__comment-link-error-card-title");if(t)E(e,t);else{const t=r.querySelector("a");t&&E(e,t)}}n.removeAttribute("data-link-type")}E(e,n)}}))}};const w=(e,t,n,o)=>{switch(null!=o?o:t.options.pastedLinkType){case i.GcCommentPasteLinkType.Inline:return b(e);case i.GcCommentPasteLinkType.Card:return G(e,t,n);case i.GcCommentPasteLinkType.Link:return x(e);default:return e}},I=(e,t,n,o)=>{const r=y(o);let m;switch(null!=n?n:t.options.get("pastedLinkType")){case i.GcCommentPasteLinkType.Inline:{const t=b(e);m=(0,a.buildDomElement)({el:t,children:[{tag:"span",classes:["gcim__url-access-denied"],innerText:r.inlineHint}]});break}case i.GcCommentPasteLinkType.Card:{const t=(0,a.buildDomElement)({tag:"div",classes:["gcim__comment-link-card"],attrs:[{name:"contenteditable",value:"false"}]});e.before(t),m=(0,a.buildDomElement)({el:t,children:[{tag:"div",children:[{tag:"a",attrs:[{name:"href",value:e.getAttribute("href")}],classes:["gcim__comment-link-error-card-title"],innerText:r.cardTitle}]},{tag:"div",innerText:r.cardContent},{el:e,styles:{display:"none"},classes:["gcim__comment-link-card-url"]}]});break}case i.GcCommentPasteLinkType.Link:default:m=e}return m},y=e=>{const t=(0,s.SR)();return"AccessDenied"===e?{inlineHint:t.getResource(s.GcCommentResourceNames.AccessDenied),cardTitle:t.getResource(s.GcCommentResourceNames.AccessDenied),cardContent:t.getResource(s.GcCommentResourceNames.YouDontHaveAccessToThisContent)}:"NotExist"===e?{inlineHint:t.getResource(s.GcCommentResourceNames.NotExist),cardTitle:t.getResource(s.GcCommentResourceNames.NotExist),cardContent:t.getResource(s.GcCommentResourceNames.ThisCommentDoesNotExist)}:void 0},x=e=>((0,a.buildDomElement)({el:e,classes:["gcim__comment-link-url"]}),e),G=(e,n,o)=>{var i,r;if(!o)return e;e.contentEditable="false";const m=(0,a.buildDomElement)({tag:"span",classes:["gcim__comment-link-card"],attrs:[{name:"contenteditable",value:"false"}]});e.before(m);const s=(0,a.buildDomElement)({children:[{tag:"a",attrs:[{name:"href",value:e.getAttribute("href")},{name:"data-richtexteditor-href",value:e.getAttribute("data-richtexteditor-href"),ignoreNullValue:!0},{name:"draggable",value:"false"}],classes:["gcim__comment-link-card-url"],children:[{tag:"span",classes:["gcim__text-gray"],children:[{tag:"span",styles:{verticalAlign:"middle",marginRight:"4px"},children:[{tag:"img",attrs:[{name:"src",value:o.userInfo.avatar}],classes:["gcim__user-avatar",`gcim__avatar-${n.options.avatarType}`],events:{error:e=>{const t=e.target;t.src=u,t.onerror=null}}}]},{tag:"span",innerText:o.userInfo.name},{tag:"span",classes:["gcim__text-smaller"],styles:{marginLeft:"8px"},innerText:o.updateTime?`${null===(r=(i=n.options).updateTimeFormatter)||void 0===r?void 0:r.call(i,o.updateTime)}`:""}]},{tag:"span",classes:["gcim__comment-link-card-content-preview"],children:[{tag:"span",innerText:(0,t.getCommentContentText)(o)}]}]},{el:e}]});return e.style.display="none",m.appendChild(s),m},b=e=>{const t=e.innerHTML;return e.innerHTML="",e.contentEditable="false",(0,a.buildDomElement)({el:e,children:[{tag:"span",styles:{verticalAlign:"middle",marginRight:"2px"},children:[{tag:"img",classes:["gcim__comment-icon"],attrs:[{name:"src",value:d}]}]},{tag:"span",innerHTML:t}],classes:["gcim__comment-link-inline"],attrs:[{name:"tabindex",value:"0"}]}),e};t.destroyAndMarkCommentLinkElement=(e,t)=>{let n,o;if(e.classList.contains("gcim__comment-link-inline"))n=e,n&&(n.classList.remove("gcim__comment-link-inline"),n.innerHTML=n.childNodes[1].textContent),o=i.GcCommentPasteLinkType.Inline;else if(e.classList.contains("gcim__comment-link-url"))n=e,null==n||n.classList.remove("gcim__comment-link-url"),o=i.GcCommentPasteLinkType.Link;else if(e.classList.contains("gcim__comment-link-card")){n=e.lastElementChild,n&&(n.style.display=""),o=i.GcCommentPasteLinkType.Card;const t=e.querySelector(".gcim__comment-link-card-url,.gcim__comment-link-error-card-title");t&&(0,a.buildDomElement)({el:n,attrs:[{name:"href",value:t.getAttribute("href")},{name:"data-richtexteditor-href",value:t.getAttribute("data-richtexteditor-href"),ignoreNullValue:!0}]})}return n&&(n.contentEditable="true",n.style.display=""),e!==n&&(e.before(n),e.remove()),t&&n.setAttribute("data-link-type",o),n};t.destroyCommentLinkElement=e=>(0,t.destroyAndMarkCommentLinkElement)(e,!1);t.getCommentContentText=e=>{const t=(0,a.buildDomElement)({tag:"div",innerHTML:e.content});return t.querySelectorAll("a[data-link-type]").forEach((e=>{e.innerText=e.href})),t.innerText.replace(/\n/g," ").replace(/\r/g," ")}},3346:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.formatString=void 0;t.formatString=(e,...t)=>{if(!e)return e;let n=-1;return e.replace(/{}/g,(e=>(n++,void 0!==t[n]?t[n]:e)))}},3672:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});(0,n(1550).Plugin)()},3777:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const o=n(5213);t.default=e=>{if(!o.GCIM.GcRichTextEditorDEVTool)return;let t=o.GCIM.GcRichTextEditorDEVTool.PluginManager,n="gccomment-content-styles";t.get(n)||t.add(n,((e,t)=>(e.contentStyles.push(".gcim__gccomment-comment-mention{padding:0 8px 0 8px;border-radius:38px;background-color:#ddeaff;color:#333;text-align:left;line-height:normal;display:inline-block;user-select:none;cursor:pointer}.gcim__gccomment-comment-mention:hover{background-color:#cbdfff}.gcim__comment-link-url{text-wrap:auto}.gcim__comment-link-card-url,.gcim__comment-link-url{text-decoration:none;color:#05c}.gcim__comment-link-card-url:hover,.gcim__comment-link-url:hover{text-decoration:underline}.gcim__comment-link-inline{max-width:100px;overflow:hidden;text-overflow:ellipsis;border:1px solid #dcdfe4;border-radius:5px;padding:1px 4px;margin:2px;text-decoration:none;color:#05c;text-wrap:auto;-webkit-box-decoration-break:clone;box-decoration-break:clone;background-color:#fff;line-height:24px}.gcim__comment-link-inline .gcim__comment-icon{display:inline-block;border:none;width:14px;height:14px}.gcim__comment-link-inline .gcim__url-access-denied{color:#000;background-color:#f1f2f4;padding:2px 6px;margin-left:10px;font-weight:700}.gcim__comment-link-inline:has(.gcim__url-access-denied){padding-right:0}.gcim__comment-link-inline:hover{border-color:#1d7afc}.gcim__comment-link-inline:focus{outline:2px solid #0c66e4}.gcim__comment-link-card{overflow:hidden;text-overflow:ellipsis;border:1px solid #dcdfe4;border-radius:5px;margin:2px;display:flex;flex-direction:column;width:fit-content;padding:16px;gap:8px;max-width:600px;text-wrap:auto}.gcim__comment-link-card .gcim__comment-icon{width:24px;height:24px;display:inline-block;border:none}.gcim__comment-link-card .gcim__text-gray{color:gray}.gcim__comment-link-card .gcim__text-smaller{font-size:.8em}.gcim__comment-link-card .gcim__comment-link-card-content-preview{display:-webkit-box;-webkit-box-orient:vertical;overflow:hidden;-webkit-line-clamp:2;line-clamp:2}.gcim__comment-link-card .gcim__comment-link-error-card-title{text-decoration:none;color:#05c}.gcim__comment-link-card .gcim__comment-link-error-card-title:hover{border-color:#1d7afc}.gcim__comment-link-card .gcim__comment-link-card-url{text-decoration:none;cursor:pointer;color:#000}.gcim__richtexteditor-content-body{font-family:Meiryo}.gcim__richtexteditor-content-body .gcim__comment-link-card *{pointer-events:none}.gcim__richtexteditor-content-body .gcim__comment-link-card .gcim__user-avatar{width:20px;height:20px}.gcim__richtexteditor-content-body p{margin:0}.gcim__richtexteditor-content-body .gcim__avatar-circle{border-radius:100%;object-fit:cover}.gcim__richtexteditor-content-body .gcim__avatar-square{object-fit:cover}.gcim__richtexteditor-content-body .gcim__avatar-roundedcorner{border-radius:20%;object-fit:cover}"),{getMetadata:()=>({name:n,url:""})})))}},3892:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GcCommentEditorType=void 0;const o=n(8845);var i;!function(e){e.Common="common",e.GcRichTextEditor="gcrichtexteditor",e.GcMultilineTextBox="gcmultilinetextbox",e.Custom="custom"}(i=t.GcCommentEditorType||(t.GcCommentEditorType={})),(0,o.expose)("GcCommentEditorType",i)},3979:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.shouldAppendItem=t.name=t.getElement=void 0;const o=n(7286),i=n(9129),r=n(5452);t.name="delete";t.getElement=(e,t)=>{let n=i.CommentUIHelper.buildCommentActionButton(e,(0,r.SR)().getResource(r.GcCommentResourceNames.Delete),"delete");return n.element.addEventListener("click",(()=>{e.execCommand(o.GcCommentCommand.DoDeleteCommentAction,{commentId:t.id})})),n.element};t.shouldAppendItem=(e,t)=>i.CommentUIHelper.isCommentPostedByCurrentUser(e,t)},4053:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GlobalContext=void 0;class n{}t.GlobalContext=n,n.CurrentActiveControlId="",n.IsTouchMouseDown=!1,n.IsOnFocus=!1,n.FuncKeysPressed={Shift:!1,Ctrl:!1,Alt:!1},n.LoadComplete=!0,n.DragStartElementID="",n.SavedClipBoardText=null,n.CutCopyPasteEventObject=null,n.IgnoreWatermarkCheckerOnCompositionStart=!1},4055:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.name=t.onAction=t.img=t.text=t.shouldAppendItem=void 0;const o=n(9129),i=n(7286),r=n(9529);t.shouldAppendItem=(e,t)=>!0;t.text=()=>"";t.img=()=>(0,r.h)("div",{class:`${o.GcCommentClassNames.R}`});t.onAction=(e,t)=>{};const a=i.GcCommentContextToolbar.SeparateLine;t.name=a},4099:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.tipText=t.name=t.onAction=t.img=t.text=t.shouldAppendItem=void 0;const o=n(5452),i=n(9129),r=n(7286),a=n(9529);t.shouldAppendItem=(e,t)=>i.CommentUIHelper.isCommentPostedByCurrentUser(e,t);t.text=()=>(0,o.SR)().getResource(o.GcCommentResourceNames.Delete);t.img=()=>(0,a.h)("div",{class:`${i.GcCommentClassNames.DeleteCommentImage} ${i.GcCommentClassNames.CommonImg}`});t.onAction=(e,t)=>{e.execCommand(r.GcCommentCommand.DoDeleteCommentAction,{commentId:t.id})};const m=r.GcCommentContextToolbar.Delete;t.name=m;t.tipText=()=>(0,o.SR)().getResource(o.GcCommentResourceNames.Delete)},4101:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ControlMarginType=t.SpinType=t.KeyboardKeys=t.UIChangeSource=t.FloatingLabelState=t.FloatingLabelDirection=t.FloatingLabelType=t.KeyActions=t.MouseButton=t.Key=t.ExitKeys=t.CustomEventType=t.WatermarkStatus=t.FocusType=t.SpinButtonAlignment=t.HighlightText=t.ClipContent=t.DropDownButtonAlignment=t.ExitKey=t.TabCharMode=t.CrLfMode=t.EditMode=t.ExitOnLeftRightKey=t.TabAction=t.MaxMinBehavior=t.ShowLiterals=void 0;const o=n(8845);var i,r,a,m,s,l,c,d,u,C,A,g,p,h,f,v,E;!function(e){e.Always="always",e.PostDisplay="postdisplay",e.PreDisplay="predisplay"}(i=t.ShowLiterals||(t.ShowLiterals={})),(0,o.expose)("ShowLiterals",i),function(e){e.AdjustToMaxMin="adjusttomaxmin",e.Clear="clear",e.Restore="restore",e.CancelInput="cancelinput",e.Keep="keep"}(r=t.MaxMinBehavior||(t.MaxMinBehavior={})),(0,o.expose)("MaxMinBehavior",r),function(e){e.Control="control",e.Field="field"}(a=t.TabAction||(t.TabAction={})),(0,o.expose)("TabAction",a),function(e){e.None="none",e.Left="left",e.Right="right",e.Both="both"}(m=t.ExitOnLeftRightKey||(t.ExitOnLeftRightKey={})),(0,o.expose)("ExitOnLeftRightKey",m),function(e){e.Insert="insert",e.Overwrite="overwrite",e.FixedInsert="fixedinsert",e.FixedOverwrite="fixedoverwrite"}(s=t.EditMode||(t.EditMode={})),(0,o.expose)("EditMode",s),function(e){e.NoControl="nocontrol",e.Filter="filter",e.Cut="cut"}(l=t.CrLfMode||(t.CrLfMode={})),(0,o.expose)("CrLfMode",l),function(e){e.NoControl="nocontrol",e.Filter="filter",e.Cut="cut"}(c=t.TabCharMode||(t.TabCharMode={})),(0,o.expose)("TabCharMode",c),function(e){e.Enter="enter",e.ShiftEnter="shiftenter",e.Both="both",e.None="none"}(d=t.ExitKey||(t.ExitKey={})),(0,o.expose)("ExitKey",d),function(e){e.LeftSide="leftside",e.RightSide="rightside"}(u=t.DropDownButtonAlignment||(t.DropDownButtonAlignment={})),(0,o.expose)("DropDownButtonAlignment",u),function(e){e.IncludeLiterals="includeliterals",e.ExcludeLiterals="excludeliterals"}(C=t.ClipContent||(t.ClipContent={})),(0,o.expose)("ClipContent",C),function(e){e.None="none",e.Field="field",e.All="all"}(A=t.HighlightText||(t.HighlightText={})),(0,o.expose)("HighlightText",A),function(e){e.LeftSide="leftside",e.RightSide="rightside"}(g=t.SpinButtonAlignment||(t.SpinButtonAlignment={})),(0,o.expose)("SpinButtonAlignment",g),function(e){e[e.None=0]="None",e[e.Click=1]="Click",e[e.ClientEvent=3]="ClientEvent",e[e.KeyExit=4]="KeyExit",e[e.Default=5]="Default",e[e.ImeInput=8]="ImeInput",e[e.Left=9]="Left",e[e.Right=10]="Right",e[e.DragDrop=11]="DragDrop",e[e.ClearButton=12]="ClearButton"}(p=t.FocusType||(t.FocusType={})),(0,o.expose)("FocusType",p),function(e){e.emptyEraWatermark="emptyEraWatermark",e.nullWatermark="nullWatermark",e.zeroWatermark="zeroWatermark",e.none=""}(t.WatermarkStatus||(t.WatermarkStatus={})),function(e){e._onLeave="_onLeave",e._onEnter="_onEnter",e.EditStatusChanged="EditStatusChanged",e.InvalidInput="InvalidInput",e.InvalidRange="InvalidRange",e.InvalidValue="InvalidValue",e.KeyExit="KeyExit",e.NumberChanged="NumberChanged",e.SpinDown="SpinDown",e.SpinUp="SpinUp",e.TextChanged="TextChanged",e.TextChanging="TextChanging",e.ValueChanged="ValueChanged",e.Input="Input",e.ReadingStringOutput="ReadingStringOutput",e.MouseDown="mousedown",e.MouseUp="mouseup",e.Click="click",e.KeyDown="keydown",e.KeyPress="keypress",e.KeyUp="keyup",e.FocusIn="focusin",e.FocusOut="focusout",e.EnabledChanged="enabledchanged",e.ReadonlyChanged="readonlychanged",e.BeforeFocusOut="beforefocusout",e.RefreshValidator="refreshvalidator",e.Destroy="destroy"}(t.CustomEventType||(t.CustomEventType={})),function(e){e[e.Tab=1]="Tab",e[e.ShiftTab=2]="ShiftTab",e[e.NextControl=3]="NextControl",e[e.PreviousControl=4]="PreviousControl",e[e.Right=5]="Right",e[e.Left=6]="Left",e[e.CtrlRight=7]="CtrlRight",e[e.CtrlLeft=8]="CtrlLeft",e[e.CharInput=9]="CharInput"}(t.ExitKeys||(t.ExitKeys={})),function(e){e[e.BackSpace=8]="BackSpace",e[e.Tab=9]="Tab",e[e.Clear=12]="Clear",e[e.Return=13]="Return",e[e.Shift=16]="Shift",e[e.Control=17]="Control",e[e.Alt=18]="Alt",e[e.Pause=19]="Pause",e[e.CapsLock=20]="CapsLock",e[e.Escape=27]="Escape",e[e.Space=32]="Space",e[e.PageUp=33]="PageUp",e[e.PageDown=34]="PageDown",e[e.End=35]="End",e[e.Home=36]="Home",e[e.Left=37]="Left",e[e.Up=38]="Up",e[e.Right=39]="Right",e[e.Down=40]="Down",e[e.Select=41]="Select",e[e.Print=42]="Print",e[e.Execute=43]="Execute",e[e.Insert=45]="Insert",e[e.Delete=46]="Delete",e[e.Help=47]="Help",e[e.D0=48]="D0",e[e.D1=49]="D1",e[e.D2=50]="D2",e[e.D3=51]="D3",e[e.D4=52]="D4",e[e.D5=53]="D5",e[e.D6=54]="D6",e[e.D7=55]="D7",e[e.D8=56]="D8",e[e.D9=57]="D9",e[e.A=65]="A",e[e.B=66]="B",e[e.C=67]="C",e[e.D=68]="D",e[e.E=69]="E",e[e.F=70]="F",e[e.G=71]="G",e[e.H=72]="H",e[e.I=73]="I",e[e.J=74]="J",e[e.K=75]="K",e[e.L=76]="L",e[e.M=77]="M",e[e.N=78]="N",e[e.O=79]="O",e[e.P=80]="P",e[e.Q=81]="Q",e[e.R=82]="R",e[e.S=83]="S",e[e.T=84]="T",e[e.U=85]="U",e[e.V=86]="V",e[e.W=87]="W",e[e.X=88]="X",e[e.Y=89]="Y",e[e.Z=90]="Z",e[e.NumPad0=96]="NumPad0",e[e.NumPad1=97]="NumPad1",e[e.NumPad2=98]="NumPad2",e[e.NumPad3=99]="NumPad3",e[e.NumPad4=100]="NumPad4",e[e.NumPad5=101]="NumPad5",e[e.NumPad6=102]="NumPad6",e[e.NumPad7=103]="NumPad7",e[e.NumPad8=104]="NumPad8",e[e.NumPad9=105]="NumPad9",e[e.Multiply=106]="Multiply",e[e.Add=107]="Add",e[e.Separator=108]="Separator",e[e.Subtract=109]="Subtract",e[e.Decimal=110]="Decimal",e[e.Divide=111]="Divide",e[e.NumLock=136]="NumLock",e[e.ScrollLock=137]="ScrollLock",e[e.F1=112]="F1",e[e.F2=113]="F2",e[e.F3=114]="F3",e[e.F4=115]="F4",e[e.F5=116]="F5",e[e.F6=117]="F6",e[e.F7=118]="F7",e[e.F8=119]="F8",e[e.F9=120]="F9",e[e.F10=121]="F10",e[e.F11=122]="F11",e[e.F12=123]="F12",e[e.F13=124]="F13",e[e.F14=125]="F14",e[e.F15=126]="F15",e[e.F16=127]="F16",e[e.F17=128]="F17",e[e.F18=129]="F18",e[e.F19=130]="F19",e[e.F20=131]="F20",e[e.F21=132]="F21",e[e.F22=133]="F22",e[e.F23=134]="F23",e[e.F24=135]="F24"}(h=t.Key||(t.Key={})),(0,o.expose)("Key",h),function(e){e[e.Default=-1]="Default",e[e.Left=0]="Left",e[e.Middle=1]="Middle",e[e.Right=2]="Right"}(t.MouseButton||(t.MouseButton={})),function(e){e.None="none",e.Clear="clear",e.NextControl="nextcontrol",e.PreviousControl="previouscontrol",e.NextField="nextfield",e.NextFieldControl="nextfieldcontrol",e.PreviousField="previousfield",e.PreviousFieldControl="previousfieldcontrol",e.SpinDown="spindown",e.SpinUp="spinup",e.ThreeZero="threezero",e.Now="now",e.CalculatorZero="calculatorzero",e.CalculatorOne="calculatorone",e.CalculatorTwo="calculatortwo",e.CalculatorThree="calculatorthree",e.CalculatorFour="calculatorfour",e.CalculatorFive="calculatorfive",e.CalculatorSix="calculatorsix",e.CalculatorSeven="calculatorseven",e.CalculatorEight="calculatoreight",e.CalculatorNine="calculatornine",e.CalculatorPositiveNegative="calculatorpositivenegative",e.CalculatorPoint="calculatorpoint",e.CalculatorAdd="calculatoradd",e.CalculatorSubtract="calculatorsubtract",e.CalculatorMultiply="calculatormultiply",e.CalculatorDivide="calculatordivide",e.CalculatorSqrt="calculatorsqrt",e.CalculatorPercent="calculatorpercent",e.CalculatorReciprocal="calculatorreciprocal",e.CalculatorEqual="calculatorequal",e.CalculatorMc="calculatormc",e.CalculatorMr="calculatormr",e.CalculatorMs="calculatorms",e.CalculatorMplus="calculatormplus",e.CalculatorBs="calculatorbs",e.CalculatorCe="calculatorce",e.CalculatorC="calculatorc"}(t.KeyActions||(t.KeyActions={})),function(e){e.None="none",e.Auto="auto",e.Always="always"}(f=t.FloatingLabelType||(t.FloatingLabelType={})),(0,o.expose)("FloatingLabelType",f),function(e){e.Inside="inside",e.ThroughBorder="throughborder",e.Outside="outside"}(v=t.FloatingLabelDirection||(t.FloatingLabelDirection={})),(0,o.expose)("FloatingLabelDirection",v),function(e){e.Floating="floating",e.Display="display",e.Hide="hide"}(t.FloatingLabelState||(t.FloatingLabelState={})),function(e){e[e.None=0]="None",e[e.ControlSizeChange=1]="ControlSizeChange",e[e.TipNotifierChange=2]="TipNotifierChange",e[e.IconNotifierChange=4]="IconNotifierChange",e[e.SideButtonChange=8]="SideButtonChange",e[e.ScaleTextChange=16]="ScaleTextChange",e[e.EllipsisChange=32]="EllipsisChange",e[e.FloatingLabelChange=64]="FloatingLabelChange",e[e.WatermarkChange=128]="WatermarkChange"}(t.UIChangeSource||(t.UIChangeSource={})),function(e){e.Backspace="Backspace",e.Tab="Tab",e.Enter="Enter",e.Shift="Shift",e.Control="Control",e.Alt="Alt",e.Pause="Pause",e.CapsLock="CapsLock",e.Escape="Escape",e.Space=" ",e.PageUp="PageUp",e.PageDown="PageDown",e.End="End",e.Home="Home",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.PrintScreen="PrintScreen",e.Insert="Insert",e.Delete="Delete",e.Digit0="0",e.Digit1="1",e.Digit2="2",e.Digit3="3",e.Digit4="4",e.Digit5="5",e.Digit6="6",e.Digit7="7",e.Digit8="8",e.Digit9="9",e.A="A",e.B="B",e.C="C",e.D="D",e.E="E",e.F="F",e.G="G",e.H="H",e.I="I",e.J="J",e.K="K",e.L="L",e.M="M",e.N="N",e.O="O",e.P="P",e.Q="Q",e.R="R",e.S="S",e.T="T",e.U="U",e.V="V",e.W="W",e.X="X",e.Y="Y",e.Z="Z",e.a="a",e.b="b",e.c="c",e.d="d",e.e="e",e.f="f",e.g="g",e.h="h",e.i="i",e.j="j",e.k="k",e.l="l",e.m="m",e.n="n",e.o="o",e.p="p",e.q="q",e.r="r",e.s="s",e.t="t",e.u="u",e.v="v",e.w="w",e.x="x",e.y="y",e.z="z",e.Meta="Meta",e.ContextMenu="ContextMenu",e.AudioVolumeMute="AudioVolumeMute",e.AudioVolumeDown="AudioVolumeDown",e.AudioVolumeUp="AudioVolumeUp",e.F1="F1",e.F2="F2",e.F3="F3",e.F4="F4",e.F5="F5",e.F6="F6",e.F7="F7",e.F8="F8",e.F9="F9",e.F10="F10",e.F11="F11",e.F12="F12",e.NumLock="NumLock",e.ScrollLock="ScrollLock",e.Semicolon=";",e.Equal="=",e.Comma=",",e.Minus="-",e.Period=".",e.Slash="/",e.Backquote="`",e.BracketLeft="[",e.Backslash="\\",e.BracketRight="]",e.Quote="'",e.Tilde="~",e.Exclamation="!",e.At="@",e.Sharp="#",e.Dollar="$",e.Percent="%",e.Caret="^",e.Ampersand="&",e.Asterisk="*",e.ParenthesisLeft="(",e.ParenthesisRight=")",e.Underscore="_",e.Plus="+",e.OpenBrace="{",e.CloseBrace="}",e.Pipe="|",e.Colon=":",e.Quote2='"',e.AngleBracketLeft="<",e.AngleBracketRight=">",e.QuestionMark="?"}(t.KeyboardKeys||(t.KeyboardKeys={})),function(e){e[e.None=0]="None",e[e.MouseWheel=1]="MouseWheel",e[e.SpinButton=2]="SpinButton",e[e.UpDownKeys=4]="UpDownKeys",e[e.All=7]="All"}(E=t.SpinType||(t.SpinType={})),(0,o.expose)("SpinType",E),function(e){e[e.FloatingLabel=1]="FloatingLabel",e[e.TipNotifier=2]="TipNotifier",e[e.IconNotifier=4]="IconNotifier",e[e.Slider=8]="Slider",e[e.All=15]="All"}(t.ControlMarginType||(t.ControlMarginType={}))},4219:(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.EventNotify=exports.FireEvent=exports.ScrollToToCaretPosition=exports.SetSelection=exports.calcOuterWidth=exports.PointerEvents=exports.Utility=void 0;const interface_1=__webpack_require__(4101),CustomExceptions_1=__webpack_require__(2366),export_1=__webpack_require__(8845),context_1=__webpack_require__(4053),textMeasure_1=__webpack_require__(8582),browser_1=__webpack_require__(1139),Utils_1=__webpack_require__(4794);class Utility{static Init(){if(browser_1.Browser.IsIE||(context_1.GlobalContext.HasGetFocus=!1,context_1.GlobalContext.ShouldInvokeKeyPress=!0),context_1.GlobalContext.SpecialImeSupport=!!browser_1.Browser.IPad,null==e)var e="";browser_1.Browser.IsIE10OrLater?document.addEventListener(PointerEvents.GetPointerDownName(),(e=>{Utility.onMSPointerDown(e)}),!0):(browser_1.Browser.firefox||browser_1.Browser.safari||browser_1.Browser.chrome)&&(document.addEventListener("touchstart",(e=>{Utility.onTouchStart(e)}),!0),document.addEventListener("mousedown",(e=>{Utility.onMouseDown(e)}),!0)),window.addEventListener("load",(()=>context_1.GlobalContext.OnLoadFinished=!0))}static AttachEvent(e,t,n,o){if(!e)return;e.addEventListener(t,n,o),Utility._eventCallbacks.has(e)||Utility._eventCallbacks.set(e,new Map);const i=Utility._eventCallbacks.get(e);i.has(t)||i.set(t,[]),i.get(t).push({handler:n,useCapture:o})}static DetachEvent(e,t,n,o){if(!e)return;e.removeEventListener(t,n,o);const i=Utility._eventCallbacks.get(e);if(i){const r=i.get(t);if(r){const e=r.filter((e=>e.handler!==n||e.useCapture!==o));e.length>0?i.set(t,e):i.delete(t)}0===i.size&&Utility._eventCallbacks.delete(e)}}static DetachAllEvent(e){if(!e)return;const t=Utility._eventCallbacks.get(e);t&&(t.forEach(((t,n)=>{t.forEach((t=>{e.removeEventListener(n,t.handler,t.useCapture)}))})),Utility._eventCallbacks.delete(e))}static _convertCrlF(e){for(var t=e.split("\r\n"),n=[],o=0;o<t.length;o++)n=n.concat(t[o].split("\n"));return n.join("\r\n")}static PreventDefault(e){e&&e.preventDefault()}static CancelBubble(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}static DragDrop(e){try{e.dragDrop(!0)}catch(e){}}static GetMouseButton(e){var t=interface_1.MouseButton.Default;return 0==e.button?t=interface_1.MouseButton.Left:1==e.button?t=interface_1.MouseButton.Middle:2==e.button&&(t=interface_1.MouseButton.Right),t}static SetCopy(e,t){var n;try{if((null==e||""==e)&&(document.selection&&(n=document.selection.createRange().text),""==n))return}catch(e){}null!=e&&(n=e),Utility.SetClipBoardtData(n,t)}static SetClipBoardtData(e,t){if(context_1.GlobalContext.SavedClipBoardText=e,t)if(window.clipboardData)setTimeout((()=>{try{window.clipboardData.setData("Text",e)}catch(e){}}),0);else if(null!==context_1.GlobalContext.CutCopyPasteEventObject)context_1.GlobalContext.CutCopyPasteEventObject.isTrusted?void 0!==context_1.GlobalContext.CutCopyPasteEventObject.clipboardData&&context_1.GlobalContext.CutCopyPasteEventObject.clipboardData.setData("text",e):window.navigator.clipboard.writeText(e);else if(window.netscape)try{window.netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect");var n=window.Components.classes["@mozilla.org/widget/clipboard;1"].createInstance(window.Components.interfaces.nsIClipboard);if(!n)return;var o=window.Components.classes["@mozilla.org/widget/transferable;1"].createInstance(window.Components.interfaces.nsITransferable);if(!o)return;o.addDataFlavor("text/unicode");var i={};(i=window.Components.classes["@mozilla.org/supports-string;1"].createInstance(window.Components.interfaces.nsISupportsString)).data=e,o.setTransferData("text/unicode",i,2*e.length);var r=window.Components.interfaces.nsIClipboard;if(!n)return!1;n.setData(o,null,r.kGlobalClipboard)}catch(t){context_1.GlobalContext.SavedClipBoardText=e}else context_1.GlobalContext.SavedClipBoardText=e;else context_1.GlobalContext.SavedClipBoardText=e}static GetClipBoardData(e){if(context_1.GlobalContext.IsContextMenuOpened||!e){if(context_1.GlobalContext.SavedClipBoardText)return context_1.GlobalContext.SavedClipBoardText}else{if(window.clipboardData)return window.clipboardData.getData("Text");if(null!==context_1.GlobalContext.CutCopyPasteEventObject){if(void 0!==context_1.GlobalContext.CutCopyPasteEventObject.clipboardData)return context_1.GlobalContext.CutCopyPasteEventObject.clipboardData.getData("Text")}else if(window.netscape)try{window.netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect");var t=window.Components.classes["@mozilla.org/widget/clipboard;1"].createInstance(window.Components.interfaces.nsIClipboard);if(!t)return;var n=window.Components.classes["@mozilla.org/widget/transferable;1"].createInstance(window.Components.interfaces.nsITransferable);if(!n)return;n.addDataFlavor("text/unicode"),t.getData(n,t.kGlobalClipboard);var o={},i={};try{n.getTransferData("text/unicode",o,i)}catch(e){return null}if(o&&(o=window.Components.interfaces.nsISupportsWString?o.value.QueryInterface(window.Components.interfaces.nsISupportsWString):window.Components.interfaces.nsISupportsString?o.value.QueryInterface(window.Components.interfaces.nsISupportsString):null),o)return o.data.substring(0,i.value/2)}catch(e){window.status="about:config signed.applets.codebase_principal_support true"}}return null}static FilterText(e,t){if(0==t.GetLength())return"";var n="",o=0,i=0;for(o=0;o<t.GetLength();o++){var r=!1;for(i=0;i<e.GetLength();i++)t.Substring(o,o+1)==e.Substring(i,i+1)&&(r=!0);1==r&&(n+=t.Substring(o,o+1))}return n}static IndexOfAny(e,t,n){if(n>=e.length)return-1;for(var o=n;o<e.length;o++)for(var i=0;i<t.length;i++)if(e.charAt(o)==t[i])return o;return-1}static GetPageZoomRate(){var e="gc_im_standard_control_for_get_normal_position",t=document.getElementById(e);if(!t){var n=document.createElement("div");document.body.appendChild(n),n.id=e,n.style.visibility="hidden",n.style.left="100px",n.style.top="1px",n.style.width="1px",n.style.height="1px",n.style.position="absolute",t=n}return t.offsetLeft/100}static GetElementPositionForChrome(e){"string"==typeof e&&(e=document.getElementById(e));var t=e,n=0,o=0;do{if(o+=e.offsetLeft-e.scrollLeft,n+=e.offsetTop-e.scrollTop,e=e.offsetParent,t=t.parentNode,null==e)break;for(;t!=e;)o-=t.scrollLeft,n-=t.scrollTop,t=t.parentNode}while(e.offsetParent);return{Left:o,Top:n}}static GetMousePosition(e,t,n){var o=(0,Utils_1.GetHtmlLayOut)();null==n&&void 0!==window.event&&(n=window.event);var i=o.scrollLeft,r=o.scrollTop,a=o.clientWidth,m=o.clientHeight;n&&(i+=n.clientX,r+=n.clientY,a-=n.clientX,m-=n.clientY),n&&n.touches&&n.touches.length>0&&(i=o.scrollLeft+n.touches[0].clientX,r=o.scrollTop+n.touches[0].clientY,a=o.clientWidth-n.touches[0].clientX,m=o.clientHeight-n.touches[0].clientY);var s=document.body.parentNode;return s.offsetLeft&&(i-=s.offsetLeft),s.offsetTop&&(r-=s.offsetTop),(null==browser_1.Browser.engine||browser_1.Browser.engine<8)&&(i/=Utility.GetPageZoomRate(),r/=Utility.GetPageZoomRate()),null!=e&&a<e&&i>e&&(i-=e),null!=t&&m<t&&r>t&&(r-=t),{left:i,top:r}}static GetElementPosition(e){if(browser_1.Browser.chrome)return Utility.GetElementPositionForChrome(e);if(browser_1.Browser.IsIE||browser_1.Browser.chrome||browser_1.Browser.safari){if(browser_1.Browser.IsIE9OrLater)return Utility.GetElementPositionForFireFox(e);var t=Utility.GetElementPositionForIE(e);return{Left:t.Left,Top:t.Top}}return Utility.GetElementPositionForFireFox(e)}static GetElementPositionForIE(e){var t=e;"string"==typeof e&&(t=document.getElementById(e));var n=0,o=0;if(null==t)return{Left:o,Top:n};if(t.offsetParent)for(;null!=t.offsetParent;){var i=t.offsetParent,r=i.tagName.toLowerCase();"table"!=r&&"body"!=r&&"html"!=r&&i.clientTop&&i.clientLeft&&(o+=i.clientLeft,n+=i.clientTop),"input"==t.tagName.toLowerCase()&&"text"==t.type.toLowerCase()||"textarea"==t.tagName.toLowerCase()?(n+=t.offsetTop,o+=t.offsetLeft):(n+=t.offsetTop-t.scrollTop,o+=t.offsetLeft-t.scrollLeft),t=i}else t.left&&t.top?(o+=t.left,n+=t.top):(t.x&&(o+=t.x),t.y&&(n+=t.y));if("relative"!=t.style.position.toLowerCase()&&"absolute"!=t.style.position.toLowerCase()&&"body"==t.tagName.toLowerCase()&&Utility.IsStandCompliantModeOn())if(7!=browser_1.Browser.engine)n+=t.offsetTop,o+=t.offsetLeft;else{var a=t.currentStyle||window.getComputedStyle(t,null),m=parseInt(a.marginTop,10),s=parseInt(a.marginLeft,10);isNaN(m)&&(m=0),isNaN(s)&&(s=0),n+=m,o+=s}return{Left:o,Top:n}}static GetElementPositionForFireFox(e){var t=e;"string"==typeof e&&(t=document.getElementById(e));var n=0,o=0,i=0,r=0;if(null==t)return{Left:o,Top:n};if(t.offsetParent)for(;null!=t.offsetParent;){var a=t.offsetParent.tagName.toLowerCase();"table"!=a&&"body"!=a&&"html"!=a&&"div"!=a&&t.offsetParent.clientTop&&t.offsetParent.clientLeft&&(o+=t.offsetParent.clientLeft,n+=t.offsetParent.clientTop),n+=t.offsetTop,o+=t.offsetLeft,t=t.offsetParent}else t.left&&t.top?(o+=t.left,n+=t.top):(t.x&&(o+=t.x),t.y&&(n+=t.y));if(t=e,"string"==typeof e&&(t=document.getElementById(e)),t.parentElement)for(;null!=t.parentElement&&"html"!=t.tagName.toLowerCase();)r+=t.scrollTop,i+=t.scrollLeft,t=t.parentElement;return n-=r,o-=i,"relative"!=t.style.position.toLowerCase()&&"absolute"!=t.style.position.toLowerCase()&&"body"==t.tagName.toLowerCase()&&Utility.IsStandCompliantModeOn()&&(n+=t.offsetTop,o+=t.offsetLeft),{Left:o,Top:n}}static FireSystemEvent(e,t){if(e.dispatchEvent){var n=document.createEvent("HTMLEvents");n.initEvent(t.substring(2,t.length),!0,!0),e.dispatchEvent(n)}e.fireEvent&&e.fireEvent(t)}static GetPasteData(e){try{context_1.GlobalContext.IsGetPasteData=!0;var t=Utility.GetClipBoardData(e)}finally{context_1.GlobalContext.IsGetPasteData=!1}return t}static ClearSelection(e){if("string"==typeof e&&(e=document.getElementById(e)),browser_1.Browser.IsIE&&!browser_1.Browser.IsIE11OrLater){if(""!=document.selection.createRange().text)try{document.activeElement===e&&document.selection.empty()}catch(e){}}else""!=Utility.GetSelectionText(e)&&(e.selectionStart=e.value.length,e.selectionEnd=e.selectionStart)}static ToString(e,t,n,o){var i=String(e);if(null!=n){for(;i.length<t;)o?i+=n:i=n+i;return i}for(;i.length<t;)i+=String(e);return i}static GetCurrentDate(){var e=new Date;return e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),e}static CreateElement(e){var t=document.createElement(e);switch(e.toLowerCase()){case"table":t.style.borderCollapse="separate",t.style.margin="0px";break;case"td":t.style.padding="0px";break;case"input":t.style.margin="0px",(browser_1.Browser.chrome||browser_1.Browser.safari)&&(t.style.outline="none");break;case"textarea":(browser_1.Browser.chrome||browser_1.Browser.safari)&&(t.style.outline="none")}return t}static IsStandCompliantModeOn(){return browser_1.Browser.IsIE?"CSS1Compat"==document.compatMode:"CSS1Compat"==document.compatMode||"BackCompat"==document.compatMode}static GetCursorPosition(e,t){if(null==e)return-1;if(!browser_1.Browser.IsIE||browser_1.Browser.IsIE11OrLater){var n=0;if(n=e.selectionStart,e.value)n=e.value.substring(0,n).GetLength();return n}var o=0;if(document.selection){e.focus();var i=document.selection.createRange();i.moveStart("character",-e.value.length),o=i.text.length}return o}static Match(e,t,n,o,i,r){var a=!1;return r&&(e=e.toLocaleLowerCase(),n=n.toLocaleLowerCase()),e.Substring(t,t+i)==n.Substring(o,o+i)&&(a=!0),a}static GetSelectionStartPosition(e){if(null!=e.selectionStart){var t=0;if(t=e.selectionStart,e.value)t=e.value.substring(0,t).GetLength();var n=0;if(n=e.selectionEnd,e.value)n=e.value.substring(0,n).GetLength();if(n<t&&(t=n),e instanceof HTMLTextAreaElement){var o=e.value.substring(0,t);t=(o=(o=o.replace(/\r\n/g,"\n")).replace(/\n/g,"\r\n")).length}return t}try{for(var i=e.createTextRange(),r=document.selection.createRange(),a=e.value.GetLength(),m=0,s=a,l=0,c=a!=e.value.length;m<s;){l=Math.floor((m+s)/2),i=e.createTextRange();var d,u=l;d=c?e.value.Substring(0,l):e.value.substring(0,l);for(var C=0;;){var A;if(-1==(A=c?d.IndexOf("\r\n",C):d.indexOf("\r\n",C)))break;u--,C=A+2}var g=l-u,p=l;if(c&&(p=e.value.GetStandardPosition(l)),u=p-g,i.moveStart("character",u),i.offsetTop>r.offsetTop)s=l;else if(i.offsetTop<r.offsetTop){if(m==l)return s;m=l}else if(i.offsetLeft>r.offsetLeft)s=l;else{if(!(i.offsetLeft<r.offsetLeft))return"\r"==(c?e.value.Substring(l-1,l):e.value.substring(l-1,l))&&l++,l;if(m==l)return s;m=l}}return a}catch(e){return 0}}static GetSelectionEndPosition(e){if(!browser_1.Browser.IsIE||browser_1.Browser.IsIE11OrLater){var t=0;if(t=e.selectionEnd,e.value)t=e.value.substring(0,t).GetLength();var n=0;if(n=e.selectionStart,e.value)n=e.value.substring(0,n).GetLength();return n>t&&(t=n),t}return Utility.GetSelectionStartPosition(e)+document.selection.createRange().text.GetLength()}static CutTailZero(e){if("number"==typeof e&&(e=e.toFixed(20)),-1!==e.indexOf("."))for(var t=e,n=e.length-e.indexOf(".")-1;n>0;n--){if(!(t.lastIndexOf("0")>-1&&0==t.substr(t.length-1,1)))return t;var o=t.lastIndexOf("0");if("."==t.charAt(o-1))return t.substring(0,o-1);t=t.substring(0,o)}return e}static GetSelectionText(e){if("string"==typeof e&&(e=document.getElementById(e)),null!=e.selectionStart)return e.value.substring(e.selectionStart,e.selectionEnd);if(null!=document.selection)return document.selection.createRange().text;if(null!==document.activeElement){var t=document.activeElement.selectionStart,n=document.activeElement.selectionEnd;return document.activeElement.value.substring(t,n)}return""}static EvalForControl(args){eval(args)}static DisabledHoldVisual(e){null!=e&&Utility.IsTouchSupport()&&browser_1.Browser.IsIE10OrLater&&(e.addEventListener("MSHoldVisual",(e=>{e.preventDefault()}),!1),e.addEventListener("MSGestureHold",(e=>{e.preventDefault()}),!1),e.addEventListener("contextmenu",(e=>{e.preventDefault()}),!1))}static IsTouchSupport(){return-1!=window.navigator.userAgent.toLowerCase().indexOf("touch")}static GetTextBoxScrollWidth(e){return Utility.MeasureText(e.value,e).Width}static CheckDate(e,t,n){return isNaN(e)||!(Date&&e instanceof Date)?(CustomExceptions_1.CustomExceptions.invalidType(),null):void 0!==n&&(e<t||e>n)?(CustomExceptions_1.CustomExceptions.valueIsOutOfRange(e,n,t),null):e}static CheckInt(e,t,n){var o=parseInt(e,10);return isNaN(o)?(CustomExceptions_1.CustomExceptions.invalidValue(e),null):void 0!==t&&o<t||void 0!==n&&o>n?(CustomExceptions_1.CustomExceptions.valueIsOutOfRange(e,n,t),null):o}static CheckNullableInt(e,t,n){return null==e?null:Utility.CheckInt(e,t,n)}static CheckBool(e){if("string"==typeof e){if("true"===e.toLowerCase())return!0;if("false"===e.toLowerCase())return!1}return 1==e}static CheckString(e){return(0,Utils_1.isNullOrUndefined)(e)&&(e=""),e.toString()}static CheckEnum(e,t){for(var n in e)if(e[n]==t||e[n].toString().toLowerCase()==(null==t?void 0:t.toString().toLowerCase()))return e[n];return CustomExceptions_1.CustomExceptions.invalidEnumeration(t),null}static validateEnumOrDefault(e,t,n){for(var o in e)if(e[o]==t||e[o].toString().toLowerCase()==t.toString().toLowerCase())return e[o];return n}static CheckChar(e){return 1!==(e=Utility.CheckString(e)).length?(CustomExceptions_1.CustomExceptions.invalidValue(e),null):e}static onMSPointerDown(e){context_1.GlobalContext.IsTouchMouseDown=e.pointerType===e.MSPOINTER_TYPE_TOUCH||"touch"===e.pointerType}static onTouchStart(e){context_1.GlobalContext.IsTouchMouseDown=!0,context_1.GlobalContext.ignoreTouchMouseDown=!0}static onMouseDown(e){!0!==context_1.GlobalContext.ignoreTouchMouseDown&&(context_1.GlobalContext.IsTouchMouseDown=!1),context_1.GlobalContext.ignoreTouchMouseDown=!1}static MeasureText(e,t,n,o){return textMeasure_1.TextMeasure.MeasureText(e,t,n,o)}}exports.Utility=Utility,Utility._eventCallbacks=new Map,Utility.Hold="g-C2",Utility.MaskValChar=["\ufeff","@#GCD1#@","@#GCD2#@","@#GCD3#@","@#GCD4#@"];class PointerEvents{static GetPointerDownName(){return browser_1.Browser.IsEdge?"pointerdown":"MSPointerDown"}static GetPointerMoveName(){return browser_1.Browser.IsEdge?"pointermove":"MSPointerMove"}static GetPointerUpName(){return browser_1.Browser.IsEdge?"pointerup":"MSPointerUp"}}exports.PointerEvents=PointerEvents,Utility.Init();const calcOuterWidth=e=>{let t=e.offsetWidth,n=window.getComputedStyle(e);return n.marginLeft&&(t+=parseFloat(n.marginLeft)),n.marginRight&&(t+=parseFloat(n.marginRight)),t};exports.calcOuterWidth=calcOuterWidth;const SetSelection=(e,t,n,o)=>{let i=t>n?"backward":"forward";if(e._focused){var r=e.GetInputElement();if(o){var a=Utility._convertCrlF(r.value),m=a.substring(0,t),s=a.substring(0,n);t=m.replace(/\r\n/g,"\n").length,n=s.replace(/\r\n/g,"\n").length}var l={};l.start=t,l.end=n;var c=!1;if(t>n){c=!0;var d=t;t=n,n=d}if(browser_1.Browser.IsIE&&!browser_1.Browser.IsEdge)try{var u=t,C=n,A=r.createTextRange();if(null==o){var g=r.value.GetStandardPosition(t);n=r.value.GetStandardPosition(n),t=g,n=r.value.length-n,A.moveEnd("character",-1*n),A.moveStart("character",t),context_1.GlobalContext.InnerSelect=!0,A.select(),context_1.GlobalContext.InnerSelect=!1}else{for(var p=r.value,h=0,f=0,v=0,E=p.LastIndexOf("\r\n"),w=p.GetLength()!=p.length;-1!=E;)h++,E>=t&&f++,E>=n&&v++,E=w?(p=p.Substring(0,E)).LastIndexOf("\r\n"):(p=p.substring(0,E)).lastIndexOf("\r\n");f=h-f;g=r.value.GetStandardPosition(t);n=r.value.GetStandardPosition(n),t=g-f,n=r.value.length-n-v,A.moveEnd("character",-1*n),A.moveStart("character",t),context_1.GlobalContext.InnerSelect=!0,A.select(),context_1.GlobalContext.InnerSelect=!1}}catch(e){}else{u=t=r.value.GetStandardPosition(t),C=n=r.value.GetStandardPosition(n);try{if(!browser_1.Browser.firefox&&!browser_1.Browser.safari||browser_1.Browser.isPad()&&e._focused||r.focus(),browser_1.Browser.chrome)e._focused&&r.setSelectionRange(t,n);else if(browser_1.Browser.IPad)e._focused&&document.activeElement==e.GetInputElement()&&r.setSelectionRange(t,n);else{if(context_1.GlobalContext.InnerSelect=!0,browser_1.Browser.IsEdge){var I=Math.max(0,t-1),y=Math.max(0,n-1);r.setSelectionRange(I,y)}r.setSelectionRange(t,n),context_1.GlobalContext.InnerSelect=!1}browser_1.Browser.isPad()&&e._focused&&document.activeElement!==e.GetInputElement()||(browser_1.Browser.chrome||browser_1.Browser.firefox||browser_1.Browser.safari)&&(r.selectionDirection=i)}catch(e){}}return browser_1.Browser.IsEdge||(0,exports.ScrollToToCaretPosition)(r,c,u,C,o),l}};exports.SetSelection=SetSelection;const ScrollToToCaretPosition=(e,t,n,o,i)=>{var r,a=window.getComputedStyle(e,null),m=parseInt(a.paddingLeft,10),s=parseInt(a.paddingRight,10),l=e.scrollWidth-m-s,c=e.value.substring(0,t?n:o),d=0,u=0;if(i){for(var C=c.split("\n"),A=0;A<C.length;A++){var g=C[A],p=""===g;p&&(g="1"),u+=(r=Utility.MeasureText(g,e,i,l)).Height,p&&(r.Width=0)}d=r.Width}else d=(r=Utility.MeasureText(c,e,i,l)).Width,u=r.Height;var h=e.clientWidth-s,f=e.clientHeight;f-=parseInt(a.paddingTop,10)+parseInt(a.paddingBottom,10),browser_1.Browser.IsIE10OrLater&&!0!==i&&(h-=f);var v=d+m,E=v-m;e.scrollLeft>E?e.scrollLeft=E:v>e.scrollLeft+h&&(e.scrollLeft=v-h),e.scrollTop>u?e.scrollTop=u:u>e.scrollTop+f&&(e.scrollTop=u-f+parseInt(a.paddingTop,10))};exports.ScrollToToCaretPosition=ScrollToToCaretPosition;const FireEvent=(e,t,n,o)=>{if(!t)return!1;if("function"==typeof t){try{t.call(e,e,n,o)}catch(e){return!1}return!0}if(t instanceof Array)for(var i=0;i<t.length;i++)(0,exports.FireEvent)(e,t[i],n,o);return!0};exports.FireEvent=FireEvent;const setIgnoreWatermarkCheckerOnCompositionStart=e=>context_1.GlobalContext.IgnoreWatermarkCheckerOnCompositionStart=e;function setSpecialImeSupport(e){context_1.GlobalContext.SpecialImeSupport=e}(0,export_1.expose)("setIgnoreWatermarkCheckerOnCompositionStart",setIgnoreWatermarkCheckerOnCompositionStart),(0,export_1.expose)("setSpecialImeSupport",setSpecialImeSupport);class EventNotify{constructor(){this.throwException=!1,this.events={}}attach(e,t){let n=this.events[e];return n?n.push(t):this.events[e]=[t],this}deattach(e,t){let n=this.events[e];if(n){let e=n.indexOf(t);e>-1&&n.splice(e,1)}return this}detachAll(){for(const e in this.events)this.events[e]=null,delete this.events[e]}fire(e,t){let n=this.events[e];return n&&n.forEach((e=>{try{e(t)}catch(e){if(this.throwException)throw e}})),this}}exports.EventNotify=EventNotify},4676:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.tipText=t.name=t.onAction=t.img=t.text=t.shouldAppendItem=void 0;const o=n(5452),i=n(9129),r=n(7286),a=n(9529);t.shouldAppendItem=(e,t)=>!0;t.text=()=>(0,o.SR)().getResource(o.GcCommentResourceNames.Reply);t.img=()=>(0,a.h)("div",{class:`${i.GcCommentClassNames.ReplyCommentImage} ${i.GcCommentClassNames.CommonImg}`});t.onAction=(e,t)=>{e.execCommand(r.GcCommentCommand.DoReplyCommentAction,{commentId:t.id})};const m=r.GcCommentContextToolbar.Reply;t.name=m;t.tipText=()=>(0,o.SR)().getResource(o.GcCommentResourceNames.Reply)},4734:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});(0,n(2672).Plugin)()},4794:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.DestroyObject=t.isNumber=t.getElementHotPoint=t.findFirstObjIndexInArray=t.GetHtmlLayOut=t.ElementDragHelper=t.isNestedControl=t.removeIMJSControlMark=t.FindIMControl=t.markIMJSControl=t.CTRL_TYPE=t.CTRL_KEY=t.HtmlElementHelper=t.GetNextFocusableControl=t.mergeObj=t.ArrayHelper=t.createTextNode=t.encodingTextForCreateTextCode=t.parseStringOrElement=t.hasFocus=t.onFocusOut=t.getElementContentWidth=t.getElementExtraWidth=t.calculateDistance=t.isPointInElement=t.isContainsClass=t.isNullOrUndefined=t.isNotEmptyString=t.isEmpty=t.getEnumKeyByValue=t.enumAllValues=t.createDate=t.getTotalHeight=t.getTotalWidth=t.throttle=t.DecodeBase64=t.base64DecodeUnicode=t.Point=t.parseExpression=t.getScrollbarSize=t.getMousewheelDeltaY=t.cssSizeFromString=t.makeInRange=t.isInRange=t.randomSort=t.checkNumber=t.checkDate=t.removeCSS=t.addCSS=t.guid=void 0,t.DestroyObjects=void 0;const o=n(7475),i=n(2366);n(424);const r=n(1139);t.guid=()=>{function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()};t.addCSS=(e,t)=>{if(e.classList&&e.classList.add)return void e.classList.add(t);let n=e.className;n.indexOf(t.trim())>-1||(n+=` ${t}`,n=n.replace(/\s+/," ").trim(),e.className=n)};t.removeCSS=(e,t)=>{if(e.classList&&e.classList.remove&&!(t instanceof RegExp))return void e.classList.remove(t);let n=e.className;n=t instanceof RegExp?n.replace(t,""):n.replace(new RegExp(t,"g"),""),n=n.replace(/\s+/," ").trim(),e.className=n};t.checkDate=e=>(("string"==typeof e||e instanceof String)&&(e=new Date(e.trim())),e);t.checkNumber=e=>{let t;return t=a(e)?Number(e):e,t};t.randomSort=e=>{for(var t=0,n=e.length;t<n;t++){var o=Math.floor(Math.random()*n),i=e[o];e[o]=e[t],e[t]=i}return e};const a=e=>"string"==typeof e||e instanceof String;t.isInRange=(e,t,n,o=!1,i=!1)=>o||i?o&&!i?e>t&&e<=n:!o&&i?e>=t&&e<n:o&&i?e>t&&e<n:void 0:e>=t&&e<=n;t.makeInRange=(e,t,n)=>(t>n&&i.CustomExceptions.minValueShouldNotBiggerThanMaxValue(),e<t&&(e=t),e>n&&(e=n),e);t.cssSizeFromString=e=>{if("number"==typeof e&&e>=0)return`${e}px`;if("string"==typeof e){if(/^(\d+(\.\d{1,2})?|\.\d{1,2})%$/.test(e))return e;const t=parseFloat(e);if(!isNaN(t)&&t>=0)return`${parseFloat(e)}px`}return i.CustomExceptions.invalidNumberForSize(),null};t.getMousewheelDeltaY=e=>{let t=0;var n=navigator.userAgent.toLowerCase();return-1!=navigator.appVersion.toLowerCase().indexOf("mac os")?-1==n.indexOf("safari")&&-1==n.indexOf("chrome")||(t=e.deltaY):t=-1!=n.indexOf("firefox")?e.detail?40*e.detail:e.deltaY?e.deltaY:-e.wheelDelta:e.wheelDelta?-e.wheelDelta:e.deltaY?e.deltaY:e.detail,t};const m={};t.getScrollbarSize=e=>{if(e)return 0;let t=m[window.devicePixelRatio];return t||(t=s(),m[window.devicePixelRatio]=t),t.width};const s=()=>{const e=document.createElement("div"),t=document.createElement("div"),n=document.createElement("div");e.classList.add(o.CSSClassNames.gcim__scrollbar),t.classList.add("gcim__scroll-bar-container"),n.classList.add("gcim__scroll-bar-content"),e.appendChild(t),t.appendChild(n),r.Browser.firefox&&e.setAttribute("browser","firefox"),document.body.appendChild(e);let i={width:t.offsetWidth-t.clientWidth,height:t.offsetHeight-t.clientHeight};return 0==i.width&&-1!=navigator.appVersion.toLowerCase().indexOf("mac os")&&(i.width=15,i.height=15),e.remove(),i};t.parseExpression=(e,t)=>t.replace(/\{!(.*?)\}/g,((t,n)=>{let o=t;try{o=String(l(e,n))}catch(e){console.error("There is an error in the expression '"+t+"' :",e.message)}return o}));const l=(e,t)=>c(t)(e),c=e=>Function("instance",'"use strict"; return ('+e+")");class d{constructor(e=0,n=0){this.x=(0,t.checkNumber)(e),this.y=(0,t.checkNumber)(n)}}t.Point=d;t.base64DecodeUnicode=e=>decodeURIComponent(Array.prototype.map.call((0,t.DecodeBase64)(e),(function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join(""));t.DecodeBase64=e=>{if(void 0!==window.atob)return window.atob(e);var t,n,o,i=function(e,t){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(e.charAt(t));if(-1==n)throw"Cannot decode base64";return n},r=(e=String(e)).length;if(0==r)return e;if(r%4!=0)throw"Cannot decode base64";t=0,"="==e.charAt(r-1)&&(t=1,"="==e.charAt(r-2)&&(t=2),r-=4);var a=[];for(n=0;n<r;n+=4)o=i(e,n)<<18|i(e,n+1)<<12|i(e,n+2)<<6|i(e,n+3),a.push(String.fromCharCode(o>>16,o>>8&255,255&o));switch(t){case 1:o=i(e,n)<<18|i(e,n+1)<<12|i(e,n+2)<<6,a.push(String.fromCharCode(o>>16,o>>8&255));break;case 2:o=i(e,n)<<18|i(e,n+1)<<12,a.push(String.fromCharCode(o>>16))}return a.join("")};t.throttle=(e,t)=>{var n=null;return(...o)=>{n||(n=setTimeout((()=>{e.apply(this,o),n=null}),t))}};t.getTotalWidth=()=>document.documentElement&&"number"==typeof document.documentElement.scrollWidth?document.documentElement.scrollWidth:0;t.getTotalHeight=()=>document.documentElement&&"number"==typeof document.documentElement.scrollHeight?document.documentElement.scrollHeight:0;t.createDate=(e,t,n)=>{let o=new Date(e,t,n);return o.setFullYear(e),o};t.enumAllValues=e=>{var n=[];if((0,t.isEmpty)(e)||"object"!=typeof e)return n;if("function"==typeof Object.values)return Object.values(e);for(var o in e)n.push(e[o]);return n};t.getEnumKeyByValue=(e,n)=>{if((0,t.isEmpty)(e)||"object"!=typeof e)return null;for(var o in e)if(e[o]===n)return o;return null};t.isEmpty=e=>""===e||null==e;t.isNotEmptyString=e=>"string"==typeof e&&""!=e;t.isNullOrUndefined=e=>null==e;t.isContainsClass=(e,t)=>{if(!e)return!1;var n=e.className;return!!n&&n.split(" ").filter((e=>t instanceof RegExp?t.test(e):t instanceof Array?-1!==t.indexOf(e):e===t)).length>0};t.isPointInElement=(e,t,n)=>{var o=n.getBoundingClientRect();return e>=o.left&&e<=o.right&&t>=o.top&&t<=o.bottom};t.calculateDistance=(e,t,n,o)=>{const i=n-e,r=o-t;return Math.sqrt(i*i+r*r)};t.getElementExtraWidth=e=>{var t=getComputedStyle(e),n=0,o=parseFloat(t.borderLeft);isNaN(o)||(n+=o);var i=parseFloat(t.borderRight);isNaN(i)||(n+=i);var r=parseFloat(t.paddingLeft);isNaN(r)||(n+=r);var a=parseFloat(t.paddingRight);return isNaN(a)||(n+=a),n};t.getElementContentWidth=e=>{var n=e.getBoundingClientRect().width;return n>0?n-(0,t.getElementExtraWidth)(e):0};t.onFocusOut=(e,n)=>{e.addEventListener("focusout",(o=>{(0,t.hasFocus)(e,o.relatedTarget)||n(o)}))};t.hasFocus=(e,t)=>e==t||u(e,t);const u=(e,t)=>{if(!t)return!1;let n=t.parentNode;for(;null!=n;){if(n==e)return!0;n=n.parentNode}return!1};t.parseStringOrElement=e=>{if(!e)return null;if(e instanceof Node)return e;let t="";try{t=document.querySelector(e).innerHTML}catch(n){t=e}let n=document.createElement("div");return n.innerHTML=t,n.firstElementChild};t.encodingTextForCreateTextCode=e=>{if(e)for(;-1!=e.indexOf(" ");)e=e.replace(" "," ");return e};t.createTextNode=e=>document.createTextNode((0,t.encodingTextForCreateTextCode)(e));t.ArrayHelper=class{static firstOrDefault(e,t){if(!Array.isArray(e)||"function"!=typeof t)return null;for(var n=0;n<e.length;n++)if(t(e[n]))return e[n];return null}static find(e,t){if(!Array.isArray(e)||"function"!=typeof t)return-1;for(var n=0;n<e.length;n++)if(t(e[n]))return n;return-1}};t.mergeObj=(e,...t)=>{for(let n of t)if(null!=n)for(let t in n)e[t]=n[t];return e};t.GetNextFocusableControl=(e,t,n)=>{for(var o,i=0,r=0;r<t.length;r++)if(e==t[r].ElementObj){o=t[r];var a=t[i=n?(r+1)%t.length:(r-1+t.length)%t.length].ElementObj;if(null!=a)if("radio"==a.type&&a.parentElement){if("none"!=a.parentElement.style.display){i=C.GetRadioControlID(i,t);break}r=0}else{if("none"!=a.style.display)break;r=0}}return i>=t.length||i<0?o:t[i]};class C{static GenerateElementTempID(){return null==C._elementTempID&&(C._elementTempID=-1),C._elementTempID++,"GrapeCityTempID"+C._elementTempID.toString()}static GetRadioControlID(e,t){var n=t[e].ElementObj;n.name;if(1==n.checked)return e;for(var o=0;o<t.length;o++)if("radio"==(n=t[o].ElementObj).type&&1==n.checked)return o;return e}static GetAllElements(e){if(document.body.querySelectorAll){var t=e||"button, input, object, select, textarea";return document.body.querySelectorAll(t)}return r.Browser.IsIE?document.body.all:document.body.getElementsByTagName("*")}static ElementsSort(e,t){return e.TabIndex>0&&0===t.TabIndex?-1:0===e.TabIndex&&t.TabIndex>0?1:e.TabIndex-t.TabIndex||e.index-t.index}static GetSortedElements(){return C.GetElements().sort(C.ElementsSort)}static GetElements(){for(var e=[],t="button,input,object,select,textarea",n=t.split(","),o=C.GetAllElements(t),i=0,r=0;r<o.length;r++)if(!o[r].disabled&&-1!==o[r].tabIndex&&"hidden"!==o[r].style.visibility&&"hidden"!==o[r].type&&"none"!==o[r].style.display&&-1!==n.indexOf(o[r].tagName.toLowerCase())){var a={};a.ElementObj=o[r],a.ID=o[r].id,a.TabIndex=o[r].tabIndex,a.index=r,a.TabIndex>-1&&(e[i++]=a)}return e}}t.HtmlElementHelper=C,t.CTRL_KEY="IMJS-CTRL",t.CTRL_TYPE="ctrl-type";t.markIMJSControl=(e,n,o)=>{(0,t.isNestedControl)(e)||(e&&e.setAttribute(t.CTRL_TYPE,n),(0,t.isNullOrUndefined)(o)||(e[t.CTRL_KEY]=o))},t.FindIMControl=function(e){let n;if("string"==typeof e)if(document.getElementById(e))n=document.getElementById(e);else{let t=document.querySelectorAll(e);for(let e=0;e<t.length;e++)if(-1===t[e].className.indexOf(o.CSSClassNames.imh5Layout)){n=t[e];break}}else e instanceof HTMLElement?n=e:e[0]&&(n=e[0]);return n&&n[t.CTRL_KEY]||null};t.removeIMJSControlMark=e=>{e&&(e.removeAttribute(t.CTRL_TYPE),e[t.CTRL_KEY]=null)};t.isNestedControl=e=>e&&e.hasAttribute("data-nested")&&"true"===e.getAttribute("data-nested");function A(){var e={clientWidth:0,clientHeight:0,scrollLeft:0,scrollTop:0};return document.documentElement&&document.documentElement.clientWidth?e.clientWidth=document.documentElement.clientWidth:document.body&&document.body.clientWidth&&(e.clientWidth=document.body.clientWidth),document.documentElement&&document.documentElement.clientHeight?e.clientHeight=document.documentElement.clientHeight:document.body&&document.body.clientHeight&&(e.clientHeight=document.body.clientHeight),document.documentElement&&document.documentElement.scrollLeft?e.scrollLeft=document.documentElement.scrollLeft:document.body&&document.body.scrollLeft&&(e.scrollLeft=document.body.scrollLeft),document.documentElement&&document.documentElement.scrollTop?e.scrollTop=document.documentElement.scrollTop:document.body&&document.body.scrollTop&&(e.scrollTop=document.body.scrollTop),e.realWidth=e.scrollLeft+e.clientWidth,e.realHeight=e.scrollTop+e.clientHeight,e}t.ElementDragHelper=class{static dragElement(e,t){var n=0,o=0,i=0,r=0;function a(e){(e=e||window.event).preventDefault(),i=e.clientX,r=e.clientY,document.addEventListener("mouseup",s),document.addEventListener("mousemove",m)}function m(e){var a=A();(e=e||window.event).preventDefault(),n=i-e.clientX,o=r-e.clientY,i=e.clientX,r=e.clientY,t.style.position="fixed";var m=t.offsetTop-o,s=t.offsetLeft-n;m>=.5*t.offsetHeight&&m<=a.clientHeight-.5*t.offsetHeight&&(t.style.top=m+"px"),s>=.5*t.offsetWidth&&s<=a.clientWidth-.5*t.offsetWidth&&(t.style.left=s+"px"),t.style.transform=t.offsetLeft-n+"px"}function s(){document.removeEventListener("mouseup",s),document.removeEventListener("mousemove",m)}e?e.addEventListener("mousedown",a):t.addEventListener("mousedown",a)}},t.GetHtmlLayOut=A;t.findFirstObjIndexInArray=(e,t)=>{for(let n=0;n<e.length;n++)if(JSON.stringify(e[n])===JSON.stringify(t))return n;return-1};t.getElementHotPoint=e=>{const t=e.getBoundingClientRect(),n=t.left+t.width/2,o=t.top+t.height/2;return new d(n,o)};t.isNumber=e=>!isNaN(e);t.DestroyObject=e=>{if(e&&"object"==typeof e){for(const t of Reflect.ownKeys(e))delete e[t];Object.setPrototypeOf(e,null)}};t.DestroyObjects=(...e)=>{e.forEach(t.DestroyObject)}},5213:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GCIM=void 0;const o=n(2258),i={get GcRichTextEditor(){return o.win.GCIMImpl.GcRichTextEditor},get GcRichTextEditorDEVTool(){return o.win.GCIMImpl.GcRichTextEditorDEVTool},get GcRichTextEditorEvent(){return o.win.GCIMImpl.GcRichTextEditorEvent},get GcRichTextEditorCommand(){return o.win.GCIMImpl.GcRichTextEditorCommand},get ContentFormat(){return o.win.GCIMImpl.ContentFormat}};t.GCIM=i},5452:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SR=t.GcCommentResourceNames=void 0;const o=n(8845),i=n(7906),r=n(7286);var a;!function(e){e.Reply="Reply",e.ContinueReply="ContinueReply",e.Edit="Edit",e.ContinueEdit="ContinueEdit",e.Delete="Delete",e.Copy="Copy",e.Copied="Copied",e.Stick="Stick",e.Sticked="Sticked",e.Unstick="Unstick",e.Unsticked="Unsticked",e.AddCommentHere="AddCommentHere",e.ContinueToAddCommentHere="ContinueToAddCommentHere",e.PostTime="PostTime",e.UpdateTime="UpdateTime",e.RepliesCount="RepliesCount",e.ReactionsCount="ReactionsCount",e.Default="Default",e.SortBy="SortBy",e.SearchAnyTextHere="SearchAnyTextHere",e.CommentIsEmptyAddYourFeedbackAndClickSave="CommentIsEmptyAddYourFeedbackAndClickSave",e.PleaseLogInBeforePostingAComment="PleaseLogInBeforePostingAComment",e.LoadMore="LoadMore",e.AreYouSureYouWillStopEditingTheComment="AreYouSureYouWillStopEditingTheComment",e.Save="Save",e.Cancel="Cancel",e.OK="OK",e.Anonymous="Anonymous",e.UpdateAt="UpdateAt",e.PostAt="PostAt",e.SureToDeleteThisComment="SureToDeleteThisComment",e.Comments="Comments",e.Reactions="Reactions",e.MoreReply="MoreReply",e.AnonymousUser="AnonymousUser",e.ExpandReplies="ExpandReplies",e.CollapseReplies="CollapseReplies",e.WantToReplaceTheCurrentlyStickedCommentWithThisOne="WantToReplaceTheCurrentlyStickedCommentWithThisOne",e.ViewInGcComment="ViewInGcComment",e.AccessDenied="AccessDenied",e.YouDontHaveAccessToThisContent="YouDontHaveAccessToThisContent",e.NotExist="NotExist",e.ThisCommentDoesNotExist="ThisCommentDoesNotExist"}(a=t.GcCommentResourceNames||(t.GcCommentResourceNames={})),(0,o.expose)("GcCommentResourceNames",a);let m=null;t.SR=()=>(m||(m=(()=>{let e=(e=i.GcComment.getLanguage())=>e===r.GcCommentLanguage.EN?s:l;return{getResource:t=>{let n=e();return t in n?n[t]:t},setResource:(t,n,o)=>{let i=e(t);i&&(i[n]=o)}}})()),m);const s={[a.Reply]:"reply",[a.ContinueReply]:"continue reply",[a.Edit]:"edit",[a.ContinueEdit]:"continue edit",[a.Delete]:"delete",[a.Copy]:"copy",[a.Copied]:"copied",[a.Stick]:"stick",[a.Sticked]:"sticked",[a.Unstick]:"unstick",[a.Unsticked]:"unsticked",[a.AddCommentHere]:"Add comment here.",[a.ContinueToAddCommentHere]:"Continue to add comment here.",[a.PostTime]:"post time",[a.UpdateTime]:"update time",[a.RepliesCount]:"replies count",[a.ReactionsCount]:"reactions count",[a.Default]:"default",[a.SortBy]:"sort by:",[a.SearchAnyTextHere]:"Search any text here.",[a.CommentIsEmptyAddYourFeedbackAndClickSave]:"Comment is empty. Add your feedback and click save.",[a.PleaseLogInBeforePostingAComment]:"Please log in before Posting a comment.",[a.LoadMore]:"Load More",[a.AreYouSureYouWillStopEditingTheComment]:"Are you sure you will stop editing the comment?",[a.Save]:"save",[a.Cancel]:"cancel",[a.Anonymous]:"anonymous",[a.UpdateAt]:"update at",[a.PostAt]:"post at",[a.SureToDeleteThisComment]:"Sure to delete this comment?",[a.Comments]:" {} comments",[a.Reactions]:"{} like",[a.MoreReply]:"more reply",[a.AnonymousUser]:"anonymous user",[a.ExpandReplies]:"expand replies",[a.CollapseReplies]:"collapse replies",[a.WantToReplaceTheCurrentlyStickedCommentWithThisOne]:"Want to replace the currently sticked Comment with this one?",[a.OK]:"ok",[a.ViewInGcComment]:"View in GcComment",[a.AccessDenied]:"Access Denied",[a.YouDontHaveAccessToThisContent]:"You don't have access to this content.",[a.NotExist]:"Not Exist",[a.ThisCommentDoesNotExist]:"This comment does not exist."},l={[a.Reply]:"返信",[a.ContinueReply]:"返信を再開",[a.Edit]:"修正",[a.ContinueEdit]:"編集を再開",[a.Delete]:"削除",[a.Copy]:"リンクのコピー",[a.Copied]:"リンクをコピーしました",[a.Stick]:"ピン留め",[a.Sticked]:"ピン留めしました",[a.Unstick]:"ピン留めを外す",[a.Unsticked]:"ピン留めを外しました",[a.AddCommentHere]:"コメントを追加",[a.ContinueToAddCommentHere]:"コメントを再開",[a.PostTime]:"投稿時間",[a.UpdateTime]:"更新時間",[a.RepliesCount]:"返信数",[a.ReactionsCount]:"リアクション数",[a.Default]:"デフォルト",[a.SortBy]:"並べ替え：",[a.SearchAnyTextHere]:"検索内容を入力してください。",[a.CommentIsEmptyAddYourFeedbackAndClickSave]:"コメントが入力されていません。コメントを記入して、[送信]をクリックしてください。",[a.PleaseLogInBeforePostingAComment]:"ログインしてからコメントを投稿してください。",[a.LoadMore]:"もっと読み込む…",[a.AreYouSureYouWillStopEditingTheComment]:"コメントの編集を終了します。よろしいですか？",[a.Save]:"送信",[a.Cancel]:"キャンセル",[a.Anonymous]:"匿名",[a.UpdateAt]:"更新日時",[a.PostAt]:"投稿日時",[a.SureToDeleteThisComment]:"コメントを削除します。よろしいですか？",[a.Comments]:"コメント{}件",[a.Reactions]:"{}件のリアクション",[a.MoreReply]:"返信をさらに表示",[a.AnonymousUser]:"匿名ユーザー",[a.ExpandReplies]:"返信を表示する",[a.CollapseReplies]:"返信を非表示にする",[a.WantToReplaceTheCurrentlyStickedCommentWithThisOne]:"現在ピン留めされたコメントを置き換えますか？",[a.OK]:"はい",[a.ViewInGcComment]:"ピン留めされたコメントを表示",[a.AccessDenied]:"アクセス不可",[a.YouDontHaveAccessToThisContent]:"アクセス権限がありません。",[a.NotExist]:"存在しません",[a.ThisCommentDoesNotExist]:"このコメントは存在しません。"}},5479:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.onDestroy=t.shouldAppendItem=t.onSetup=t.name=t.getElement=void 0;const o=n(9529),i=n(7286),r=n(9129);t.name="addreactions";const a=new Map;t.getElement=(e,t)=>{let n=(0,o.h)("span",{class:r.GcCommentClassNames.ReactionCollection});l(n,e,t);let a=(0,o.h)("div",{class:r.GcCommentClassNames.ActionReaction},n);if(e.options.showOpenReactionListButton){let a=(0,o.h)("div",{class:r.GcCommentClassNames.AddReaction},(0,o.h)("div",{class:`${r.GcCommentClassNames.AddReactionImg} ${r.GcCommentClassNames.CommonImg}`}));n.appendChild(a),a.addEventListener("click",(n=>{e.execCommand(i.GcCommentCommand.OpenReactionPopup,{commentId:t.id})}))}return e.addEventListener(i.GcCommentEvent.AfterExecuteCommand,(o=>{var r;if(o.command===i.GcCommentCommand.UpdateCommentElement){let i=o.value;(null===(r=null==i?void 0:i.comment)||void 0===r?void 0:r.id)===t.id&&m(e,i.comment,n)}})),a};const m=(e,t,n)=>{var o,i;let r=null===(o=a.get(e))||void 0===o?void 0:o.get(t.id),m=null!==(i=t.reactions)&&void 0!==i?i:[];if(r){let e=[],t=new Set(m.map((e=>e.reactionChar)));r.forEach(((n,o)=>{t.has(o)||(e.push(o),n.dom.remove())})),e.forEach((e=>{r.delete(e)}))}null==m||m.forEach((o=>{let i=d(e,t.id,o.reactionChar);if(i)i.setReactCount(o.count),i.updateReactionState(!!o.currentUserReacted);else{let i=s(e,o);c(e,t.id,o.reactionChar,i),n.appendChild(i.dom)}}))},s=(e,t)=>{let n=t.currentUserReacted,i=t.count,a=(0,o.h)("span",{"gcim-reaction-count":t.count},t.count),m=(0,o.h)("span",null,t.reactionChar),s=(0,o.h)("span",{"gcim-reacted":n,"gcim-reactChar":t.reactionChar,class:r.GcCommentClassNames.Reaction},m,a),l=()=>i,c=()=>{n?i-=1:i+=1,n=!n,t.count=l(),t.currentUserReacted=n,s.setAttribute(r.GcCommentAttrNames.Reacted,`${n}`),a.setAttribute(r.GcCommentAttrNames.ReactionCount,`${i}`),0!==i||e.options.showZeroReaction?a.innerText=`${i}`:s.remove()};return{dom:s,info:t,reactIt:c,getReactCount:l,setReactCount:e=>{i=e,a.innerText=i.toString()},updateReactionState:e=>{n=e,s.setAttribute(r.GcCommentAttrNames.Reacted,`${n}`)},destroy:()=>{null==s||s.removeEventListener("click",c),a=null,m=null,s=null}}},l=(e,t,n)=>{var o;null===(o=n.reactions)||void 0===o||o.forEach((o=>{(o=>{o.count<=0&&(o.count=0,o.currentUserReacted=!1);let i=s(t,o);c(t,n.id,o.reactionChar,i),e.appendChild(i.dom)})(o)})),e.addEventListener("click",(e=>{var o;let i=null===(o=e.target)||void 0===o?void 0:o.closest(".gcim__reaction");if(i){let e=i.getAttribute(r.GcCommentAttrNames.ReactChar);e&&t.reactToComment(n.id,e)}}))},c=(e,t,n,o)=>{let i=a.get(e);i||(i=new Map,a.set(e,i));let r=i.get(t);r||(r=new Map,i.set(t,r)),r.set(n,o)},d=(e,t,n)=>{var o,i;return null===(i=null===(o=a.get(e))||void 0===o?void 0:o.get(t))||void 0===i?void 0:i.get(n)},u=async(e,t,n)=>{var o,i,m,l;let u=d(e,t,n),C=!1;if(C=(null===(o=null==u?void 0:u.info)||void 0===o?void 0:o.currentUserReacted)?await e.dataManager.reactionsManager.unreactToComment(e.userInfo.id,t,n):await e.dataManager.reactionsManager.reactToComment(e.userInfo.id,t,n),!0!==C)return;let A=null===(i=e.getComment(t))||void 0===i?void 0:i.comment;if(A)if(u){if(u.reactIt(),0===u.getReactCount()&&!e.options.showZeroReaction){((e,t,n)=>{var o;let i=null===(o=a.get(e))||void 0===o?void 0:o.get(t);i&&i.delete(n)})(e,t,n);let o=A.reactions.findIndex((e=>e.reactionChar===n));A.reactions.splice(o,1)}}else{let o={reactionChar:n,count:1,currentUserReacted:!0},i=s(e,o);A.reactions=[o].concat(null!==(m=A.reactions)&&void 0!==m?m:[]),c(e,t,n,i);let a=null===(l=e.getCommentElement(t))||void 0===l?void 0:l.querySelector(".gcim__reaction-collection");a&&r.CommentUIHelper.addToLastButBefore(a,i.dom,`.${r.GcCommentClassNames.AddReaction}`)}};t.onSetup=e=>{let t=(e=>{let t=e.options,n=(0,o.h)("div",{class:r.GcCommentClassNames.ReactionPopup,style:`--col-count:${Math.min(t.candidateReactionList.length,t.candidateReactionListColumns)};--row-count:${Math.ceil(t.candidateReactionList.length/t.candidateReactionListColumns)};`});t.candidateReactionList.forEach(((i,a)=>{let m=(0,o.h)("div",{"gcim-default-show":t.candidateReactionListColumns===t.candidateReactionList.length||a<t.candidateReactionListColumns-1},i);m.addEventListener("click",(t=>{let o=n.getAttribute(r.GcCommentAttrNames.TargetCommentId);o&&e.reactToComment(o,i),n.remove()})),n.appendChild(m)}));let a=t.candidateReactionList.length>t.candidateReactionListColumns;if(a){n.setAttribute(r.GcCommentAttrNames.ReactionPopupShowMode,"partial");let e=(0,o.h)("div",{class:`${r.GcCommentClassNames.ShowAllReaction} ${r.GcCommentClassNames.CommonImg}`});e.addEventListener("click",(e=>{n.setAttribute(r.GcCommentAttrNames.ReactionPopupShowMode,"all"),e.preventDefault()})),n.appendChild(e)}const m=e=>{e.defaultPrevented||e.target.closest(".gcim__add-reaction")&&!e.target.closest(".gcim__reaction-popup>div")||(n.remove(),n.setAttribute(r.GcCommentAttrNames.ReactionPopupShowMode,a?"partial":"all"))};return document.addEventListener("click",m),e.addEventListener(i.GcCommentInnerEvent.Destroy,(()=>{n=null,document.removeEventListener("click",m)})),n})(e);e.addCommand(i.GcCommentCommand.OpenReactionPopup,((e,n)=>{if(!n.commentId)return;let o=e.getCommentElement(n.commentId);if(o){let e=o.querySelector(".gcim__add-reaction");e&&(e.appendChild(t),t.setAttribute(r.GcCommentAttrNames.TargetCommentId,`${n.commentId}`),r.CommentUIHelper.adjustPopupPosition(e,t,i.Position.Bottom,i.GcCommentAlign.Left))}})),e.addCommand(i.GcCommentCommand.ReactToComment,(async(e,t)=>{t.commentId&&t.reactChar&&r.CommentUIHelper.isGcCommentLogin(e)&&await u(e,t.commentId,t.reactChar)}))};t.shouldAppendItem=e=>0!==e.options.candidateReactionList.length;t.onDestroy=e=>{a.delete(e)}},5585:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.StickCommentService=void 0;const o=n(7286);t.StickCommentService=()=>{const e=new Map;return{stickComment:(t,n)=>{const i=e.get(t)||[];if(i.includes(n))i.splice(i.indexOf(n),1);else if(i.push(n),i.length>1){const e=i[0];e&&t.execCommand(o.GcCommentCommand.StickCommentElement,{commentId:e.id})}e.set(t,i)},popStickedComment:t=>(e.get(t)||[]).pop()||null,isCommentSticked:(t,n)=>(e.get(t)||[]).some((e=>e.id===n)),peekComment:t=>{const n=e.get(t)||[];return n[n.length-1]||null},clear:t=>{e.delete(t)},update:t=>{(e.get(t)||[]).forEach((e=>{t.getComment(e.id)||t.execCommand(o.GcCommentCommand.StickCommentElement,{commentId:e.id})}))},getComment:(t,n)=>(e.get(t)||[]).find((e=>e.id===n))||null}}},5640:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.register=void 0;t.register=e=>{var t,n;null!==(t=(n=e.options).loadStickedComment)&&void 0!==t||(n.loadStickedComment=()=>null)}},5657:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});(0,n(2147).Plugin)()},5698:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});(0,n(7684).Plugin)()},5785:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.lazy=void 0;t.lazy=e=>{let t,n=!1;return()=>(n||(t=e(),n=!0),t)}},6090:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GcRichTextCommentEditor=void 0;const o=n(1409),i=n(9529),r=n(5213),a=n(9129);t.GcRichTextCommentEditor=(e,t)=>{(0,o.default)(e);let n=(0,i.h)("div",null);t.containerElement.appendChild(n);let m={height:200,resizeMode:"none",content_style:`body {font-size: ${window.getComputedStyle(e.getElement()).fontSize}};`},s=Object.assign(m,e.options.editorConfig),l=new r.GCIM.GcRichTextEditor(n,s),c=null;l.addEventListener(r.GCIM.GcRichTextEditorEvent.BeforeExecCommand,((e,t)=>{t.cmd===r.GCIM.GcRichTextEditorCommand.Focus&&e.inline&&(c=null!=c?c:document.querySelector(`[role=application][gcim__richtexteditor-original_id=${n.id}]`),null==c||c.classList.add(a.GcCommentClassNames.ForceDisplayNone))}));let d=!0;l.addEventListener(r.GCIM.GcRichTextEditorEvent.AfterExecCommand,((e,o)=>{if(d){let e=document.querySelectorAll(`body>div[gcim__richtexteditor-original_id=${n.id}]`);e&&e.length>0&&e.forEach((e=>{t.containerElement.appendChild(e),e.hasAttribute("role")||C(e)}))}if(o.cmd===r.GCIM.GcRichTextEditorCommand.Focus&&e.inline){let e=()=>{c&&(c.classList.remove(a.GcCommentClassNames.ForceDisplayNone),c.style.position="absolute",c.style.left="0px",c.style.top=0-c.clientHeight+"px")};d?setTimeout(e):e(),d=!1}})),null==l||l.addEventListener(r.GCIM.GcRichTextEditorEvent.Init,((e,n)=>{(null==l?void 0:l.inline)&&t.containerElement.setAttribute(a.GcCommentAttrNames.IsEditorInline,`${null==l?void 0:l.inline}`),setTimeout((()=>{}))})),l.addEventListener(r.GCIM.GcRichTextEditorEvent.KeyDown,(()=>{t.onContentChanged()}));let u=!1;l.addEventListener(r.GCIM.GcRichTextEditorEvent.Focus,(()=>{let e=n.closest(`.${a.GcCommentClassNames.StickyHeader}, .${a.GcCommentClassNames.StickyFooter}`);e&&(e.style.zIndex=a.GcCommentStyle.LargerHeaderFooterZIndex),u=!0})),l.addEventListener(r.GCIM.GcRichTextEditorEvent.Blur,(()=>{let e=n.closest(`.${a.GcCommentClassNames.StickyHeader}, .${a.GcCommentClassNames.StickyFooter}`);e&&(e.style.zIndex=""),u=!1}));let C=e=>{new MutationObserver((t=>{if(-1!==t.findIndex((e=>"childList"===e.type))){let t=n.closest(`.${a.GcCommentClassNames.StickyHeader}, .${a.GcCommentClassNames.StickyFooter}`);e&&t&&(0===e.childElementCount?u||(t.style.zIndex=""):t.style.zIndex=a.GcCommentStyle.LargerHeaderFooterZIndex)}})).observe(e,{childList:!0,subtree:!0})};return{destroy:()=>{n.remove(),l.destroy(),n=null,l=null},getContent:()=>l.getContent(),setContent:e=>{l.setContent(""),l.insertContent(e)},getIsDirty:()=>l.isDirty,getEditor:()=>l}}},6140:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.register=void 0;const o=n(7286),i=n(5452),r=n(8581),a=n(9129),m=n(3074),s=n(1701);t.register=e=>{const t=e.registry,n=o.GcCommentContextToolbar.CopyLink;t.registerCommentContextToolbarItem(n,{shouldAppendItem:()=>!0,text:()=>(0,i.SR)().getResource(i.GcCommentResourceNames.Copy),img:()=>(0,r.buildDomElement)({tag:"div",classes:[a.GcCommentClassNames.CopyLink,a.GcCommentClassNames.CommonImg]}),onAction:(e,t)=>{var n;const o=null===(n=e.getCommentElement(t.id))||void 0===n?void 0:n.querySelector(".gcim__comment-control");(0,m.copyCommentLink)(e,t,(()=>{if(o){s.Tip.hide();const e=o.getBoundingClientRect().right;s.Tip.show(o,{message:(0,i.SR)().getResource(i.GcCommentResourceNames.Copied),style:{left:`${e}px`,transform:"translateX(-100%)",backgroundColor:"black",color:"white"}},{delay:3e3})}}))},tipText:()=>(0,i.SR)().getResource(i.GcCommentResourceNames.Copy)})}},6270:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.shouldAppendItem=t.name=t.getElement=void 0;const o=n(9529),i=n(9129);t.name="separateline";t.getElement=(e,t)=>(0,o.h)("div",{class:`${i.GcCommentClassNames.VR} ${i.GcCommentClassNames.R}`});t.shouldAppendItem=()=>!0},6325:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Event=void 0;const o=n(6409),i=n(6771),r=n(7286),a={[r.GcCommentEvent.CreateEditor]:()=>{},[r.GcCommentEvent.EditorCreated]:()=>{},[r.GcCommentEvent.PreprocessError]:e=>{throw e.error}};t.Event=e=>{let t=new Map,n=(n,o)=>{if(!t.has(n)){let i=new m(e,o);t.set(n,i)}};for(let e in a)n(e,a[e]);return{registerEvent:n,addEventHandler:(e,o)=>{var i;if("function"!=typeof o)return;let r=t.get(e);r?r.addHandler(o):(n(e),null===(i=t.get(e))||void 0===i||i.addHandler(o))},removeEventHandler:(e,n)=>{var o;null===(o=t.get(e))||void 0===o||o.removeHandler(n)},dispatchEvent:(e,n)=>{var o;return null===(o=t.get(e))||void 0===o?void 0:o.fire(n)},destroy:()=>{t.forEach((e=>{e.destroy()})),t.clear()}}};class m extends i.EventHandler{constructor(e,t){super(e),this.defaultAction=t}fire(e){let t;if(this.hasHandler())this._funcs.forEach((n=>{try{t=n(e)}catch(e){(0,o.ThrowHelper)().uncapturedError(e).throw()}}));else try{t=this.defaultAction&&this.defaultAction(e)}catch(e){(0,o.ThrowHelper)().uncapturedError(e).throw()}return t}destroy(){this._funcs=[],this._sender=null,this.defaultAction=null}}},6404:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.shouldAppendItem=t.name=t.getElement=void 0;const o=n(7286),i=n(9129),r=n(8794),a=n(5452);t.name="edit";t.getElement=(e,t)=>{let n=(0,r.LocalStorageManager)(e).load(t.id,o.GcCommentCreateEditorReason.EditComment),m=n&&n.state===o.GcCommentCreateEditorReason.EditComment?(0,a.SR)().getResource(a.GcCommentResourceNames.ContinueEdit):(0,a.SR)().getResource(a.GcCommentResourceNames.Edit),s=i.CommentUIHelper.buildCommentActionButton(e,m,"edit");return s.element.addEventListener("click",(()=>{e.execCommand(o.GcCommentCommand.DoEditCommentAction,{commentId:t.id}),s.text&&(s.text.innerText=(0,a.SR)().getResource(a.GcCommentResourceNames.Edit))})),s.element};t.shouldAppendItem=(e,t)=>i.CommentUIHelper.isCommentPostedByCurrentUser(e,t)},6409:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ThrowHelper=void 0;const o=n(3346);t.ThrowHelper=()=>i;const i={argumentNullException:e=>r.create("Argument null exception. Argument name: {}",e),invalidParameter:e=>r.create("Invalid parameter exception. Parameter name: {}",e),uncapturedError:e=>r.create("{}",e)};class r{constructor(e,t){this.throw=()=>{let e=(0,o.formatString)(this.templateString,...this.params);console.warn(e)},this.templateString=e,this.params=t}static create(e,...t){return new r(e,t)}}},6568:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.register=void 0;const o=n(7286),i=n(2022);t.register=e=>{e.addCommand(o.GcCommentCommand.UpdateCommentCount,((t,n)=>{"number"==typeof n.count&&(0,i.updateCommentCount)(e,n.count)}))}},6613:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.name=t.getElement=t.shouldAppendItem=void 0;const o=n(9529),i=n(9129),r=n(7286),a="gcim__context-toolbar-reactions",m="gcim__open-reaction-popup-btn",s="gcim__context-toolbar-reactions-popup";t.shouldAppendItem=()=>!0;t.getElement=(e,t)=>{let n=(0,o.h)("div",{class:a}),l=e.options.candidateReactionList,c=e.options.candidateReactionListColumns,d=(n,o,i)=>{n.addEventListener("click",(()=>{i&&i(),e.execCommand(r.GcCommentCommand.ReactToComment,{reactChar:o,commentId:t.id})}))};if(c>=l.length)l.forEach((e=>{let t=(0,o.h)("div",null,e);n.appendChild(t),d(t,e)}));else{let t=(0,o.h)("div",{style:`--col-count: ${e.options.candidateReactionListColumns};`,class:s});l.forEach((e=>{let n=(0,o.h)("div",null,e);t.appendChild(n),d(n,e,(()=>{t.remove()}))}));for(let e=0;e<c-1;e++){let t=(0,o.h)("div",null,l[e]);n.appendChild(t),d(t,l[e])}let a=(0,o.h)("div",{class:`${m} ${i.GcCommentClassNames.CommonImg}`});a.addEventListener("click",(e=>{n.contains(t)?t.remove():(n.appendChild(t),i.CommentUIHelper.adjustPopupPosition(n,t,r.Position.Top,r.GcCommentAlign.Left)),e.stopPropagation()})),n.appendChild(a)}return n};const l=r.GcCommentContextToolbar.AddReactions;t.name=l},6629:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getItemInfo=void 0;const o=n(7286),i=n(9129),r=n(9529),a=n(5452),m="gcim__sort-by",s="gcim__sort-item",l="gcim__sort-item-name",c="gcim__sort-item-icon",d="gcim__combo",u="gcim__sort-indicator",C="gcim__sort-name",A="gcim__dropdown-btn",g="gcim__gccomment-sort-items-popup",p="gcim-isdesc",h="gcim-sorting-by",f=o.GcCommentCommand.Sort,v=o.GcCommentCommand.ResetSort;t.getItemInfo=e=>{let t=(0,r.h)("span",{class:C},(0,a.SR)().getResource(a.GcCommentResourceNames.Default)),n=(0,r.h)("div",{"gcim-sorting-by":o.GcCommentSortBy.Default,class:`${u} ${i.GcCommentClassNames.CommonImg}`}),E=(0,r.h)("div",{class:d,tabindex:"0"}," ",t,n,(0,r.h)("div",{class:`${i.GcCommentClassNames.VR} ${i.GcCommentClassNames.R}`}),(0,r.h)("div",{class:`${A} ${i.GcCommentClassNames.CommonImg}`})),w=(0,r.h)("div",{class:m},(0,r.h)("span",null,(0,a.SR)().getResource(a.GcCommentResourceNames.SortBy))," ",E);E.addEventListener("focusout",(()=>{i.CommentUIHelper.hideElement(x),S=!1,I=!1})),E.addEventListener("focus",(e=>{I=!0}));let I=!1,y=-1;E.addEventListener("keydown",(e=>{var t,n;if(I){const o=x.children;switch(e.key){case"ArrowUp":if(e.altKey){B();break}if(!S)break;y>0&&(null===(t=o[y])||void 0===t||t.classList.remove("gcim__selected"),y--,o[y].classList.add("gcim__selected")),e.preventDefault();break;case"ArrowDown":if(e.altKey){T();break}if(!S)break;y<o.length-1&&(null===(n=o[y])||void 0===n||n.classList.remove("gcim__selected"),y++,o[y].classList.add("gcim__selected")),e.preventDefault();break;case"Enter":if(!S)break;if(y<0)break;o[y].click(),e.preventDefault();break;case"Escape":B()}}}));let x,G={[o.GcCommentSortBy.Default]:(0,a.SR)().getResource(a.GcCommentResourceNames.Default),[o.GcCommentSortBy.PostTime]:(0,a.SR)().getResource(a.GcCommentResourceNames.PostTime),[o.GcCommentSortBy.UpdateTime]:(0,a.SR)().getResource(a.GcCommentResourceNames.UpdateTime),[o.GcCommentSortBy.RepliesCount]:(0,a.SR)().getResource(a.GcCommentResourceNames.RepliesCount),[o.GcCommentSortBy.ReactionsCount]:(0,a.SR)().getResource(a.GcCommentResourceNames.ReactionsCount)},b=t=>{let o="true"!==n.getAttribute(p);e.sort({isDesc:o,sortBy:t})};x=((e,t,n,o)=>{let a=(0,r.h)("div",{class:g});i.CommentUIHelper.hideElement(a),e.appendChild(a);for(let e in t){let t=n?n(e):(0,r.h)("div",null,(0,r.h)("span",null,e));t.addEventListener("click",(()=>o(t,e))),a.appendChild(t)}return a})(E,G,(e=>(0,r.h)("div",{class:s,"gcim-sort-by":e},(0,r.h)("div",{class:`${i.GcCommentClassNames.CommonImg} ${c}`}),(0,r.h)("div",{class:l},G[e]))),((e,t)=>{b(t)})),n.addEventListener("click",(e=>{e.preventDefault();let t=n.getAttribute(h);b(t)}));let S=!1;E.addEventListener("click",(e=>{e.defaultPrevented||(_(),e.preventDefault())}));const _=()=>{S?B():T()},T=()=>{i.CommentUIHelper.showElement(x),S=!0},B=()=>{var e;i.CommentUIHelper.hideElement(x),S=!1,null===(e=x.children[y])||void 0===e||e.classList.remove("gcim__selected"),y=-1},D=e=>{e.defaultPrevented||(i.CommentUIHelper.hideElement(x),S=!1)};document.addEventListener("click",D);e.addEventListener(o.GcCommentEvent.AfterExecuteCommand,(e=>{e.command===o.GcCommentCommand.Clear&&(n.setAttribute(h,o.GcCommentSortBy.Default),t.innerText=`${G[o.GcCommentSortBy.Default]}`,i.CommentUIHelper.hideElement(x))}));let k=(t,n,i=!0)=>{const r=t.filter((t=>{return n=t,e.options.commentMode===o.GcCommentMode.ListMode||e.options.commentMode===o.GcCommentMode.ThreadMode&&!n.comment.parentCommentId||e.options.commentMode===o.GcCommentMode.ChatMode;var n}));return r.sort(((e,t)=>{const o=n(e,t);return i?-o:o})),r},M=e=>{var t;let n=0;return null===(t=e.reactions)||void 0===t||t.forEach((e=>{n+=e.count})),n},R=t=>{if((null==t?void 0:t.sortBy)&&"boolean"==typeof t.isDesc&&(e.destroyCommentEditor(),!e.isCommentEditorActive())){L(t);let n=(e=>{let t=()=>0;switch(e.toLocaleLowerCase()){case o.GcCommentSortBy.Default:break;case o.GcCommentSortBy.PostTime:t=(e,t)=>e.comment.postTime.getTime()-t.comment.postTime.getTime();break;case o.GcCommentSortBy.ReactionsCount:t=(e,t)=>M(e.comment)-M(t.comment);break;case o.GcCommentSortBy.RepliesCount:t=(e,t)=>e.comment.replies.length-t.comment.replies.length;break;case o.GcCommentSortBy.UpdateTime:t=(e,t)=>e.comment.updateTime.getTime()-t.comment.updateTime.getTime()}return t})(t.sortBy),r=k(e.renderedCommentsInfo,n,t.isDesc);for(let t of r)i.CommentUIHelper.addToLast(e.elementDom.container,t.element)}},L=e=>{n.setAttribute(p,String(e.isDesc)),n.setAttribute(h,e.sortBy),t.innerText=`${G[e.sortBy]}`};return{getElement:()=>w,onSetup:()=>{let t,n={isDesc:!0,sortBy:o.GcCommentSortBy.Default};e.addCommand(f,((e,t)=>{R(t.sortInfo)})),e.addCommand(v,(()=>{R(n)})),e.options.sortInfo&&e.addEventListener(o.GcCommentEvent.AfterFirstLoad,(()=>{R(e.options.sortInfo),t=!0})),e.addEventListener(o.GcCommentEvent.AfterExecuteCommand,(e=>{e.command===o.GcCommentCommand.Load&&(t?t=!1:L(n))}))},onDestroy:()=>{E.removeEventListener("click",_),document.removeEventListener("click",D),x=null,w=null,E=null,n=null,t=null}}}},6769:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.compute=void 0;const n=e=>"object"==typeof e&&null!=e&&1===e.nodeType,o=(e,t)=>(!t||"hidden"!==e)&&("visible"!==e&&"clip"!==e),i=(e,t)=>{if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){const i=getComputedStyle(e,null);return o(i.overflowY,t)||o(i.overflowX,t)||e===((n=e).ownerDocument.scrollingElement||n.ownerDocument.documentElement)}var n;return!1},r=(e,t,n,o,i,r,a,m)=>r<e&&a>t||r>e&&a<t?0:r<=e&&m<=n||a>=t&&m>=n?r-e-o:a>t&&m<n||r<e&&m>n?a-t+i:0,a=e=>{const t=e.parentElement;return null==t?e.getRootNode().host||null:t};t.compute=(e,t)=>{var o,m,s,l;if("undefined"==typeof document)return[];const{scrollMode:c,block:d,inline:u,boundary:C,skipOverflowHiddenElements:A}=t,g="function"==typeof C?C:e=>e!==C;if(!n(e))throw new TypeError("Invalid target");const p=e.ownerDocument,h=document.scrollingElement||p.documentElement,f=[];let v=e;for(;n(v)&&g(v);){if(v=a(v),v===h){f.push(v);break}null!=v&&v===document.body&&i(v)&&!i(document.documentElement)||null!=v&&i(v,A)&&f.push(v)}const E=null!==(m=null===(o=window.visualViewport)||void 0===o?void 0:o.width)&&void 0!==m?m:innerWidth,w=null!==(l=null===(s=window.visualViewport)||void 0===s?void 0:s.height)&&void 0!==l?l:innerHeight,{scrollX:I,scrollY:y}=window,{height:x,width:G,top:b,right:S,bottom:_,left:T}=e.getBoundingClientRect(),{top:B,right:D,bottom:k,left:M}=(e=>{const t=window.getComputedStyle(e);return{top:parseFloat(t.scrollMarginTop)||0,right:parseFloat(t.scrollMarginRight)||0,bottom:parseFloat(t.scrollMarginBottom)||0,left:parseFloat(t.scrollMarginLeft)||0}})(e);let R="start"===d||"nearest"===d?b-B:"end"===d?_+k:b+x/2-B+k,L="center"===u?T+G/2-M+D:"end"===u?S+D:T-M;const N=[];for(let e=0;e<f.length;e++){const t=f[e],{height:n,width:o,top:a,right:m,bottom:s,left:l}=t.getBoundingClientRect();if("if-needed"===c&&b>=0&&T>=0&&_<=w&&S<=E&&(t===h&&!i(t)||b>=a&&_<=s&&T>=l&&S<=m))return N;const C=getComputedStyle(t),A=parseInt(C.borderLeftWidth,10),g=parseInt(C.borderTopWidth,10),p=parseInt(C.borderRightWidth,10),v=parseInt(C.borderBottomWidth,10);let B=0,D=0;const k="offsetWidth"in t?t.offsetWidth-t.clientWidth-A-p:0,M="offsetHeight"in t?t.offsetHeight-t.clientHeight-g-v:0,P="offsetWidth"in t?0===t.offsetWidth?0:o/t.offsetWidth:0,O="offsetHeight"in t?0===t.offsetHeight?0:n/t.offsetHeight:0;if(h===t)B="start"===d?R:"end"===d?R-w:"nearest"===d?r(y,y+w,w,g,v,y+R,y+R+x,x):R-w/2,D="start"===u?L:"center"===u?L-E/2:"end"===u?L-E:r(I,I+E,E,A,p,I+L,I+L+G,G),B=Math.max(0,B+y),D=Math.max(0,D+I);else{B="start"===d?R-a-g:"end"===d?R-s+v+M:"nearest"===d?r(a,s,n,g,v+M,R,R+x,x):R-(a+n/2)+M/2,D="start"===u?L-l-A:"center"===u?L-(l+o/2)+k/2:"end"===u?L-m+p+k:r(l,m,o,A,p+k,L,L+G,G);const{scrollLeft:e,scrollTop:i}=t;B=0===O?0:Math.max(0,Math.min(i+B/O,t.scrollHeight-n/O+M)),D=0===P?0:Math.max(0,Math.min(e+D/P,t.scrollWidth-o/P+k)),R+=i-B,L+=e-D}N.push({el:t,top:B,left:D})}return N}},6771:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EventHandler=void 0;t.EventHandler=class{constructor(e){this._sender=e,this._funcs=[]}addHandler(e){this._funcs.indexOf(e)>-1||this._funcs.push(e)}removeHandler(e){if(!e)return void(this._funcs=[]);let t=this._funcs.indexOf(e);t<0||this._funcs.splice(t,1)}clear(){this._funcs=[],this._sender=null}fire(e){this._funcs.forEach((t=>{try{t(this._sender,e)}catch(e){}}))}hasHandler(){return 0!==this._funcs.length}}},6813:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.register=void 0;t.register=e=>{e.addCommand("mention",(()=>{e.insertContent(" @"),e.fire("keypress")}))}},7266:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Registry=void 0;const o=n(1724);t.Registry=e=>{let t=new Map,n=new Map,i=new Map,r=new Map,a=(e,n)=>{t.has(e)||(t.set(e,n),n.onSetup&&n.onSetup())},m=(t,o)=>{n.has(t)||(n.set(t,o),o.onSetup&&o.onSetup(e))},s=(t,n)=>{i.has(t)||(i.set(t,n),n.onSetup&&n.onSetup(e))},l=(t,n)=>{r.has(t)||(r.set(t,n),n.onSetup&&n.onSetup(e))},c=!1;const d=()=>{let t=e.options.headerFooterItems;t&&Object.keys(t).forEach((n=>{let o=t[n](e);a(n,o)}));let n=e.options.commentActionItem;n&&Object.keys(n).forEach((e=>{let t=n[e];m(e,t)}));let o=e.options.commentInfoActionItem;o&&Object.keys(o).forEach((e=>{let t=o[e];s(e,t)}));let i=e.options.contextToolbarItem;i&&Object.keys(i).forEach((e=>{let t=i[e];l(e,t)}))};const u=(0,o.CommentEditorsRegistry)();return{registerHeaderFooterItem:a,registerCommentAction:m,registerCommentInfoAction:s,registerCommentContextToolbarItem:l,getHeaderFooterItem:e=>t.get(e),getCommentAction:e=>n.get(e),getCommentInfoAction:e=>i.get(e),getCommentContextToolbarItem:e=>r.get(e),setup:()=>{c||(c=!0,d())},commentEditorsRegistry:u,destroy:()=>{t.forEach((t=>{t.onDestroy&&t.onDestroy(e)})),n.forEach((t=>{t.onDestroy&&t.onDestroy(e)})),i.forEach((t=>{t.onDestroy&&t.onDestroy(e)})),r.forEach((t=>{t.onDestroy&&t.onDestroy(e)})),t.clear(),n.clear(),i.clear(),r.clear(),u.destroy()}}}},7286:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GcCommentAlign=t.Position=t.AppearanceStyle=t.OpenLinkMode=t.GcCommentCreateEditorReason=t.GcCommentEditorPosition=t.GcCommentMode=t.GcCommentCommentInfoActionItem=t.GcCommentCommentActionItem=t.GcCommentContextToolbar=t.GcCommentHeaderFooterItem=t.LoadUserType=t.AddNewCommentPosition=t.GcCommentRequestDataType=t.GcCommentActionButtonType=t.GcCommentCollapseRepliesMode=t.GcCommentInnerEvent=t.GcCommentCommand=t.GcCommentLanguage=t.GcCommentUserIconType=t.GcCommentSortBy=t.GcCommentEvent=void 0;const o=n(8845);var i,r,a,m,s,l,c,d,u,C,A,g,p,h,f,v,E,w,I,y;!function(e){e.CreateEditor="createeditor",e.EditorCreated="editorcreated",e.PreprocessError="preprocesserror",e.BeforeExecuteCommand="beforeexecutecommand",e.AfterExecuteCommand="afterexecutecommand",e.BeforeFirstLoad="beforefirstload",e.AfterFirstLoad="afterfirstload"}(i=t.GcCommentEvent||(t.GcCommentEvent={})),(0,o.expose)("GcCommentEvent",i),function(e){e.PostTime="posttime",e.UpdateTime="updatetime",e.RepliesCount="repliescount",e.ReactionsCount="reactionscount",e.Default="default"}(r=t.GcCommentSortBy||(t.GcCommentSortBy={})),(0,o.expose)("GcCommentSortBy",r),function(e){e.Circle="circle",e.Square="square",e.RoundedCorner="roundedcorner"}(a=t.GcCommentUserIconType||(t.GcCommentUserIconType={})),(0,o.expose)("GcCommentUserIconType",a),function(e){e.EN="en",e.JA="ja"}(m=t.GcCommentLanguage||(t.GcCommentLanguage={})),(0,o.expose)("GcCommentLanguage",m),function(e){e.UpdateCommentElement="updatecommentelement",e.DeleteCommentElement="deletecommentelement",e.AddCommentElement="addcommentelement",e.AddReplyCommentElement="addreplycommentelement",e.DoEditCommentAction="doeditcommentaction",e.DoDeleteCommentAction="dodeletecommentaction",e.DoReplyCommentAction="doreplycommentaction",e.DoPostCommentAction="dopostcommentaction",e.Clear="clear",e.GotoComment="gotocomment",e.StickComment="stickcomment",e.StickCommentElement="stickcommentelement",e.CopyLink="copylink",e.OpenCommentLink="opencommentlink",e.UpdateCommentCount="updatecommentcount",e.UpdateReactionCount="updatereactioncount",e.Load="load",e.ChangeUserInfo="changeuserinfo",e.SetComments="setcomments",e.OpenReactionPopup="openreactionpopup",e.ReactToComment="reacttocomment",e.Search="search",e.SearchNext="searchnext",e.SearchPrevious="searchprevious",e.ClearSearch="clearsearch",e.Sort="sort",e.ResetSort="resetsort",e.PostComment="postcomment",e.ReplyToComment="replytocomment",e.DeleteComment="deletecomment",e.UpdateComment="updatecomment"}(s=t.GcCommentCommand||(t.GcCommentCommand={})),(0,o.expose)("GcCommentCommand",s),function(e){e.HasMoreComments="hasmorecomments",e.NoMoreComments="nomorecomments",e.Destroy="destroy"}(t.GcCommentInnerEvent||(t.GcCommentInnerEvent={})),function(e){e.NotAllowed="notallowed",e.TopLevel="toplevel",e.EveryLevel="everylevel"}(l=t.GcCommentCollapseRepliesMode||(t.GcCommentCollapseRepliesMode={})),(0,o.expose)("GcCommentCollapseRepliesMode",l),function(e){e.Button="button",e.Icon="icon",e.IconText="icontext",e.Text="text"}(c=t.GcCommentActionButtonType||(t.GcCommentActionButtonType={})),(0,o.expose)("GcCommentActionButtonType",c),function(e){e.JSON="json",e.FormData="formdata"}(d=t.GcCommentRequestDataType||(t.GcCommentRequestDataType={})),(0,o.expose)("GcCommentRequestDataType",d),function(e){e.Top="top",e.Bottom="bottom"}(u=t.AddNewCommentPosition||(t.AddNewCommentPosition={})),(0,o.expose)("AddNewCommentPosition",u),function(e){e.ById="byid",e.FilterText="filtertext"}(C=t.LoadUserType||(t.LoadUserType={})),(0,o.expose)("LoadUserType",C),function(e){e.Search="search",e.Sort="sort",e.CommentCount="commentcount",e.ReactionCount="reactioncount"}(A=t.GcCommentHeaderFooterItem||(t.GcCommentHeaderFooterItem={})),(0,o.expose)("GcCommentHeaderFooterItem",A),function(e){e.Reply="reply",e.Edit="edit",e.Delete="delete",e.SeparateLine="separateline",e.AddReactions="addreactions",e.CopyLink="copylink",e.StickComment="stickcomment"}(g=t.GcCommentContextToolbar||(t.GcCommentContextToolbar={})),(0,o.expose)("GcCommentContextToolbar",g),function(e){e.Reply="reply",e.Edit="edit",e.Delete="delete",e.SeparateLine="separateline",e.AddReactions="addreactions"}(p=t.GcCommentCommentActionItem||(t.GcCommentCommentActionItem={})),(0,o.expose)("GcCommentCommentActionItem",p),function(e){e.PostTime="posttime",e.UpdateTime="updatetime",e.CopyLink="copylink",e.StickComment="stickcomment"}(h=t.GcCommentCommentInfoActionItem||(t.GcCommentCommentInfoActionItem={})),(0,o.expose)("GcCommentCommentInfoActionItem",h),function(e){e.ThreadMode="threadmode",e.ListMode="listmode",e.ChatMode="chatmode"}(f=t.GcCommentMode||(t.GcCommentMode={})),(0,o.expose)("GcCommentMode",f),function(e){e.Top="top",e.Bottom="bottom",e.FixedBottom="fixedbottom"}(v=t.GcCommentEditorPosition||(t.GcCommentEditorPosition={})),(0,o.expose)("GcCommentEditorPosition",v),function(e){e.AddComment="addcomment",e.EditComment="editcomment",e.ReplyToComment="replytocomment"}(E=t.GcCommentCreateEditorReason||(t.GcCommentCreateEditorReason={})),(0,o.expose)("GcCommentCreateEditorReason",E),function(e){e.NewTab="newtab",e.CurrentTab="currenttab",e.GoToComment="gotocomment"}(w=t.OpenLinkMode||(t.OpenLinkMode={})),(0,o.expose)("OpenLinkMode",w),function(e){e.Classic="classic",e.Modern="modern"}(I=t.AppearanceStyle||(t.AppearanceStyle={})),(0,o.expose)("AppearanceStyle",I),function(e){e[e.Top=0]="Top",e[e.Bottom=1]="Bottom"}(t.Position||(t.Position={})),function(e){e.Left="left",e.Right="right",e.Center="center"}(y=t.GcCommentAlign||(t.GcCommentAlign={})),(0,o.expose)("GcCommentAlign",y)},7475:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ComponentType=t.CSSClassNames=void 0,t.CSSClassNames={imh5InputWrapper:"gcim__input-wrapper",imh5:"gcim",imh5GcNumber_negative:"gcim_gc-number_negative",imh5__input:"gcim__input",imh5__textarea:"gcim__textarea",imh5Hidden:"gcim_hidden",imh5DropDown:"gcim-dropdown",imh5DropDownDirectionUp:"gcim-dropdown-up",imh5DropDownDirectionDown:"gcim-dropdown-down",imh5DropDownClose:"gcim-dropdown_close",imh5Layout:"gcim-layout",imh5DropDown_Numeric:"gcim-drop-down_numeric-box",imh5Focused:"gcim_focused",imh5Disabled:"gcim_disabled",imh5NumericButton:"gcim-numeric-button",imh5NumericPad__row_col1:"gcim-numeric-pad__row_col1",imh5NumericPad__row_col2:"gcim-numeric-pad__row_col2",imh5NumericPad__row_col3:"gcim-numeric-pad__row_col3",imh5Icon:"gcim-icon",imh5IconDropDown:"gcim-icon_drop-down",imh5IconBackSpace:"gcim-icon_back-space",imh5IconSpinUp:"gcim-icon_spin-up",imh5IconSPinDown:"gcim-icon_spin-down",imh5NumericPad:"gcim-numeric-pad",imh5NumericPadRow:"gcim-numeric-pad__row",imh5NumericPadLastRow:"gcim-numeric-pad__row_last-row",imh5Button:"gcim__side-button",gcim__sideButton_dropDownCalendar:"gcim__side-button_drop-down-calendar",gcim__sideButton_dropDownNumericPad:"gcim__side-button_drop-down-numeric-pad",imh5__SpinButton:"gcim__spin-button",imh5__SpinButtonUp:"gcim__spin-button__up",imh5__SpinButtonDown:"gcim__spin-button__down",imh5__SpinButtonWrapper:"gcim__spin-button-wrapper",imh5__FishEye:"gcim__fish-eye",gcimCalendar__disabled:"gcim-calendar__disabled",gcimWatermark_emptyEra:"gcim_watermark_empty-era",gcimWatermark_null:"gcim_watermark_null",gcimWatermark_zero:"gcim_watermark_zero",imh5_listbox:"gcim__listbox",imh5_listboxHeader:"column-header",imh5_listboxViewPort:"viewport",imh5_listboxItem:"list-item",imh5_listboxCell:"list-cell",gcim__clearButton:"gcim__clear-button",gcim_emptyTemplate:"gcim_empty_template",gcim__copyButton:"gcim__copy-button",gcim__helpButton:"gcim__help-button",gcim__copybutton_tip:"gcim__copy-button_tip",gcim__helpbutton_tip:"gcim__help-button_tip",gcim__popup_container:"gcim__popup-container",gctagbox_dropdown:"gctagbox_dropdown",gcim__button_multiline:"gcim__button-multiline",gcim__buttons_container:"gcim__buttons_container",gcim__buttons_container_multiline:"gcim__buttons_container-multiline",gcim__scrollbar:"gcim__scroll-bar",floatingLabelInsidePaddingClass:"inside-padding",floatingLabelThroughPaddingClass:"throughborder-padding"},t.ComponentType={text_box:"GcTextBox",multiline:"GcMultiLineTextBox",calculator:"GcCalculator",calendar:"GcCalendar",combo:"GcComboBox",date_time:"GcDateTime",date_time_picker:"GcDateTimePicker",function_key:"GcFunctionKey",listbox:"GcListBox",mask:"GcMask",number:"GcNumber",form_persistence:"GcFormPersistence",soft_keyboard:"GcSoftKeyboard",tag_box:"GcTagBox",tag_box_editor:"GcTagBoxEditor",slider:"GcSlider",treeView:"GcTreeView"}},7595:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.register=void 0;const o=n(7286),i=n(9129),r=n(8581),a=n(5452),m=n(2264),s=n(1701),l=o.GcCommentCommentInfoActionItem.StickComment;t.register=e=>{e.registry.registerCommentInfoAction(l,{getElement:(e,t)=>{let n=(0,r.buildDomElement)({tag:"div",classes:[i.GcCommentClassNames.StickComment,i.GcCommentClassNames.CommonImg]});n.addEventListener("click",(()=>{const n=(0,m.isCommentSticked)(e,t.id);e.execCommand(o.GcCommentCommand.StickComment,{commentId:t.id,onSuccess:()=>{const o=(0,m.isCommentSticked)(e,t.id);if(n===o)return;let r=e.getComment(t.id).element.querySelector(`.${i.GcCommentClassNames.StickComment}`);n?s.Tip.show(r,{message:(0,a.SR)().getResource(a.GcCommentResourceNames.Unsticked),style:{backgroundColor:"black",color:"white"}},{delay:2e3}):s.Tip.show(r,{message:(0,a.SR)().getResource(a.GcCommentResourceNames.Sticked),style:{backgroundColor:"black",color:"white"}},{delay:2e3})}})}));const l=e=>{s.Tip.hide(),document.removeEventListener("scroll",l)};return n.addEventListener("mouseover",(()=>{(0,m.isCommentSticked)(e,t.id)?s.Tip.show(n,{message:(0,a.SR)().getResource(a.GcCommentResourceNames.Unstick)}):s.Tip.show(n,{message:(0,a.SR)().getResource(a.GcCommentResourceNames.Stick)}),document.addEventListener("scroll",l)})),n.addEventListener("mouseout",(()=>{s.Tip.hide({delay:1e3}),document.removeEventListener("scroll",l)})),n},shouldAppendItem:()=>!0,name:l})}},7643:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Commands=void 0;const o=n(7286);t.Commands=e=>{let t=new Map;e.registerEvent(o.GcCommentEvent.BeforeExecuteCommand),e.registerEvent(o.GcCommentEvent.AfterExecuteCommand);return{register:(e,n)=>{t.has(e)||t.set(e,n)},execute:async(n,r)=>{var a;let m=t.get(n);if(m){let t=i(n,r);if(e.dispatchEvent(o.GcCommentEvent.BeforeExecuteCommand,t),!t.defaultPrevented){let n=m(e,r);(n instanceof Promise||Object.prototype.toString.call(n)===Object.prototype.toString.call(Promise.resolve(null)))&&await n,null===(a=null==e?void 0:e.dispatchEvent)||void 0===a||a.call(e,o.GcCommentEvent.AfterExecuteCommand,t)}}},destroy:()=>{t.clear()}}};const i=(e,t)=>{let n=!1;return{command:e,value:t,get defaultPrevented(){return n},preventDefault:()=>{n=!0}}}},7677:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LoadAdapter=void 0;const o=n(7286);t.LoadAdapter=e=>{let t=e.options.pageSize,n=0;e.addEventListener(o.GcCommentEvent.AfterExecuteCommand,(e=>{e.command===o.GcCommentCommand.Clear&&i()}));let i=()=>{t=e.options.pageSize,n=0};return{load:async()=>{var i;0===n&&e.dispatchEvent(o.GcCommentEvent.BeforeFirstLoad);let r=await e.dataManager.commentsManager.loadCommentRange(n,t);e&&(null===(i=r.comments)||void 0===i||i.forEach((t=>e.addComment(t))),r.hasMore?e.dispatchEvent(o.GcCommentInnerEvent.HasMoreComments):e.dispatchEvent(o.GcCommentInnerEvent.NoMoreComments),0===n&&e.dispatchEvent(o.GcCommentEvent.AfterFirstLoad),n++)},reset:i,destroy:()=>{e=null}}}},7684:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Plugin=void 0;const o=n(127),i=n(6568),r=n(2505);t.Plugin=()=>{o.PluginManager.add("commentcount",(e=>{i.register(e),r.register(e)}))}},7873:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CommonEditor=void 0;const o=n(9529);t.CommonEditor=(e,t)=>{let n=(0,o.h)("textarea",{class:"gcim__common-editor"});t.containerElement.appendChild(n);let i=!1;setTimeout((()=>n.focus())),n.addEventListener("input",(()=>{i=!0,t.onContentChanged()}));return{destroy:()=>{n.value="",n.remove(),n=null},getContent:()=>n.value,setContent:e=>{n.value=e},getIsDirty:()=>i,getEditor:()=>n}}},7906:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GcComment=void 0;const o=n(8845),i=n(8857),r=n(127),a=n(7286),m=n(8100),s=n(2028),l=n(7266),c=n(7643),d=n(6325),u=n(7677),C=n(9473),A=n(5452),g=n(6409),p=n(2264),h=n(1462),f=n(9129),v=n(2647),E=n(4794);class w{constructor(e,t){var n;this._isReloading=!1;const o=(0,v.FindGcComment)(e);o&&(null===(n=o.destroy)||void 0===n||n.call(o)),m.GcIMCtrlValues.IMCtrlInited=!0,this.htmlCache=e.innerHTML,e.innerHTML="",this._el=e,this.initRegistry(),this._options=(0,s.OptionsUtil)((0,s.resolveConfig)(t||{},this)),this._dataManager=(0,C.DataManager)(this),this.initRender(),this.invokeSetup(),this._loadAdapter=(0,u.LoadAdapter)(this),this.initialize(),(0,v.MarkGcComment)(this)}initialize(){this.beginLoad()}initRender(){this._render=this._options.commentMode===a.GcCommentMode.ChatMode?new i.ChatModeCommentManagerRender(this._el,this):new i.CommentManagerRender(this._el,this)}initRegistry(){this._registry=(0,l.Registry)(this),this._event=(0,d.Event)(this),this._commands=(0,c.Commands)(this),this.initCommands()}invokeSetup(){let e=this.options.setup;if("function"==typeof e)try{e.call(this,this)}catch(e){(0,g.ThrowHelper)().uncapturedError(e).throw()}this._registry.setup(),w.pluginManager.setup(this),this._render.setup()}get userInfo(){return this.options.userInfo}set userInfo(e){this.execCommand(a.GcCommentCommand.ChangeUserInfo,{userInfo:e})}get comments(){return this._render.getComments()}set comments(e){this.execCommand(a.GcCommentCommand.SetComments,{comments:e})}get stickedComment(){return p.stickCommentService.peekComment(this)}set stickedComment(e){var t;(null===(t=this.stickedComment)||void 0===t?void 0:t.id)!==(null==e?void 0:e.id)&&this.execCommand(a.GcCommentCommand.StickComment,{commentId:null==e?void 0:e.id})}get dataManager(){return this._dataManager}initCommands(){this.addCommand(a.GcCommentCommand.Load,(()=>this._loadAdapter.load())),this.addEventListener(a.GcCommentEvent.AfterExecuteCommand,(e=>{e.command===a.GcCommentCommand.ChangeUserInfo&&this.reload()}))}reload(){this._isReloading||(this.clear(),this.beginLoad())}destroy(){this.dispatchEvent(a.GcCommentInnerEvent.Destroy),this._event.destroy(),this._commands.destroy(),this._registry.destroy(),this._options.destroy(),this._render.destroy(),this._loadAdapter.destroy(),this._dataManager.destroy(),this.getElement().innerHTML="",this.getElement().classList.remove(f.GcCommentClassNames.GcCommentManager),this.getElement().removeAttribute(f.GcCommentAttrNames.CommentMode),this.getElement().removeAttribute(f.GcCommentAttrNames.Mobile),this.getElement().removeAttribute(E.CTRL_TYPE),delete this.getElement()[v.CTRL_KEY],this.getElement().innerHTML=this.htmlCache,(0,E.DestroyObjects)(this._render,this._commands,this._event,this._registry,this._options,this._loadAdapter,this._dataManager,this)}addComment(e){this.execCommand(a.GcCommentCommand.AddCommentElement,{comment:e,addPosition:a.AddNewCommentPosition.Bottom})}removeComment(e){this.execCommand(a.GcCommentCommand.DeleteCommentElement,{commentId:e})}updateComment(e){this.execCommand(a.GcCommentCommand.UpdateCommentElement,{comment:e})}replyToComment(e,t){t.parentCommentId||(t.parentCommentId=e),this.execCommand(a.GcCommentCommand.AddReplyCommentElement,{reply:t})}reactToComment(e,t){this.execCommand(a.GcCommentCommand.ReactToComment,{commentId:e,reactChar:t})}sort(e){this.execCommand(a.GcCommentCommand.Sort,{sortInfo:e})}showPreview(){throw new Error("Method not implemented.")}getComment(e){return this._render.getComment(e)}clear(){this.execCommand(a.GcCommentCommand.Clear)}addCommand(e,t){this._commands.register(e,t)}execCommand(e,t){this._commands.execute(e,t)}async beginLoad(){this._isReloading=!0;try{this.execCommand(a.GcCommentCommand.Load,{scrollLoadingSkeletonIntoView:!1})}finally{this._isReloading=!1}}getElement(){return this._el}getHost(){return this._el}get options(){return this._options}get registry(){return this._registry}get elementDom(){return this._render.commentsDom}get renderedCommentsInfo(){return this._render.getRenderedCommentsInfo()}getCommentElement(e){return this._render.getCommentElement(e)}registerOption(e,t,n){this.options.set(e,t,n)}addEventListener(e,t){this._event.addEventHandler(e,t)}removeEventListener(e,t){this._event.removeEventHandler(e,t)}registerEvent(e,t){this._event.registerEvent(e,t)}dispatchEvent(e,t){return this._event.dispatchEvent(e,t)}static setLanguage(e){m.GcIMCtrlValues.IMCtrlInited||(w.LANG=e)}static getLanguage(){return w.LANG}static setResource(e,t,n){(0,A.SR)().setResource(e,t,n)}static get pluginManager(){return r.PluginManager}destroyCommentEditor(){this._render.commentEditorAPI.deactive(!1)}isCommentEditorActive(){return this._render.commentEditorAPI.getIsActive()}}t.GcComment=w,w.LANG=a.GcCommentLanguage.JA,w.MessageManager={messageBox:h.MessageBox},(0,o.expose)("GcComment",w)},7935:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.enhanceType=void 0;t.enhanceType=e=>e},7962:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.buildStickedContainerElement=t.buildStickedCommentElement=t.getCommentDom=void 0;const o=n(7286),i=n(8581),r=n(5452),a=n(3074),m=n(7935);t.getCommentDom=e=>(0,m.enhanceType)(e.elementDom);t.buildStickedCommentElement=(e,t)=>(0,i.buildDomElement)({tag:"div",attrs:[{name:"gcim-comment-id",value:t.id}],classes:["gcim__sticked-comment"],children:[{tag:"div",classes:["gcim__stick-icon","gcim__gccomment-common-img"]},{tag:"div",classes:["gcim__sticked-comment-poster-name"],innerText:t.userInfo.name},{tag:"div",classes:["gcim__sticked-comment-content"],innerText:(0,a.getCommentContentText)(t)},{tag:"div",classes:["gcim__sticked-comment-date"],innerText:e.options.postTimeFormatter(t.postTime)},{tag:"div",classes:["gcim__open-menu","gcim__gccomment-common-img"],events:{click:e=>{const t=e.currentTarget;null==t||t.toggleAttribute("gcim-active"),e.preventDefault(),e.stopPropagation(),(null==t?void 0:t.hasAttribute("gcim-active"))&&document.addEventListener("click",(()=>{null==t||t.removeAttribute("gcim-active")}),{once:!0})}},children:[{tag:"div",classes:["gcim__gccomment-menu"],children:[{tag:"div",classes:["gcim__gccomment-menu-item"],innerText:(0,r.SR)().getResource(r.GcCommentResourceNames.ViewInGcComment),events:{click:n=>{e.execCommand(o.GcCommentCommand.GotoComment,{commentId:null==t?void 0:t.id})}}},{tag:"div",classes:["gcim__gccomment-menu-item"],innerText:(0,r.SR)().getResource(r.GcCommentResourceNames.Unstick),events:{click:t=>{e.execCommand(o.GcCommentCommand.StickComment,{commentId:null})}}}]}]}],events:{click:n=>{n.defaultPrevented||e.execCommand(o.GcCommentCommand.GotoComment,{commentId:t.id})}}});t.buildStickedContainerElement=e=>(0,i.buildDomElement)({tag:"div",classes:["gcim__sticked-comment-container"]})},8100:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GcIMCtrlValues=void 0;class n{static set IMCtrlInited(e){window.GC.InputMan.controlInitialize=e}static get IMCtrlInited(){var e;return null!==(e=window.GC.InputMan.controlInitialize)&&void 0!==e&&e}static get appendDropDownToBody(){return n._appendDropDownToBody}static set appendDropDownToBody(e){n.IMCtrlInited||(n._appendDropDownToBody=e)}static get inputOffset(){return n.__inputOffset}static set inputOffset(e){"number"==typeof e&&e>=0&&(n.__inputOffset=e)}}t.GcIMCtrlValues=n,n._appendDropDownToBody=!1,n.__inputOffset=0},8276:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GcCommentIdService=void 0;t.GcCommentIdService=()=>{let e=0;return{getId:()=>{let t;do{t=`GcComment_${e}`,e++}while(document.getElementById(t));return t}}}},8307:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.register=void 0;const o=n(7286),i=n(5452),r=n(8581),a=n(9129),m=n(2264),s=n(1701);t.register=e=>{const t=e.registry,n=o.GcCommentContextToolbar.StickComment;t.registerCommentContextToolbarItem(n,{shouldAppendItem:()=>!0,text:(e,t)=>(0,m.isCommentAlreadySticked)(e,null==t?void 0:t.id)?(0,i.SR)().getResource(i.GcCommentResourceNames.Unstick):(0,i.SR)().getResource(i.GcCommentResourceNames.Stick),img:()=>(0,r.buildDomElement)({tag:"div",classes:[a.GcCommentClassNames.StickComment,a.GcCommentClassNames.CommonImg]}),onAction:(e,t)=>{e.execCommand(o.GcCommentCommand.StickComment,{commentId:t.id,onSuccess:()=>{var n;s.Tip.hide();const o=null===(n=e.getCommentElement(t.id))||void 0===n?void 0:n.querySelector(".gcim__comment-control"),r=o.getBoundingClientRect().right;s.Tip.show(o,{message:(0,m.isCommentAlreadySticked)(e,null==t?void 0:t.id)?(0,i.SR)().getResource(i.GcCommentResourceNames.Sticked):(0,i.SR)().getResource(i.GcCommentResourceNames.Unsticked),style:{left:`${r}px`,transform:"translateX(-100%)",backgroundColor:"black",color:"white"}},{delay:3e3})}})},tipText:(e,t)=>(0,m.isCommentAlreadySticked)(e,null==t?void 0:t.id)?(0,i.SR)().getResource(i.GcCommentResourceNames.Unstick):(0,i.SR)().getResource(i.GcCommentResourceNames.Stick)})}},8499:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.showNoLicenseWatermark=t.showDomainNotCorrectNagScreen=t.showExpiredNagScreen=t.showLocalhostNoLicenceWatermark=t.showUnlimitedWatermark=t.showEvaluationWatermark=t.showEvaluationExpiredNagScreen=t.showNoLicenseNagScreen=void 0;const o=n(9529),i=n(8912);function r(e){return(0,o.h)("div",{style:i.EncryptedString.nagScreenDefaultStyle},(0,o.h)("h1",null,i.EncryptedString.LicenseError),e)}function a(e,t){return(0,o.h)("a",{href:t,target:"_blank",style:i.EncryptedString.linkTagStyle},e)}t.showNoLicenseNagScreen=function(){document.body.appendChild(r((0,o.h)("div",null,i.EncryptedString.noLicenseNagScreenText,(0,o.h)("br",null),a(i.EncryptedString.noLicenseNagScreen_ContactUs,i.EncryptedString.contactUsUrl))))},t.showNoLicenseWatermark=function(){document.body.appendChild((0,o.h)("div",{style:i.EncryptedString.watermarkStyle},a(i.EncryptedString.noLicenseWatermarkText,i.EncryptedString.contactUsUrl)))},t.showDomainNotCorrectNagScreen=function(e){document.body.appendChild(function(e){return r((0,o.h)("pre",null,i.EncryptedString.domainNotCorrectLicensedTo.replace(i.EncryptedString.placeHolder1,e),(0,o.h)("br",null),i.EncryptedString.currentDomainIs.replace(i.EncryptedString.placeHolder1,window.location.hostname),(0,o.h)("br",null),a(i.EncryptedString.domainNotCorrect_ContactUs,i.EncryptedString.contactUsUrl)))}(e))},t.showEvaluationExpiredNagScreen=function(){document.body.appendChild(r((0,o.h)("div",null,i.EncryptedString.evaluationExpiredNagScreenText,(0,o.h)("br",null),a(i.EncryptedString.evaluationExpired_ContactUs,i.EncryptedString.contactUsUrl))))},t.showEvaluationWatermark=function(e){document.body.appendChild(function(e){return(0,o.h)("div",{style:i.EncryptedString.watermarkStyle},a(i.EncryptedString.evalVersionWatermarkText.replace(i.EncryptedString.placeHolder1,e),i.EncryptedString.contactUsUrl))}(e))},t.showUnlimitedWatermark=function(){document.body.appendChild((0,o.h)("div",{style:i.EncryptedString.watermarkStyle},a(i.EncryptedString.unlimitedWatermarkText,i.EncryptedString.contactUsUrl)))},t.showLocalhostNoLicenceWatermark=function(){document.body.appendChild((0,o.h)("div",{style:i.EncryptedString.watermarkStyle},a(i.EncryptedString.localhostNoLicenceWatermarkText,i.EncryptedString.contactUsUrl)))},t.showExpiredNagScreen=function(){document.body.appendChild(r((0,o.h)("div",null,i.EncryptedString.expiredNagScreenText,(0,o.h)("br",null),a(i.EncryptedString.expiredNagScreen_ContactUs,i.EncryptedString.contactUsUrl))))}},8581:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.buildDomElement=void 0;const o=n(6409);t.buildDomElement=e=>{const t=i(e);return t instanceof DocumentFragment||r(t,e),e.children&&a(t,e.children),t};const i=e=>e.el?e.el:e.tag?document.createElement(e.tag):document.createDocumentFragment(),r=(e,t)=>{t.attrs&&c(e,t.attrs),t.classes&&d(e,t.classes),t.styles&&l(e,t.styles),t.id&&s(e,t.id),t.innerText&&(e.innerText=t.innerText),t.innerHTML&&(e.innerHTML=t.innerHTML),t.events&&m(e,t.events)},a=(e,n)=>{null==n||n.forEach((n=>{if(!n)return;let o;o=n.ownerDocument&&n.ownerDocument.defaultView&&"function"==typeof n.ownerDocument.defaultView.HTMLElement&&n instanceof n.ownerDocument.defaultView.HTMLElement?n:(0,t.buildDomElement)(n),o&&e.appendChild(o)}))},m=(e,t)=>{t||(0,o.ThrowHelper)().invalidParameter("events").throw(),Object.keys(t).forEach((n=>{e.addEventListener(n,t[n])}))},s=(e,t)=>{p(t)&&(e.id=t)},l=(e,t)=>{Object.keys(t).forEach((n=>{A(n)?g(t[n])?e.style[n]=t[n]:(0,o.ThrowHelper)().invalidParameter("style.value").throw():(0,o.ThrowHelper)().invalidParameter("style.name").throw()}))},c=(e,t)=>{t.forEach((t=>{t.ignoreNullValue&&!t.value||(u(t.name)?e.setAttribute(t.name,t.value):(0,o.ThrowHelper)().invalidParameter("attr.name").throw())}))},d=(e,t)=>{t.forEach((t=>{C(t)?e.classList.add(t):(0,o.ThrowHelper)().invalidParameter("cls").throw()}))},u=e=>/^[a-zA-Z][\w-]*$/.test(e),C=e=>/^-?[a-zA-Z_][\w-]*$/.test(e),A=e=>/^-?[a-zA-Z_][\w-]*$/.test(e),g=e=>!0,p=e=>/^[A-Za-z][\w\-\:\.]*$/.test(e)},8582:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TextMeasure=void 0;const o=n(4794),i=n(1139);class r{set srcElement(e){this._srcComputedStyle=window.getComputedStyle(e)}measureText(e){if(!e.toString)return 0;var t=[e=e.toString(),this._srcComputedStyle.fontFamily,this._srcComputedStyle.fontSize,this._srcComputedStyle.fontStyle,this._srcComputedStyle.fontWeight,this._srcComputedStyle.textDecoration,this._srcComputedStyle.lineHeight].join("_");let n=r._getFromCache(t);return n||(r._createMeasureElement(),n=r._realMeasure(e,this._srcComputedStyle.fontFamily,this._srcComputedStyle.fontSize,this._srcComputedStyle.fontStyle,this._srcComputedStyle.fontWeight,this._srcComputedStyle.textDecoration,this._srcComputedStyle.lineHeight,null),r._addCache(t,n)),n.Width+5}static _getFromCache(e){return r._measureCache[e]}static _addCache(e,t){r._cacheCount>2e3&&(r._measureCache={},r._cacheCount=0),r._cacheCount++,r._measureCache[e]=t}static _createMeasureElement(){if(null==r._measureElement){var e=document.createElement("div");e.style.position="absolute",e.style.border="solid 0px",e.style.left="-100000px",e.style.top="-100000px";var t=(0,o.createTextNode)("");e.appendChild(t),document.body.appendChild(e),r._measureElement=e,r._measureTextElement=t}}static _realMeasure(e,t,n,a,m,s,l,c){var d,u,C,A=r._measureElement,g=r._measureTextElement;A.style.fontFamily=t,A.style.fontSize=n,A.style.fontStyle=a,A.style.fontWeight=m,A.style.textDecoration=s,A.style.lineHeight=l,g.nodeValue=(0,o.encodingTextForCreateTextCode)(e),A.getBoundingClientRect?void 0!==(d=A.getBoundingClientRect()).width?(u=Math.ceil(d.width),C=Math.ceil(d.height)):(u=Math.ceil(d.right-d.left),C=Math.ceil(d.bottom-d.top)):(u=A.clientWidth,C=A.clientHeight);var p={Width:u,Height:C};return i.Browser.isPad()||(g.nodeValue=""),p}static MeasureText(e,t,n,o){r._createMeasureElement();t.parentNode;var i=t,a=document.body.contains(t);a||(i=t.cloneNode(!0),document.body.appendChild(i));var m=i.currentStyle||window.getComputedStyle(i,null),s=m.fontFamily,l=m.fontSize,c=m.fontStyle,d=m.fontWeight,u=m.textDecoration,C=""===m.lineHeight?"normal":m.lineHeight;a||document.body.removeChild(i);var A,g=[e,s,l,c,d,u,C].join("_"),p=r._getFromCache(g);if(void 0!==p)return{Width:p.Width,Height:p.Height};if(n){for(var h=e.split("\n"),f=0,v=0,E=0;E<h.length;E++){var w=r._realMeasure(h[E],s,l,c,d,u,C,t);""===h[E]&&(w.Height=r._realMeasure("1",s,l,c,d,u,C,t).Height),w.Width>o&&(w.Height=(Math.floor(w.Width/o)+1)*w.Height,w.Width=o),f+=w.Height,v<w.Width&&(v=w.Width)}A={Width:v,Height:f}}else A=r._realMeasure(e,s,l,c,d,u,C,t);return r._addCache(g,A),{Width:A.Width,Height:A.Height}}static _createTextareaMeasureElement(e){if(null==r._measureTextareaElement){var t=document.createElement("textarea");t.style.position="absolute",t.style.border="solid 0px",t.style.left="-100000px",t.style.top="-100000px",t.style.border="solid black 1px",document.body.appendChild(t),r._measureTextareaElement=t}}static MeasureTextareaText(e,t){r._createTextareaMeasureElement(t);var n=t,o=document.body.contains(t);o||(n=t.cloneNode(!0),document.body.appendChild(n));var i=n.currentStyle||window.getComputedStyle(n,null),a=parseInt(i.paddingLeft,10),m=parseInt(i.paddingRight,10),s=parseInt(i.paddingTop,10),l=parseInt(i.paddingBottom,10),c=r._measureTextareaElement;return c.style.fontFamily=i.fontFamily,c.style.fontSize=i.fontSize,c.style.fontStyle=i.fontStyle,c.style.fontWeight=i.fontWeight,c.style.textDecoration=i.textDecoration,c.style.padding=i.padding,c.style.margin=i.margin,c.style.overflowX=i.overflowX,c.style.overflowY=i.overflowY,c.style.width=parseInt(i.width)-a-m+"px",c.style.height=parseInt(i.height)-s-l+"px",c.value=e,c.scrollTop=c.scrollHeight,o||document.body.removeChild(n),c.scrollTop}}t.TextMeasure=r,r._measureCache={},r._cacheCount=0},8706:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.shouldAppendItem=t.name=t.getElement=void 0;const o=n(9529),i=n(9129),r="posttime";t.name=r;t.getElement=(e,t)=>(0,o.h)("div",{class:i.GcCommentClassNames.Time,"gcim-info-type":r},e.options.postTimeFormatter(t.postTime));t.shouldAppendItem=()=>!0},8794:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LocalStorageManager=void 0;const n={save:()=>{},load:()=>null,remove:()=>{}};t.LocalStorageManager=e=>{if(!e.options.keepDraft)return n;let t=`GcComment_${e.getElement().id}_`,o=(n,o)=>`${t}userId_${e.userInfo.id}_commentId_${String(n)}_${o}`;return{save:e=>{const{content:t,state:n}=e,i={content:t,state:n};localStorage.setItem(o(e.commentId,n),JSON.stringify(i))},load:(e,t)=>{const n=localStorage.getItem(o(e,t));if(!n)return null;return{commentId:e,content:JSON.parse(n).content,state:t}},remove:(e,t)=>{localStorage.removeItem(o(e,t))}}}},8845:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.exposeProp=t.expose=void 0,window.GCIM=window.GCIM||{},window.GC=window.GC||{},window.GC.InputMan=window.GCIM;t.expose=(e,t,n)=>{let o=e.split("."),i=n||window.GCIM;for(let e=1;e<o.length;e++)i[o[e-1]]||(i[o[e-1]]={}),i=i[o[e-1]];i[o[o.length-1]]=t};t.exposeProp=(e,t,n)=>{window.GCIM.hasOwnProperty(e)||Object.defineProperty(window.GCIM,e,{configurable:!1,enumerable:!0,get:t,set:n})}},8857:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ChatModeCommentManagerRender=t.CommentManagerRender=void 0;const o=n(7286),i=n(9129),r=n(1629),a=n(8276),m=n(2028),s=n(8581),l=n(1029);class c{constructor(e,t){var n;this.commentsCache=[],this.generatedId=!1,this.postCommentCore=e=>{this.owner.execCommand(o.GcCommentCommand.PostComment,{commentContent:e.content,userInfo:this.getCommentPosterInfo(),isAnonymous:this.commentEditorAPI.getIsAnonymous(),mentionInfo:e.mentionInfo})},this.getIsReplyingToCurrentComment=e=>{var t;return(null===(t=this.getCachedCommentInfo(e))||void 0===t?void 0:t.getDom().commentControlEL.nextElementSibling)===this.addCommentComponentEl},this.updateAddCommentElPosition=(e,t=!1)=>{var n;null===(n=this.getCachedCommentInfo(e))||void 0===n||n.getDom().commentControlEL.after(this.addCommentComponentEl),this.addCommentComponentEl.setAttribute(i.GcCommentAttrNames.IsReply,`${t}`)},this.restoreElements=e=>()=>{this.restoreElementsCore(e)},this.idService=(0,a.GcCommentIdService)(),e.id||(e.id=this.idService.getId(),this.generatedId=!0),this.owner=t,this.gcCommentElement=e,this.markAttrs(),this.addCommentComponentAPI=i.CommentUIHelper.createAddCommentComponentAPI(t),this.addCommentComponentEl=this.addCommentComponentAPI.element,this.commentManagerEl=i.CommentUIHelper.buildCommentManagerEl(e,t),this.commentsDom=i.CommentUIHelper.createCommentContainerEl(t),this.commentContainerEl=this.commentsDom.container,this.commentManagerEl.appendChild(this.commentsDom.headerWrapper),this.commentManagerEl.appendChild(this.commentsDom.container),this.commentManagerEl.append(null!==(n=this.commentsDom.loadMore)&&void 0!==n?n:""),this.commentManagerEl.appendChild(this.commentsDom.footerWrapper),this.commentEditorAPI=(0,r.CommentEditorAPI)(this.addCommentComponentEl,t,this.confirmCanDestroyEditor.bind(this)),this.registerAddCommentEvent(),this.registerCommands(),this.attachEvents()}setup(){i.CommentUIHelper.buildHeaderAndFooter(this.owner),this.updateAddCommentEl()}registerCommands(){this.owner.addCommand(o.GcCommentCommand.AddCommentElement,((e,t)=>{let n=t.comment;n&&(this.addComment(n,t.addPosition),this.scrollIntoViewIfNeed(n.id,!!t.scrollIntoView))})),this.owner.addCommand(o.GcCommentCommand.AddReplyCommentElement,((e,t)=>{let n=t.reply;n&&(this.addReply(t.reply),this.scrollIntoViewIfNeed(n.id,!!t.scrollIntoView))})),this.owner.addCommand(o.GcCommentCommand.UpdateCommentElement,((e,t)=>{t.comment&&(this.updateCommentElement(t.comment),this.scrollIntoViewIfNeed(t.comment.id,!!t.scrollIntoView))})),this.owner.addCommand(o.GcCommentCommand.DeleteCommentElement,((e,t)=>this.removeComment(t.commentId))),this.owner.addCommand(o.GcCommentCommand.DoReplyCommentAction,((e,t)=>this.doReplyToCommentCommand(t.commentId))),this.owner.addCommand(o.GcCommentCommand.DoEditCommentAction,((e,t)=>this.doEditCommentCommand(t.commentId))),this.owner.addCommand(o.GcCommentCommand.DoDeleteCommentAction,((e,t)=>{var n;if(!i.CommentUIHelper.isGcCommentLogin(this.owner)||!t.commentId)return;let r=null===(n=this.getComment(t.commentId))||void 0===n?void 0:n.comment;r&&this.owner.execCommand(o.GcCommentCommand.DeleteComment,{comment:r})})),this.owner.addCommand(o.GcCommentCommand.Clear,((e,t)=>this.clear())),this.owner.addCommand(o.GcCommentCommand.GotoComment,((e,t)=>this.goToComment(t.commentId))),this.owner.addCommand(o.GcCommentCommand.ChangeUserInfo,((e,t)=>{let n=c.getOptionUserInfo(t);n||(n={id:"",name:"",avatar:""}),this.owner.options.set(m.OptionNames.userInfo,n),this.addCommentComponentAPI.updateUserInfo()})),this.owner.addCommand(o.GcCommentCommand.SetComments,((e,t)=>this.setComments(t.comments))),this.owner.addCommand(o.GcCommentCommand.PostComment,((e,t)=>this.postCommentContent(t))),this.owner.addCommand(o.GcCommentCommand.ReplyToComment,((e,t)=>this.replyToComment(t))),this.owner.addCommand(o.GcCommentCommand.DeleteComment,((e,t)=>this.doDeleteCommentCommand(t))),this.owner.addCommand(o.GcCommentCommand.UpdateComment,((e,t)=>this.updateComment(t)))}markAttrs(){(l.Device.isMobile()||l.Device.isTablet()||l.Device.isIpadOS())&&(0,s.buildDomElement)({el:this.gcCommentElement,attrs:[{name:i.GcCommentAttrNames.Mobile,value:"true"}]})}getComments(){return this.commentsCache.filter((e=>!e.getParentInfo())).map((e=>e.getComment()))}getRenderedCommentsInfo(){return this.commentsCache.map((e=>({comment:e.getComment(),element:e.getDom().commentEL})))}getComment(e){let t=this.getCachedCommentInfo(e);return t?{comment:t.getComment(),element:t.getDom().commentEL}:null}attachEvents(){this.owner.addEventListener(o.GcCommentEvent.BeforeExecuteCommand,(e=>{var t;if(e.command===o.GcCommentCommand.Load){null===(t=this.commentsDom.loadMore)||void 0===t||t.setAttribute(i.GcCommentAttrNames.Loading,"true");let n=this.commentsDom.loadMore;n&&e.value.scrollLoadingSkeletonIntoView&&i.CommentUIHelper.scrollElementIntoView(n)}})),this.owner.addEventListener(o.GcCommentEvent.AfterExecuteCommand,(e=>{var t;e.command===o.GcCommentCommand.Load&&(null===(t=this.commentsDom.loadMore)||void 0===t||t.setAttribute(i.GcCommentAttrNames.Loading,"false"))})),this.owner.addEventListener(o.GcCommentInnerEvent.HasMoreComments,(e=>{i.CommentUIHelper.showElement(this.commentsDom.loadMore)})),this.owner.addEventListener(o.GcCommentInnerEvent.NoMoreComments,(e=>{i.CommentUIHelper.hideElement(this.commentsDom.loadMore)}))}setComments(e){e=null!=e?e:[],this.owner.clear(),e.forEach((e=>{this.owner.addComment(e)}))}updateAddCommentEl(){let e=this.owner.options.addCommentEditorPosition;this.addCommentComponentEl.setAttribute(i.GcCommentAttrNames.Position,e),e===o.GcCommentEditorPosition.Top?i.CommentUIHelper.addToLast(this.commentsDom.header,this.addCommentComponentEl):i.CommentUIHelper.addToFirst(this.commentsDom.footer,this.addCommentComponentEl)}registerAddCommentEvent(){this.addCommentComponentEl.querySelector(".gcim__add-comment").addEventListener("click",(()=>{this.commentEditorAPI.active(o.GcCommentCreateEditorReason.AddComment,null,(()=>{}),this.postCommentCore),this.addCommentComponentAPI.useDefaultWatermark()}))}getCommentPosterInfo(){return this.commentEditorAPI.getIsAnonymous()?this.owner.options.anonymousUserInfo:this.owner.options.userInfo}async postCommentContent(e){var t,n;if(!i.CommentUIHelper.isGcCommentLogin(this.owner))return;let r=null!==(n=null!==(t=e.comment)&&void 0!==t?t:await this.owner.dataManager.commentsManager.createComment(c.getOptionUserInfo(e).id,e.commentContent,e.mentionInfo))&&void 0!==n?n:i.CommentUIHelper.createRandomComment(c.getOptionUserInfo(e),e.commentContent,e.mentionInfo);r&&this.owner.execCommand(o.GcCommentCommand.AddCommentElement,{comment:r,scrollIntoView:!0,addPosition:this.owner.options.addNewCommentTo})}createCreateCommentDomInfo(e){var t;let n=this.owner.options.commentAction.map((e=>this.owner.registry.getCommentAction(e))),i=this.owner.options.commentInfoAction.map((e=>this.owner.registry.getCommentInfoAction(e))),r=!0;return this.owner.options.commentMode===o.GcCommentMode.ChatMode&&(r=e.userInfo.id!==(null===(t=this.owner.options.userInfo)||void 0===t?void 0:t.id)||this.owner.options.showCurrentUserName),{showUserName:r,showAvatar:this.owner.options.showIcon,commentFormatter:this.owner.options.commentFormatter,avatarType:this.owner.options.avatarType,commentActions:n,commentInfoActions:i}}addComment(e,t=this.owner.options.addNewCommentTo){let n=this.getCachedCommentInfo(e.parentCommentId),r=this.createAndCacheComment(e);n?n.addChild(r):t===o.AddNewCommentPosition.Bottom?this.commentContainerEl.appendChild(r.getDom().commentEL):i.CommentUIHelper.addToFirst(this.commentContainerEl,r.getDom().commentEL),this.renderChildComments(e)}addReply(e){let t=this.getCachedCommentInfo(e.parentCommentId);if(t){let n=this.createAndCacheComment(e);t.addChild(n,!0)}}scrollIntoViewIfNeed(e,t){var n,o;if(t){let t=null===(o=null===(n=this.getCachedCommentInfo(e))||void 0===n?void 0:n.getDom())||void 0===o?void 0:o.commentControlEL;t&&(i.CommentUIHelper.scrollElementIntoView(t),this.highlightElement(t))}}createAndCacheComment(e){let t=this.preprocessingComment(e),n=this.createCommentDom(t),o=this.createCommentInfo(t,n);return this.commentsCache.push(o),o}preprocessingComment(e){var t,n,o,i,r;let a=Object.assign({},e);return a.id=null===(t=a.id)||void 0===t?void 0:t.toString(),a.replies=null!==(n=a.replies)&&void 0!==n?n:[],a.reactions=null!==(o=a.reactions)&&void 0!==o?o:[],a.parentCommentId=null===(i=a.parentCommentId)||void 0===i?void 0:i.toString(),a.mentionInfo=null!==(r=a.mentionInfo)&&void 0!==r?r:[],a}async doDeleteCommentCommand(e){var t;if(!i.CommentUIHelper.isGcCommentLogin(this.owner))return;if(!(null===(t=null==e?void 0:e.comment)||void 0===t?void 0:t.id))return;let n=!1;if("boolean"==typeof e.canDelete)n=e.canDelete;else if(n=confirm(this.owner.options.warningMessage.confirmDeleteComment),n){let t=await this.owner.dataManager.commentsManager.deleteComment(e.comment.id);"boolean"==typeof t&&(n=t)}if(n){if(!i.CommentUIHelper.isCommentPostedByCurrentUser(this.owner,e.comment))return;this.shouldDestroyEditor(e.comment)&&this.commentEditorAPI.deactive(),this.owner.removeComment(e.comment.id)}}shouldDestroyEditor(e){var t;if(this.commentEditorAPI.getIsActive()){let n=this.commentEditorAPI.getTargetCommentId();if(null===(t=this.getCachedCommentInfo(n))||void 0===t?void 0:t.isChildOrSelf(e.id))return!0}return!1}restoreElementsCore(e){i.CommentUIHelper.showElement(e.getDom().contentEL),i.CommentUIHelper.showElement(e.getDom().commentActionEL),this.addCommentComponentEl.style.paddingLeft="",this.owner.options.commentMode!==o.GcCommentMode.ChatMode&&this.addCommentComponentEl.classList.remove(i.GcCommentClassNames.HighlightElement),this.updateAddCommentEl(),e.getDom().commentEL.removeAttribute("gcim-editing")}confirmCanDestroyEditor(){return confirm(this.owner.options.warningMessage.stopEditing)}preActiveEditor(e,t,n){this.updateAddCommentElPosition(e,n),n||(i.CommentUIHelper.hideElement(t.getDom().contentEL),i.CommentUIHelper.hideElement(t.getDom().commentActionEL))}doReplyToCommentCommand(e){if(!i.CommentUIHelper.isGcCommentLogin(this.owner)||!e)return;let t=this.getCachedCommentInfo(e);if(t){if(this.getIsReplyingToCurrentComment(e))return;let n=()=>{this.preActiveEditor(e,t,!0)},i=e=>{this.owner.execCommand(o.GcCommentCommand.ReplyToComment,{userInfo:this.getCommentPosterInfo(),replyContent:e.content,parentComment:t.getComment(),isAnonymous:this.commentEditorAPI.getIsAnonymous(),mentionInfo:e.mentionInfo}),this.restoreElements(t)()};this.commentEditorAPI.active(o.GcCommentCreateEditorReason.ReplyToComment,e,(()=>{n()}),i,this.restoreElements(t),void 0)}}async replyToComment(e){var t,n;if(!i.CommentUIHelper.isGcCommentLogin(this.owner))return;let r=null!==(n=null!==(t=e.reply)&&void 0!==t?t:await this.owner.dataManager.commentsManager.createComment(c.getOptionUserInfo(e).id,e.replyContent,e.mentionInfo,e.parentComment.id))&&void 0!==n?n:i.CommentUIHelper.createRandomComment(c.getOptionUserInfo(e),e.replyContent,e.mentionInfo,e.parentComment.id);r&&this.owner.execCommand(o.GcCommentCommand.AddReplyCommentElement,{reply:r,scrollIntoView:!0})}doEditCommentCommand(e){if(!i.CommentUIHelper.isGcCommentLogin(this.owner)||!e)return;let t=this.getCachedCommentInfo(e);if(i.CommentUIHelper.isCommentPostedByCurrentUser(this.owner,null==t?void 0:t.getComment())&&t){let n=()=>{this.preActiveEditor(e,t,!1),this.owner.options.commentMode!==o.GcCommentMode.ChatMode&&this.addCommentComponentEl.classList.add(i.GcCommentClassNames.HighlightElement)},r=e=>{this.owner.execCommand(o.GcCommentCommand.UpdateComment,{comment:t.getComment(),newContent:e.content,userInfo:this.owner.options.userInfo,mentionInfo:e.mentionInfo}),this.restoreElements(t)()},a=e=>{let n=t.getComment().content;"string"==typeof n&&e.setContent(n)};this.commentEditorAPI.active(o.GcCommentCreateEditorReason.EditComment,e,(()=>{n()}),r,this.restoreElements(t),a)}}async updateComment(e){var t,n;if(!i.CommentUIHelper.isGcCommentLogin(this.owner))return;let r=null!==(n=null!==(t=e.updatedComment)&&void 0!==t?t:await this.owner.dataManager.commentsManager.updateCommentContent(e.comment,e.newContent,e.mentionInfo))&&void 0!==n?n:i.CommentUIHelper.updateComment(e.comment,e.newContent,e.mentionInfo);r&&this.owner.execCommand(o.GcCommentCommand.UpdateCommentElement,{comment:this.preprocessingComment(r),scrollIntoView:!0})}getCachedCommentInfo(e){if(e)for(let t of this.commentsCache)if(t.getCommentId()===e)return t;return null}removeComment(e){var t,n;if(!e)return;let o=this.getCachedCommentInfo(e);if(o){(null==o?void 0:o.getParentInfo())&&(null===(t=o.getParentInfo())||void 0===t||t.removeChild(o));let i=null===(n=this.getCachedCommentInfo(e))||void 0===n?void 0:n.remove();null==i||i.forEach((e=>{this.commentsCache.splice(this.commentsCache.indexOf(e),1)}))}}goToComment(e){if(!e)return;let t=this.getCachedCommentInfo(e),n=null==t?void 0:t.getDom().commentControlEL;n&&(i.CommentUIHelper.scrollElementIntoView(n),this.highlightElement(n,!0))}updateCommentElement(e){var t;null===(t=this.getCachedCommentInfo(e.id))||void 0===t||t.updateComment(e)}highlightElement(e,t=!1){var n;(t||e&&this.owner.options.commentMode!==o.GcCommentMode.ChatMode)&&(null===(n=this.previousHighlightElement)||void 0===n||n.classList.remove(i.GcCommentClassNames.HighlightElement),e.classList.add(i.GcCommentClassNames.HighlightElement),e.addEventListener("animationend",(()=>{e.classList.remove(i.GcCommentClassNames.HighlightElement)}),{once:!0}),this.previousHighlightElement=e)}renderChildComments(e){e.replies&&e.replies instanceof Array&&e.replies.forEach((t=>{t.parentCommentId||(t.parentCommentId=e.id),this.addComment(t)}))}getCommentElement(e){let t=this.getCachedCommentInfo(e);return t?t.getDom().commentEL:null}destroy(){this.generatedId&&this.gcCommentElement.removeAttribute("id"),this.gcCommentElement=null,this.addCommentComponentEl=null,this.commentContainerEl=null,this.commentManagerEl=null,this.commentsCache.forEach((e=>{e.destroy()}))}createCommentDom(e){return i.CommentUIHelper.createCommentDom(e,this.createCreateCommentDomInfo(e),this.owner)}createCommentInfo(e,t){let n,i=this.getCachedCommentInfo(e.parentCommentId);switch(this.owner.options.commentMode){case o.GcCommentMode.ThreadMode:n=new u(e,t,this.owner,i);break;case o.GcCommentMode.ListMode:n=new C(e,t,this.owner,i);break;case o.GcCommentMode.ChatMode:n=new A(e,t,this.owner,i)}return n}clear(){this.commentContainerEl.innerHTML="",this.commentsCache=[]}static getOptionUserInfo(e){var t;return null!==(t=e.userinfo)&&void 0!==t?t:e.userInfo}}t.CommentManagerRender=c;t.ChatModeCommentManagerRender=class extends c{constructor(e,t){super(e,t),t.options.addCommentEditorPosition===o.GcCommentEditorPosition.FixedBottom&&e.setAttribute(i.GcCommentAttrNames.FixedBottomEditor,"true")}preActiveEditor(e,t,n){if(n){let e=i.CommentUIHelper.createCommentAbstractElement(this.owner,t.getComment(),{show:!0,click:()=>{this.commentEditorAPI.updateOkCancelEvent(o.GcCommentCreateEditorReason.AddComment,this.postCommentCore)}});this.restoreCommentAbstractElement=()=>{e.remove()},i.CommentUIHelper.addToFirst(this.commentEditorAPI.getDom().wrapperEL,e)}else t.getDom().commentEL.setAttribute("gcim-editing","true")}restoreElementsCore(e){super.restoreElementsCore(e),this.restoreCommentAbstractElement&&this.restoreCommentAbstractElement()}createCommentDom(e){var t;let n=super.createCommentDom(e);if(e.parentCommentId){let o=i.CommentUIHelper.createCommentAbstractElement(this.owner,null===(t=this.getComment(e.parentCommentId))||void 0===t?void 0:t.comment,{show:!1});o&&i.CommentUIHelper.addToFirst(n.commentControlEL,o)}return n}};class d{constructor(e,t,n,o){this.childCommentInfo=[],this.reactionsAPIMap=new Map,this.comment=e,this.dom=t,this.owner=n,this.parentCommentInfo=o}destroy(){var e,t,n,o,i;this.reactionsAPIMap.forEach((e=>{e.destroy()})),null===(e=this.dom.commentEL)||void 0===e||e.remove(),null===(t=this.dom.commentControlEL)||void 0===t||t.remove(),null===(n=this.dom.contentEL)||void 0===n||n.remove(),null===(o=this.dom.posterNameEL)||void 0===o||o.remove(),null===(i=this.dom.commentActionEL)||void 0===i||i.remove(),this.dom.commentEL=null,this.dom.commentControlEL=null,this.dom.contentEL=null,this.dom.posterNameEL=null,this.dom.commentActionEL=null}getReplies(){var e;return null!==(e=this.getComment().replies)&&void 0!==e?e:[]}getReactionsCount(){let e=0;for(let t of this.reactionsAPIMap.values())e+=t.getReactCount();return e}getCommentId(){return this.comment.id}getParentInfo(){return this.parentCommentInfo}addChild(e,t=!1){this.childCommentInfo.push(e),this.appendReplyToComment(this.getComment(),e),e.setParentCommentInfo(this),this.appendReplyCommentElementToDom(e.dom.commentEL,t,e)}appendReplyToComment(e,t){e.replies?-1===e.replies.indexOf(t.getComment())&&(e.replies=[t.getComment()].concat(e.replies)):e.replies=[t.getComment()]}removeChild(e){this.getComment().replies.splice(this.getComment().replies.indexOf(e.getComment()),1),this.childCommentInfo.splice(this.childCommentInfo.indexOf(e),1)}isChildOrSelf(e){return this.comment.id===e||!!this.parentCommentInfo&&this.parentCommentInfo.isChildOrSelf(e)}getDom(){return this.dom}remove(){let e=[];return e.push(this),this.childCommentInfo.forEach((t=>{t.remove().forEach((t=>{e.push(t)}))})),this.dom.commentEL.remove(),e}updateComment(e){Object.assign(this.comment,e),this.dom.contentEL.innerText="",this.dom.contentEL.appendChild(this.owner.options.commentFormatter(e.content))}getComment(){return this.comment}setParentCommentInfo(e){this.parentCommentInfo=e}getCommentsContainer(){return this.getDom().commentEL.parentElement}get level(){return this.parentCommentInfo?this.parentCommentInfo.level+1:0}}class u extends d{constructor(e,t,n,o){super(e,t,n,o),this.initElements()}initElements(){this.isLastLevel&&this.getDom().commentEL.setAttribute(i.GcCommentAttrNames.IsLastLevel,"true"),this.repliesContainer=i.CommentUIHelper.createRepliesContainer(),this.getDom().commentControlEL.after(this.repliesContainer);let e=this.getComment();if(this.owner.options.loadRepliesOnDemand)if(e.replies.length<e.replyCount&&!this.isLastLevel){let t=e.replyCount-e.replies.length,n=i.CommentUIHelper.createThreadModeReplyLoadMore(t,this.owner);this.repliesContainer.after(n),n.addEventListener("click",(async()=>{let t=await this.owner.dataManager.commentsManager.loadCommentReplies(e,e.replies.length);t.hasMore||n.replaceWith(i.CommentUIHelper.createThreadModeExpandCollapseReply(this.owner,e,this.level)),t.comments.forEach((t=>{this.owner.replyToComment(e.id,t)}))}))}else if(e.replies&&0!==e.replies.length){let t=i.CommentUIHelper.createThreadModeExpandCollapseReply(this.owner,e,this.level);this.repliesContainer.after(t)}}appendReplyCommentElementToDom(e,t,n){let r=this.owner;0!==r.options.replyLevel&&this.isLastLevel?(n.getDom().posterNameEL.after(i.CommentUIHelper.createThreadModeReplyToInfo(this.owner,this.getComment())),t&&r.options.addNewCommentTo===o.AddNewCommentPosition.Top?i.CommentUIHelper.addToFirst(this.parentCommentInfo.repliesContainer,e):this.getDom().commentEL.parentElement.appendChild(e)):t&&r.options.addNewCommentTo===o.AddNewCommentPosition.Top?i.CommentUIHelper.addToFirst(this.repliesContainer,e):this.repliesContainer.appendChild(e)}findLastLevelParentComment(){for(;this.isLastLevel;)return this.parentCommentInfo.findLastLevelParentComment();return this}appendReplyToComment(e,t){let n=this.findLastLevelParentComment();return super.appendReplyToComment(n.getComment(),t)}get isLastLevel(){let e=this.owner;return 0!==e.options.replyLevel&&e.options.replyLevel<=this.level}destroy(){super.destroy(),this.repliesContainer=null}}class C extends d{appendReplyCommentElementToDom(e,t=!1){var n;t?this.getDom().commentEL.after(e):null===(n=this.getCommentsContainer())||void 0===n||n.appendChild(e)}}class A extends C{constructor(e,t,n,o){super(e,t,n,o),this.contextToolbarElement=null,t.commentEL.setAttribute(i.GcCommentAttrNames.PostByCurrentUser,`${i.CommentUIHelper.isCommentPostedByCurrentUser(n,e)}`),t.commentControlEL.addEventListener("mouseenter",(()=>this.handelMouseIn(e))),t.commentControlEL.addEventListener("mouseleave",(e=>{this.handelMouseLeave()}))}handelMouseLeave(){var e;null===(e=this.contextToolbarElement)||void 0===e||e.remove(),this.contextToolbarElement=null}handelMouseIn(e){this.contextToolbarElement&&this.contextToolbarElement.remove();let t=i.CommentUIHelper.buildChatModeContextToolbar(this.owner,e);t.children.length>0&&(t.addEventListener("click",(()=>{this.handelMouseLeave()})),i.CommentUIHelper.addToLast(this.getDom().commentControlEL,t),i.CommentUIHelper.adjustPopupPosition(this.getDom().commentControlEL,t,o.Position.Top,o.GcCommentAlign.Right),this.contextToolbarElement=t)}appendReplyCommentElementToDom(e,t=!1){var n;t&&this.owner.options.addNewCommentTo===o.AddNewCommentPosition.Top?i.CommentUIHelper.addToFirst(this.getCommentsContainer(),e):null===(n=this.getCommentsContainer())||void 0===n||n.appendChild(e)}}},8912:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EncryptedString=void 0;const o=n(4794);let i={LicenseKey:r("TlZ5Zte=","GjWzUlQ="),algorithmCode:r("YxbJdhQ9Z=","Wn3pGt2kQ="),publicKey:r("cVblSV","HiGj25"),productCode:r("cJZVdNZU","HvHjEvG="),Id:r("SQ","W="),Evl:r("RZ","Xs"),CNa:r("Q5","0h"),Dms:r("R1","Gz"),Exp:r("Rh","Xw"),Crt:r("QJ","30"),Prd:r("UJ","Hk"),C:r("Q=","w="),productCodeValue:r("RtR=","EYg="),algorithmCodeValue:r("QE","j="),publicKeyValue:r("bYeJV9YNRdZRaMcgRJWUStclMIdRZEdQQtVNU4RoMkUdbBMNatTdQBQ4QddBNdcFclZVaZRAV1cNaVaZcpdZdgQhbZK9RJTpUdMhW0U9TFTsVhNZUhUUSRbtL9RdS9WZdNYxQFNFTlYRUBUBMsRpThONLdeMLlSlMdUFRtMcKhTZSJRZZJTgNlUFQ8YdRFM5VxRlRJdQZZbRYFTJQBOpSFYNahdJNlepbReVP0","Dvni2TmMnFXGD4kzXCk5CDW41r1skx01isWDWrU2E0kyT4XGmpF3jqW2lajXFiULmPGvX4Hx2qzx0EHi2QG23ykpDvy0HkUR0zTXmyGRF1C5maEOkVVznp2l0aUIkkV3kHW6mklG2WkCVlHTyr063OFOzsV10k251KmW2Czw0ijo3hGV1lFyn4mLy1Vu0Kku0v3B1j15Fqzi0anyTVUW14Vz2kjwDYkrHYD3T="),nagScreenDefaultStyle:r("d9OAMUbVdoNAOBLlZVOAMAMAMAOBcFcZc0IRY5bFZgNALANAKsL1LRY5Z9bodJbNYRK0MUI0MUOBZlaQIQMBORcBYkIJbNOJYtc9bQY9bIIJYNONb9OBalZtYRa5OAMBOJe1apbcIJcRc1bgdhdUcBYUIBZ1a5OBcla9OBahZtbgchZ9OAIleANBIheBZJKAIAIAIAMQLAIEcgMVeANBIJYEMwMwMwM4MkIAMReAOBINeBZJKAIAIAIAMkY9bIIJYNOJYtc9bQY9bIIdaROZbQZFaxOASVdVaNJwQJYwLNbMcVaYcFZlZoMhes","Gwi1C7GmDgTly6WuG4iyDwDwDwy0mu2vm6HyWzG0StTlCtTlTgWzXyWzmyTgHhnsXlC1CsC1CpyoWnH6DwH42p3sX6Gs2r2h2nm1mt2s36GsWr2vGyi3G0TwWkWniyH42vCzXpm6Gvmlii372pGt3h26HySsWl3v20WuimXlDi3t2hG3iwDwC0n4DwCy2hDsDsDsDuTpCwDxHgTwCt34HnmoCgCgCgCxisDgjwCzH4DwCy2hDsDsDsDui72s36GsWr2h2nm1mt2s36HoXl2vntmtW5inGsm0WhynXpWnHhnt2yW7GkGuzgzwD="),linkTagStyle:r("Y9bIINRNOA","2s36CGjED="),watermarkStyle:r("c9aRb4IZeVOBYRa5OAcgIJYtc9bQIJYgNUIINwMUKsY9LNYRdocdYgLALALALIKAcgMBIEcgIZbQclZoMFdse1bReoMAMAMAMsbBYleoM4OBaNbFOBb9asdlaJbleodlaJZsaVZhOBdROBaRaoYVbsdJbNbJOBb5OBbRb0IBesclaQIBes","GzXp26GpGkywWkWni1H7Gh2nm1m6HniyTsD1Sgj1Tgm4XoWvzgmiSwCwCwCwj1SwHgH4DwH7Gvnt26TgTwDgipmlDgjwDwDwDg3h20TgC4ykXwG5iiGjzgmzWpG0TgmzWsTgGp20ihXvy3W0DgX0zgHhnm3tiu2lyi3026DwDgmnH6DwD="),loopbackIp:r("MILAM4","T3juCx"),loopbackIp6:r("WoM0","z6V="),localhostHostName:r("b9YxbN","GjWo30"),fileProtocol:r("ZlZo","msT="),noLicenseNagScreenText:r("4O4K4K4K5C5y5y5SIlcVTFSM5y4O4O4K4K4O5m4G4G5i5S4G4O4O4K4O5K5K4G4G4G5i6m4G4K4G4G4G4G4CCilSoOkerehOqOlOnOtOvOkOvOuOrSgagehOqmjWgOkOlanijOrWtWiOrrvrp7lbp3gjgvgTmjqfg/gDgXgTgI","4h434m45qqbPLa6+EuH0WulKps4I4p4k4i4r4I4u4UYp5o4v4t484r4r5waD4u4/4rY2ZQ4V4M4m4E4+4Z4Cupe+eCubuaOBOB+B+CeDODODOBOBu4OZuaOBuFe4+CuBOkOouBugOQOBwlInLlrmap6jajZn7o4jYjajZjYjI="),noLicenseNagScreen_ContactUs:r("4O4K4K4O4K4K4O4G4G4G4G","4p4k474z454t484r4k4E4m"),licenseKeyBadFormat:r("4O4K4K4O4K4K4O4G524G4G4G4K4G4G4K4C","4p4k474z454t484Mqj4X4P4C4K4+4b4T4C"),licenseKeyBadFormat_ContactUs:r("4O4K4K4O4K4K4O4G4G4G4G","4p4k474z454t484r4k4E4m"),evalVersionWatermarkText:r("4O4K4K4K5C5y5y5SIlcVTFSMCOiOqOpOoOqOrOvOraiWuanmkOraiOiBM05e4G4G4C","4h434m45qqbPLa6+EuH0WulguDODeCOCuD+CeDOBuceKec+W+B+u+Ci7Xgpl4n4Z4C"),unlimitedWatermarkText:r("S5dRY5UOhOoOoOlOqOsOvOtOpOsOg=","WwXNWK+D+DuCuD+DuCeDOC+D+D+Ag="),localhostNoLicenceWatermarkText:r("4K4O4O4K4O4K4O4O4G525S4G4G4G4KS5dRY5UOrOqOpOuOsOuOjirWmOlOjOpOhOvOmOkOgrvrp7g7gfgrl/gTkjg/gvg/gDgXgTgI","4i4X4q4x48434n4z4nL/5o4X4m4E4LWwXNWK+BuDeCOC+D+CeBOoeuuBeCOBuBOBuB+C+AglInLjbjajYlYjYlIjojZjYjajZjYjI="),noLicenseWatermarkText:r("TVQlUBbBd1bpCOqOpOuOsOuOjirWmOlOjOpOhOvOmOk=","UT0VyJn1EhkTuDeCOC+D+CeBOoeuuBeCOBuBOBuB+Cw="),contactUsUrl:r("aRcML9ZZb9ZIbVYlc5c9aNbNLpdFYJcQ","H0H6ykXlGwXuWz21yqCsWlnl2hmz3pH="),evaluationExpiredNagScreenText:r("6m565y6a4G5W5q4G4G4G4G4C","KVLhpfZT4M7CLG4X4+4X4f4C"),evaluationExpired_ContactUs:r("6O5O4G4G6O5W4G5u6u4K4O4K4K4O4K4G6m5S4G5y5S4G4G4G5W4G5C4K4G4G4G4G4G4C","K9ZB4u4UL8Yl4u54KH4E4p4k474z454uKz7w4vbK6+4+4n4KZP4EZI4P4b4P4g4V4E4C"),expiredNagScreenText:r("4O4K4K4O4K4G5S5q4G4G4G4G4C4O4K4K4O4K4K5u5a4G4G4G4G7y","4p4k474z454MaxY54X4+4X4f4C4p4k474z454Sp0pw4X4+4Z4L7f"),expiredNagScreen_ContactUs:r("4O4K4K4O4K4K5u5a4G4K","4p4k474z454Sp0pw4Z4L"),domainNotCorrectLicensedTo:r("4G4G4O4K4K4O4K4GIsfDgviLgrvPgbgngzgbgTg7gngI","4T4u4p4k474z454vHxSjalbjolZjajojojajYjbjZjI="),currentDomainIs:r("5+5y4G4O4O4K4O4GIsfDgfgngI","4+Zo4u4J4h4k4z4vHxSjajZjI="),domainNotCorrect_ContactUs:r("4G4G5W6G4K6e5G4G4K4G4GTVQlUOqmoeoOlOpOjOoOlOhOg=","4T4uZPaM4SKjr64Z4L4r4vUT0V+B+A+1eB+BuB+BOBeBOAg="),LicenseError:r("4O4K4K4O4K4K4O4O","4p4k474z454o4p48"),placeHolder1:r("eF","z9"),readyState:r("cVZldFZ=","mhHTG0Q="),complete:r("Y9cxdU","2tGlG=")};function r(e,t){t=t||"";let n="";for(let o=0;o<e.length;o++)n+=e[o],n+=t[o]||"";return(0,o.base64DecodeUnicode)(n)}t.EncryptedString=i},8956:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const o=n(6769),i=e=>!1===e?{block:"end",inline:"nearest"}:(e=>e===Object(e)&&0!==Object.keys(e).length)(e)?e:{block:"start",inline:"nearest"};t.default=function(e,t){if(!e.isConnected||!(e=>{let t=e;for(;t&&t.parentNode;){if(t.parentNode===document)return!0;t=t.parentNode instanceof ShadowRoot?t.parentNode.host:t.parentNode}return!1})(e))return;const n=(e=>{const t=window.getComputedStyle(e);return{top:parseFloat(t.scrollMarginTop)||0,right:parseFloat(t.scrollMarginRight)||0,bottom:parseFloat(t.scrollMarginBottom)||0,left:parseFloat(t.scrollMarginLeft)||0}})(e);if((e=>"object"==typeof e&&"function"==typeof e.behavior)(t))return t.behavior((0,o.compute)(e,t));const r="boolean"==typeof t||null==t?void 0:t.behavior;for(const{el:a,top:m,left:s}of(0,o.compute)(e,i(t))){const e=m-n.top+n.bottom,t=s-n.left+n.right;a.scroll({top:e,left:t,behavior:r})}}},8970:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.checkLicense=t.isLicenseAvailable=void 0;const o=n(8912),i=n(8499);window.GCIM=window.GCIM||{},window.GCIM.ph=!function(){var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t="undefined"!=typeof window,n=String.fromCharCode,o=t&&window.Uint8Array||function(t){var n;if("number"==typeof t){n=new Array(t);for(var o=0;o<t;++o)n[o]=0}else n=t.slice(0);return n.buffer=n,n.byteLength=n.length,"object"===(void 0===t?"undefined":e(t))&&t.buffer&&(n.buffer=t.buffer),n},i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",r="object"==("undefined"==typeof global?"undefined":e(global))&&global&&global.Object===Object&&global,a="object"==("undefined"==typeof self?"undefined":e(self))&&self&&self.Object===Object&&self,m=r||a;function s(e,t,n,o){return 1==e.length||e.splice(n,1,o(e.splice(t,1,o(e[n]))[0])),e}function l(e){for(var t=e.split(""),o=function(e){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=e.charCodeAt(0);return o>=65&&o<=90?e.toLowerCase():o>=97&&o<=122?e.toUpperCase():o>=48&&o<=57?n(48+(o-48+10+t)%10):e}(e,-1)},i=t.length-5;i>=0;i--)s(t,i+1,i+3,o),s(t,i,i+2,o);return t.join("")}function c(e){var t,n,o,r,a,m,s,l,c=[],d="",u=i;if((m=(s=e).length%3)>0)for(;m++<3;)d+="=",s+="\0";for(m=0;m<s.length;m+=3)n=(t=s.charCodeAt(m)<<16|s.charCodeAt(m+1)<<8|s.charCodeAt(m+2))>>18&63,o=t>>12&63,r=t>>6&63,a=63&t,c[m/3]=u.charAt(n)+u.charAt(o)+u.charAt(r)+u.charAt(a);return(l=c.join("")).slice(0,l.length-d.length)+d}function d(e){var t,o,r,a,m,s,l,c=[],d=i;l=e;for(var u=0;u<l.length;u+=4)t=(s=d.indexOf(l.charAt(u))<<18|d.indexOf(l.charAt(u+1))<<12|(a=d.indexOf(l.charAt(u+2)))<<6|(m=d.indexOf(l.charAt(u+3))))>>>16&255,o=s>>>8&255,r=255&s,c[u/4]=n(t,o,r),64==m&&(c[u/4]=n(t,o)),64==a&&(c[u/4]=n(t));return c.join("")}function u(e){return(t&&window.atob||d)(e)}function C(e){return(t&&window.btoa||c)(e)}function A(e){if(!e)return"";var t=l(e);t=t.split("").reverse().join("");var n=Math.ceil(t.length/2);return function(e){return decodeURIComponent(Array.prototype.map.call(u(e),(function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join(""))}(t=(t=(t=t.substr(n)+t.substr(0,n)).replace("#","=")).replace("&","=="))}function g(e){for(var t=u(e),n=t.length,i=new o(n),r=0;r<n;r++)i[r]=t.charCodeAt(r);return i.buffer}function p(e){for(var t=new ArrayBuffer(e.length),n=new o(t),i=0,r=e.length;i<r;i++)n[i]=e.charCodeAt(i);return t}function h(e){return"oncomplete"in e&&(e.then=function(t,n){e.resolve=t,e.reject=n},e.oncomplete=function(t){e.resolve(e.result)},e.onerror=function(){e.reject()}),e}window.ph=function(e,i,r,a){var s=t?window.msCrypto?window.msCrypto:window.crypto:void 0,l=function(e,t){try{t="#"+t;var n=e.indexOf(t);if(n>-1)return{prefix:e.substring(0,n),licData:JSON.parse(A(e.substr(n+t.length)))}}catch(e){}return!1}(e,i.aC);if(!l)return a();var c,d,u=l.licData,f=l.prefix+"#"+i.aC,v=(c=g((d=f+JSON.stringify(u.D),C(encodeURIComponent(d).replace(/%([0-9A-F]{2})/g,(function(e,t){return n(parseInt(t,16))}))))),n.apply(null,new o(c)));function E(){return function(e){for(var t=0,n=5381,o=0,i=e.length-1;i>=0;i--){var r=e.charCodeAt(i);t=r+(t<<6)+(t<<16)-t,n=r+((n<<5)+n),o=r+((o<<5)-o),o&=o}var a=t^n^o;return a<0&&(a=~a),a.toString(16).toUpperCase()}(f+JSON.stringify(u.D))===u.H?r(u.D):a()}var w=A("JYx3Gb#8Pb5R"),I=A("VdgJHc#wJb59");if(m[w]&&m[w][I]&&!location.protocol.match(/^https/i))return E();if(!s||!s.subtle)return E();var y={alg:"PS256",e:"AQAB",kty:"RSA",n:(x=i.pK,x.replace(/\+/g,"-").replace(/\//g,"_").replace(/\=+$/,""))};y=window.msCrypto?p(JSON.stringify(y)):y;var x,G={name:"RSA-PSS",saltLength:32,hash:{name:"SHA-256"}};h(s.subtle.importKey("jwk",y,G,!1,["verify"])).then((function(e){h(s.subtle.verify(G,e,g(u.S),p(v))).then((function(e){return e?r(u.D):a()}))}),(function(){return E()}))}}();let r=!0;function a(){setTimeout((()=>{let e=window.ph;if("string"==typeof e)return void(function(e){try{if(!document.getElementById("pagesContainer"))return!1;if(!document.getElementById("pageLoadingCover"))return!1;if(!document.getElementById("pageCover"))return!1;var t=[85,50,70,115,100,71,86,107,88,49,57,75,85,71,103,84,75,106,101,57,77,72,80,52,111,99,107,68,84,102,104,72,85,121,43,71,106,56,105,51,43,118,111,61];if("string"==typeof e){for(var n=e.split(""),o=n.length/2,i=[],r=0;r<o;r++)i.push(n[r]),i.push(n[r+o]);for(r=0;r<t.length;r++)if(t[r]!==i[r].charCodeAt(0))return!1;return!0}return!1}catch(e){return!1}}(e)||l());let t=function(){if(function(){let e=Object.getOwnPropertyDescriptor(window.GCIM,o.EncryptedString.LicenseKey);if(!e)return!1;if(e.get||e.set)return!0;return!1}())return"";if(!window.GCIM[o.EncryptedString.LicenseKey])return"";return window.GCIM[o.EncryptedString.LicenseKey]}();if(!t&&d())return void(0,i.showLocalhostNoLicenceWatermark)();let n={},a=o.EncryptedString.productCodeValue,m=o.EncryptedString.publicKeyValue,c=o.EncryptedString.algorithmCodeValue;n.pC=a,n.pK=m,n.aC=c;try{e(t,n,(e=>{if(!e[o.EncryptedString.Prd].some((function(e){return e[o.EncryptedString.C]===o.EncryptedString.productCodeValue})))return(0,i.showNoLicenseNagScreen)(),void(r=!1);var t;if(!function(e){let t=e[o.EncryptedString.Dms];if(d())return!0;if(!t)return!0;return function(e,t){for(let n=0;n<t.length;n++){let i,r=!1;if(i=t[n],i===o.EncryptedString.loopbackIp&&d())return!0;if(i&&0===i.lastIndexOf("*.",0)&&(r=!0),i=r?i.slice(2):i,i===e)return!0;if(r){let t=e.indexOf("."+i);if(t>0&&t===e.length-i.length-1)return!0}}return!1}(window.location.hostname,t.split(","))}(e))return function(e){let t=e[o.EncryptedString.Dms];(0,i.showDomainNotCorrectNagScreen)(t),r=!1}(e);if(function(e){return e[o.EncryptedString.Evl]}(e)){if(function(e){return void 0===e[o.EncryptedString.Exp]}(e))return void(0,i.showUnlimitedWatermark)();if(s(e))return(0,i.showEvaluationExpiredNagScreen)(),void(r=!1);let n=function(e){let t=e[o.EncryptedString.Exp],n=Date.parse(t.substring(0,4)+"-"+t.substring(4,6)+"-"+t.substring(6,8)),i=new Date,r=i.getFullYear(),a=String(i.getMonth()+1).padStart(2,"0"),m=String(i.getDate()).padStart(2,"0"),s=Date.parse(r+"-"+a+"-"+m);return String((n-s)/864e5)}(e);return t=n,void(0,i.showEvaluationWatermark)(t)}return s(e)?((0,i.showExpiredNagScreen)(),void(r=!1)):void 0}),(()=>{l()}))}catch(e){l()}}),c(500,600))}function m(){return document[o.EncryptedString.readyState]===o.EncryptedString.complete}if(t.checkLicense=a,m())a();else{const e=Date.now(),t=()=>Math.abs(Date.now()-e)>c(240534,369640),n=setInterval((()=>{(m()||t())&&(clearInterval(n),a())}),c(500,600))}function s(e){return function(e){if(null==e)return!1;let t,n=new Date(parseInt(e.substr(0,4))||0,parseInt(e.substr(4,2))-1||0,parseInt(e.substr(6,2))||0),o=new Date,i=Math.ceil((n.getTime()-o.getTime())/864e5);if(t=i<=0)return!0;return!1}(e[o.EncryptedString.Exp])}function l(){(0,i.showNoLicenseNagScreen)(),r=!1}function c(e,t){return Math.floor(Math.random()*(t-e+1))+e}function d(){let e=window.location.hostname;return e===o.EncryptedString.localhostHostName||(e===o.EncryptedString.loopbackIp6||(e===o.EncryptedString.loopbackIp||(o.EncryptedString.fileProtocol===location.protocol||void 0)))}t.isLicenseAvailable=function(){return r}},8976:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.StringInfo=void 0;const o=n(9221),i=n(2366);class r{static GetNextTextElement(e,t,n){var a;if(null==e)return i.CustomExceptions.argumentNullException(),null;var m=e.length;if(t<0||t>=m)return t!=m&&i.CustomExceptions.argumentOutOfRange(),"";var s={},l=o.CharUnicodeInfo.InternalGetUnicodeCategory(e,t,s);a=s.length;var c=r.GetCurrentTextElementLen(e,t,m,l,a,n);return n.length=c,e.substr(t,c)}static GetCurrentTextElementLen(e,t,n,i,r,a){var m;if(t+r===n)return r;var s={},l=o.CharUnicodeInfo.InternalGetUnicodeCategory(e,t+r,s);if(m=s.length,!o.CharUnicodeInfo.IsCombiningCategory(l)||o.CharUnicodeInfo.IsCombiningCategory(i)||i===o.UnicodeCategory.Format||i===o.UnicodeCategory.Control||i===o.UnicodeCategory.OtherNotAssigned||i===o.UnicodeCategory.Surrogate){var c=r;return a.ucCurrent=l,a.currentCharCount=m,c}var d=t;for(t+=r+m;t<n;){s={};if(l=o.CharUnicodeInfo.InternalGetUnicodeCategory(e,t,s),m=s.length,!o.CharUnicodeInfo.IsCombiningCategory(l)){a.ucCurrent=l,a.currentCharCount=m;break}t+=m}return t-d}static GetTextElement(e){for(var t=[],n=0;n<e.length;){var o={},i=r.GetNextTextElement(e,n,o);if(null===i)break;t.push(i),n+=o.length}return t}}t.StringInfo=r},8999:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.shouldAppendItem=t.name=t.getElement=void 0;const o=n(7286),i=n(9529),r=n(9129),a="updatetime";t.name=a;const m=(e,t)=>e.options.updateTimeFormatter(t.updateTime);t.getElement=(e,t)=>{let n=(0,i.h)("div",{class:r.GcCommentClassNames.Time,"gcim-info-type":a},m(e,t));return e.addEventListener(o.GcCommentEvent.AfterExecuteCommand,(i=>{var r,a;i.command===o.GcCommentCommand.UpdateCommentElement&&(null===(a=null===(r=i.value)||void 0===r?void 0:r.comment)||void 0===a?void 0:a.id)===t.id&&(n.innerText=m(e,t))})),n};t.shouldAppendItem=()=>!0},9110:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.register=void 0;const o=n(7286),i=n(9129),r=n(5452),a=n(9529),m=n(3074),s=n(1701);t.register=e=>{const t=o.GcCommentCommentInfoActionItem.CopyLink;e.registry.registerCommentInfoAction(t,{getElement:(e,t)=>{let n=(0,a.h)("div",{class:`${i.GcCommentClassNames.CopyLink} ${i.GcCommentClassNames.CommonImg}`});return n.addEventListener("mouseover",(()=>{s.Tip.show(n,{message:(0,r.SR)().getResource(r.GcCommentResourceNames.Copy)})})),n.addEventListener("mouseout",(()=>{s.Tip.hide({delay:1e3})})),n.addEventListener("click",(()=>{(0,m.copyCommentLink)(e,t,(()=>{s.Tip.show(n,{message:(0,r.SR)().getResource(r.GcCommentResourceNames.Copied),style:{backgroundColor:"black",color:"white"}},{delay:1e3})}))})),n},shouldAppendItem:()=>!0,name:t})}},9126:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.register=void 0;const o=n(7286),i=n(2264),r=n(9129);t.register=e=>{e.addCommand(o.GcCommentCommand.StickComment,(async(t,n)=>{r.CommentUIHelper.isGcCommentLogin(e)&&await(0,i.stickComment)(e,n)})),e.addCommand(o.GcCommentCommand.StickCommentElement,((t,n)=>{(0,i.stickCommentElement)(e,n.commentId)}))}},9129:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CommentUIHelper=t.GcCommentStyle=t.GcCommentAttrNames=t.GcCommentClassNames=void 0;const o=n(9529),i=n(5452),r=n(3892),a=n(7286),m=n(8794),s=n(1701),l=n(8956),c=n(4794);t.GcCommentClassNames={GcCommentManager:"gcim__gccomment",CommentContainer:"gcim__gccomment-comment-container",CommentContainerHeaderFooter:"gcim__header-footer",CommentContainerHeader:"gcim__comment-container-header",StickyHeader:"gcim__sticky-header-container",StickyFooter:"gcim__sticky-footer-container",CommentContainerFooter:"gcim__comment-container-footer",Replies:"gcim__comment-replies",HighlightMarker:"gcim__highlight-marker",Reaction:"gcim__reaction",AddCommentElement:"gcim__gccomment-addcomment-component",AddCommentWrapper:"gcim__gccomment-addcomment-wrapper",Image:"gcim__avatar",AddComment:"gcim__add-comment",CommentContent:"gcim__comment-content",CommentAbstractContent:"gcim__comment-abstract-content",RichCommentContent:"gcim__rich-comment-content",ReactionCollection:"gcim__reaction-collection",AddReaction:"gcim__add-reaction",ActionReaction:"gcim__action-reaction",Time:"gcim__comment-time",Name:"gcim__comment-name",StickComment:"gcim__stick-comment",CopyLink:"gcim__copy-link",DeleteCommentImage:"gcim__delete-comment-image",EditCommentImage:"gcim__edit-comment-image",ReplyCommentImage:"gcim__reply-comment-image",ContextToolbarCollapsePart:"gcim__context-toolbar-collapse-items",ContextToolbarCollapseItem:"gcim__collapse-item",CommentControl:"gcim__comment-control",CommentAction:"gcim__comment-action",Info:"gcim__comment-info",Comment:"gcim__comment",SaveBtn:"gcim__btn gcim__btn-save",CancelBtn:"gcim__btn gcim__btn-cancel",Editor:"gcim__editor",AnonymousCheckbox:"gcim__anonymous-checkbox",DisableAnonymousCheckbox:"gcim__anonymous-checkbox--disabled",AddCommentWrapperInner:"gcim__add-comment-wrapper",AddCommentAction:"gcim__add-comment-action",LoadingEditor:"gcim__loading-editor",ReactionPopup:"gcim__reaction-popup",ShowAllReaction:"gcim__show-all-reaction",LoadMore:"gcim__load-more",LoadMoreText:"gcim__load-more-text",LoadMoreReply:"gcim__load-more-reply",ExpandCollapseReply:"gcim__expand-collapse-reply",CommentSkeleton:"gcim__comment-skeleton",SkeletonContainer:"gcim__skeleton-container",SkeletonInfo:"gcim__skeleton-info",SkeletonName:"gcim__skeleton-name",SkeletonTime:"gcim__skeleton-time",SkeletonContent:"gcim__skeleton-content",SkeletonShortContent:"gcim__skeleton-short-content",SkeletonActionContainer:"gcim__skeleton-action-container",SkeletonAction:"gcim__skeleton-action",SkeletonColor:"gcim__skeleton-color",SkeletonAvatar:"gcim__skeleton-avatar",AnimationMask:"gcim__animation-mask",DescAsce:"gcim__desc-asce",ActionBtn:"gcim__action-btn",Mention:"gcim__gccomment-comment-mention",HR:"gcim__gccomment-hr",VR:"gcim__gccomment-vr",R:"gcim__gccomment-r",CommentHR:"gcim__gccomment-comment-hr",AddReactionImg:"gcim__add-reaction-img",CommonImg:"gcim__gccomment-common-img",DefaultAvatar:"gcim__default-avatar",HighlightElement:"gcim__highlight-element",WarningMessage:"gcim__warning-message",WarningIcon:"gcim__warning-icon",WarningText:"gcim__warning-text",ForceDisplayNone:"gcim__force-display-none",CommentAbstract:"gcim__comment-abstract",CommentAbstractItemName:"gcim__comment-abstract-item-name",CommentAbstractItemTime:"gcim__comment-abstract-item-time",RemoveBtn:"gcim__remove-btn",CommentInfo:"gcim__comment-info",ChatModeSkeletonsContainer:"gcim__skeletons-container",ChatModeSkeletonContainer:"gcim__skeleton-container",ChatModeSkeletonAvatar:"gcim__skeleton-avatar",ChatModeSkeletonChatBubble:"gcim__skeleton-chat-bubble",ChatModeSkeletonInfo:"gcim__skeleton-chat-info",ChatModeSkeletonInfo1:"gcim__skeleton-chat-info1",ChatModeSkeletonInfo2:"gcim__skeleton-chat-info2",ChatModeSkeletonAction:"gcim__skeleton-chat-action",ChatModeSkeletonAction1:"gcim__skeleton-chat-action1",ChatModeSkeletonAction2:"gcim__skeleton-chat-action2",ChatModeSkeletonAction3:"gcim__skeleton-chat-action3",ChatModeSkeletonShimmer:"gcim__shimmer",AddCommentWaterMark:"gcim__add-comment-watermark",ChatModeContextMenu:"gcim__context-toolbar-menu",ExpandToolbarItems:"gcim__expand-toolbar-items-btn",CustomContextToolbarItemImg:"gcim__custom-context-toolbar-item-img",ContextMenuItemDropdownImg:"gcim__context-toolbar-menu-item-dropdown-img",ContextToolbarCollapseItemsDropdown:"gcim__context-toolbar-collapse-items-dropdown",ActionButtonImage:"gcim__action-btn-img",ActionButtonText:"gcim__action-btn-text",ReplyToTriangle:"gcim__reply-to-icon",HeaderFooterLine:"gcim__header-footer-line",LineLeft:"gcim__line-left",LineRight:"gcim__line-right",LineCenter:"gcim__line-center",AvatarImage:e=>`gcim__avatar-${e}`,Selector:e=>`.${e} `},t.GcCommentAttrNames={Reacted:"gcim-reacted",ReactionCount:"gcim-reaction-count",Times:"gcim-times",TargetCommentId:"gcim-target-comment-id",ReactionPopupShowMode:"gcim-show-mode",Loading:"gcim-loading",ReactChar:"gcim-reactChar",Position:"gcim-position",CommentMode:"gcim-comment-mode",LoadingEditor:"gcim-loading",IsReply:"gcim-is-reply",EmptyContentWarning:"gcim-empty-content",IsEditorInline:"gcim-inline-editor",AllowAddComment:"gcim-allowAddComment",PostByCurrentUser:"gcim-post-by-current-user",MentionUserId:"data-user-id",MentionUserName:"data-user-name",IsLastLevel:"gcim-is-last-level",Mobile:"gcim-mobile",FixedBottomEditor:"gcim-fixed-bottom-editor"},t.GcCommentStyle={HeaderFooterZIndex:"var(--gcim__gccomment-header-footer-z-index)",LargeHeaderFooterZIndex:"calc(var(--gcim__gccomment-header-footer-z-index) + 1)",LargerHeaderFooterZIndex:"calc(var(--gcim__gccomment-header-footer-z-index) + 2)"};const d="--gcim__gccomment-avatar-width";class u{static buildCommentManagerEl(e,n){return e.classList.add(t.GcCommentClassNames.GcCommentManager),e.setAttribute(t.GcCommentAttrNames.CommentMode,n.options.commentMode),e}static createCommentContainerEl(e){let n=e.options,i=(0,o.h)("div",{class:`${t.GcCommentClassNames.CommentContainerHeader} ${t.GcCommentClassNames.CommentContainerHeaderFooter}`}),r=(0,o.h)("div",{class:`${t.GcCommentClassNames.CommentContainerFooter} ${t.GcCommentClassNames.CommentContainerHeaderFooter}`}),a=(0,o.h)("div",{class:t.GcCommentClassNames.CommentContainer});return n.showIcon||a.style.setProperty(d,"0px"),{header:i,headerWrapper:(0,o.h)("div",{class:`${t.GcCommentClassNames.StickyHeader}`},i),footer:r,footerWrapper:(0,o.h)("div",{class:`${t.GcCommentClassNames.StickyFooter}`},r),container:a,loadMore:u.createLoadMoreEl(e)}}static buildHeaderAndFooter(e){const t=e.options,n=e.elementDom.header,o=e.elementDom.headerWrapper,i=e.elementDom.footer,r=e.elementDom.footerWrapper;u.buildHeaderFooter(o,n,e.registry,u.removeCommonItems(t.header,t.footer),e),u.buildHeaderFooter(r,i,e.registry,t.footer,e)}static removeCommonItems(e,t){const n=new Set(t.flat().map((e=>"object"==typeof e&&"name"in e?e.name:e)));return e.filter((e=>!!e&&(Array.isArray(e)?e.filter((e=>"object"==typeof e&&"name"in e?!n.has(e.name):!n.has(e))).length>0:"object"==typeof e&&"name"in e?!n.has(e.name):!n.has(e))))}static createAddCommentComponentAPI(e){let n=e.options,i=u.getDefaultAvatar(t.GcCommentClassNames.AvatarImage(n.avatarType)),r=n.showIcon?(0,o.h)("img",{class:t.GcCommentClassNames.AvatarImage(n.avatarType),src:n.userInfo.avatar,alt:"avatar"}):null;null==r||r.addEventListener("error",(()=>{r.after(i),r.remove()}));let s=!!e.options.userInfo.id||e.options.allowAnonymous,l=s?(0,o.h)("p",{class:t.GcCommentClassNames.AddCommentWaterMark},(0,m.LocalStorageManager)(e).load(null,a.GcCommentCreateEditorReason.AddComment)&&e.options.watermark.continueAddComment||e.options.watermark.addComment):u.createNotAllowPostCommentElement(e),c=e.options.showIcon?(0,o.h)("div",{class:t.GcCommentClassNames.Image},r):null,d={element:(0,o.h)("div",{class:t.GcCommentClassNames.AddCommentElement,"gcim-allowAddComment":s},(0,o.h)("div",{class:t.GcCommentClassNames.AddCommentWrapper},c,(0,o.h)("div",{class:t.GcCommentClassNames.AddComment},l))),updateUserInfo:()=>{n.showIcon&&(i.after(r),i.remove(),r.src=n.userInfo.avatar),n.userInfo.id&&d.element.removeAttribute(t.GcCommentAttrNames.AllowAddComment)},get allowAddComment(){return s},useDefaultWatermark:()=>{l.innerHTML="",l.append(e.options.watermark.addComment)}};return d}static createCommentDom(e,n,i){let m,s=n.commentFormatter(e.content);u.updateCommentMentions(s,i),m=i.options.editorConfig.editorType===r.GcCommentEditorType.GcRichTextEditor?(0,o.h)("div",{class:`${t.GcCommentClassNames.CommentContent} ${t.GcCommentClassNames.RichCommentContent}`},s):(0,o.h)("div",{class:t.GcCommentClassNames.CommentContent},s);let l=n.showUserName?(0,o.h)("div",{class:t.GcCommentClassNames.Name},e.userInfo.name):null,c=n.showAvatar?(0,o.h)("img",{class:t.GcCommentClassNames.AvatarImage(n.avatarType),src:e.userInfo.avatar,alt:"avatar"}):null;null==c||c.addEventListener("error",(()=>{let e=c.parentElement;c.remove();let o=u.getDefaultAvatar(t.GcCommentClassNames.AvatarImage(n.avatarType));null==e||e.appendChild(o)}));let d=n.showAvatar?(0,o.h)("div",{class:t.GcCommentClassNames.Image},c):null,C=(0,o.h)("div",{class:t.GcCommentClassNames.Info},l);n.commentInfoActions.forEach((t=>{if(null==t?void 0:t.shouldAppendItem(i,e)){let n=t.getElement(i,e);n&&C.appendChild(n)}}));let A=0===n.commentActions.length?null:(0,o.h)("div",{class:t.GcCommentClassNames.CommentAction});return n.commentActions.forEach((t=>{if(null==t?void 0:t.shouldAppendItem(i,e)){if(t.name===a.GcCommentCommentActionItem.SeparateLine&&""===A.innerHTML)return;let n=t.getElement(i,e);n&&(null==A||A.appendChild(n))}})),i.options.commentMode===a.GcCommentMode.ChatMode?u.buildChatModeCommentDom(e,i,m,l,C,A,d):u.buildCommentDom(e,i,m,l,C,A,d)}static updateCommentMentions(e,n){let o=e.querySelectorAll(t.GcCommentClassNames.Selector(t.GcCommentClassNames.Mention));o&&o.forEach((async e=>{let o=e.getAttribute(t.GcCommentAttrNames.MentionUserId),i=await n.dataManager.userManager.loadUserById(o);i&&(e.textContent=`@${i.name}`)}))}static buildCommentDom(e,n,i,r,m,s,l){let c=(0,o.h)("div",{class:t.GcCommentClassNames.CommentControl},l,(0,o.h)("div",{style:{display:"flex","flex-direction":"column","row-gap":"5px",height:"fit-content"}},m,i,s));return{commentEL:(0,o.h)("div",{class:t.GcCommentClassNames.Comment,"gcim-comment-id":e.id},c,n.options.commentMode===a.GcCommentMode.ThreadMode&&e.parentCommentId?null:(0,o.h)("div",{class:`${t.GcCommentClassNames.HR} ${t.GcCommentClassNames.R} ${t.GcCommentClassNames.CommentHR}`})),contentEL:i,posterNameEL:r,commentControlEL:c,commentActionEL:s}}static buildChatModeCommentDom(e,n,i,r,a,m,s){let l=(0,o.h)("div",{class:t.GcCommentClassNames.CommentControl},i);return{commentEL:(0,o.h)("div",{class:t.GcCommentClassNames.Comment,"gcim-comment-id":e.id},s,a,l,m),contentEL:i,posterNameEL:r,commentControlEL:l,commentActionEL:m}}static createEditorAPI(e){let n=(0,o.h)("div",{class:t.GcCommentClassNames.SaveBtn,tabindex:"0"}," ",(0,i.SR)().getResource(i.GcCommentResourceNames.Save)),r=(0,o.h)("div",{class:t.GcCommentClassNames.CancelBtn,tabindex:"0"}," ",(0,i.SR)().getResource(i.GcCommentResourceNames.Cancel)),a=(0,o.h)("div",{class:t.GcCommentClassNames.Editor}),m=null,s=null;if(e.options.allowAnonymous){let n=(0,o.h)("label",null,(0,i.SR)().getResource(i.GcCommentResourceNames.Anonymous));m=(0,o.h)("input",{type:"checkbox",value:"anonymous",tabindex:"-1"}),s=(0,o.h)("span",{class:t.GcCommentClassNames.AnonymousCheckbox,tabindex:"0"},"  ",m,n),e.options.userInfo===e.options.anonymousUserInfo&&(m.checked=!0,m.disabled=!0,s.classList.add(t.GcCommentClassNames.DisableAnonymousCheckbox)),n.addEventListener("click",(()=>{let e=m;e.checked=!e.checked})),s.addEventListener("keypress",(e=>u.clickIfPressEnterKey(e,m)))}let l=(0,o.h)("div",{class:t.GcCommentClassNames.AddCommentAction},n,r,s),d=(0,o.h)("div",{class:t.GcCommentClassNames.AddCommentWrapperInner},a,(0,o.h)("div",{class:t.GcCommentClassNames.LoadingEditor}),l);const C={okBtn:n,cancelBtn:r,editor:a,wrapperEL:d,addCommentActionContainer:l};return{dom:C,getIsAnonymous:()=>!!m&&m.checked,setIsLoading:e=>{e?d.setAttribute(t.GcCommentAttrNames.LoadingEditor,""):d.removeAttribute(t.GcCommentAttrNames.LoadingEditor)},destroy:()=>{d=null,(0,c.DestroyObject)(C)}}}static clickIfPressEnterKey(e,t){t&&"Enter"===e.key&&t.click()}static hideElement(e,t=!1){e&&(t?e.style.visibility="hidden":e.style.display="none")}static bringAfter(e,t){let n=e.parentElement,o=null==n?void 0:n.querySelectorAll(t);if(o&&0!==o.length){o[(null==o?void 0:o.length)-1].after(e)}else u.bringToFirst(e)}static bringToFirst(e){u.addToFirst(e.parentElement,e)}static showElement(e,t=!1){e&&(t?e.style.visibility="":e.style.display="")}static addToFirstButAfter(e,t,n){let o=e.querySelector(n);o?o.after(t):u.addToFirst(e,t)}static insertToIndex(e,t,n){e&&(n=(n=n<0?0:n)>e.children.length?e.children.length:n,0===e.children.length?u.addToFirst(e,t):e.children.length===n?u.addToLast(e,t):e.children.item(n).before(t))}static addToFirst(e,t){var n;e&&(0===e.children.length?e.appendChild(t):null===(n=e.firstChild)||void 0===n||n.before(t))}static addToLast(e,t){e&&e.appendChild(t)}static addToLastButBefore(e,t,n){let o=e.querySelector(n);o?o.before(t):u.addToLast(e,t)}static buildHeaderFooter(e,n,i,r,m){if(r){u.resolveHeaderFooterItems(r).forEach((r=>{let m=(0,o.h)("div",{class:t.GcCommentClassNames.LineLeft}),s=(0,o.h)("div",{class:t.GcCommentClassNames.LineCenter}),l=(0,o.h)("div",{class:t.GcCommentClassNames.LineRight}),c=(0,o.h)("div",{class:t.GcCommentClassNames.HeaderFooterLine},m,s,l);r.forEach((n=>{let o=i.getHeaderFooterItem(n.name);if(o){n.name===a.GcCommentHeaderFooterItem.Sort&&(e.style.zIndex=t.GcCommentStyle.LargeHeaderFooterZIndex);let i=o.getElement();if(i)switch(n.align){case a.GcCommentAlign.Center:s.appendChild(i);break;case a.GcCommentAlign.Right:l.appendChild(i);break;case a.GcCommentAlign.Left:default:m.appendChild(i)}}})),n.appendChild(c)}))}}static resolveHeaderFooterItems(e){let t=[];return e.forEach((e=>{if("string"==typeof e)t.push([{name:e,align:a.GcCommentAlign.Left}]);else if(e instanceof Array){let n=[];e.forEach((e=>{"string"==typeof e?n.push({name:e,align:a.GcCommentAlign.Left}):"object"==typeof e&&n.push(e)})),t.push(n)}})),t}static createLoadMoreEl(e){if(e.options.loadOnDemand){let n=(0,o.h)("div",{class:t.GcCommentClassNames.LoadMoreText},(0,i.SR)().getResource(i.GcCommentResourceNames.LoadMore)),r=(0,o.h)("div",{class:t.GcCommentClassNames.LoadMore},n,u.getSkeleton(e));return n.addEventListener("click",(()=>e.execCommand(a.GcCommentCommand.Load,{scrollLoadingSkeletonIntoView:!1}))),r}return null}static getSkeleton(e){let n=e.options.avatarType,i=e.options.showIcon;return e.options.commentMode===a.GcCommentMode.ChatMode?(0,o.h)("div",{class:t.GcCommentClassNames.ChatModeSkeletonsContainer},(0,o.h)("div",{class:t.GcCommentClassNames.ChatModeSkeletonContainer,"gcim-location":"left"},i?(0,o.h)("div",{class:`${t.GcCommentClassNames.ChatModeSkeletonAvatar} ${t.GcCommentClassNames.AvatarImage(n)}`}):null,(0,o.h)("div",{class:t.GcCommentClassNames.ChatModeSkeletonChatBubble}),(0,o.h)("div",{class:t.GcCommentClassNames.ChatModeSkeletonInfo},(0,o.h)("div",{class:t.GcCommentClassNames.ChatModeSkeletonInfo1}),(0,o.h)("div",{class:t.GcCommentClassNames.ChatModeSkeletonInfo2})),(0,o.h)("div",{class:t.GcCommentClassNames.ChatModeSkeletonAction},(0,o.h)("div",{class:t.GcCommentClassNames.ChatModeSkeletonAction1}),(0,o.h)("div",{class:t.GcCommentClassNames.ChatModeSkeletonAction2}),(0,o.h)("div",{class:t.GcCommentClassNames.ChatModeSkeletonAction3}))),(0,o.h)("div",{class:t.GcCommentClassNames.ChatModeSkeletonContainer,"gcim-location":"right"},(0,o.h)("div",{class:t.GcCommentClassNames.ChatModeSkeletonChatBubble}),i?(0,o.h)("div",{class:`${t.GcCommentClassNames.ChatModeSkeletonAvatar} ${t.GcCommentClassNames.AvatarImage(n)}`}):null,(0,o.h)("div",{class:t.GcCommentClassNames.ChatModeSkeletonInfo},(0,o.h)("div",{class:t.GcCommentClassNames.ChatModeSkeletonInfo1}),(0,o.h)("div",{class:t.GcCommentClassNames.ChatModeSkeletonInfo2})),(0,o.h)("div",{class:t.GcCommentClassNames.ChatModeSkeletonAction},(0,o.h)("div",{class:t.GcCommentClassNames.ChatModeSkeletonAction1}),(0,o.h)("div",{class:t.GcCommentClassNames.ChatModeSkeletonAction2}),(0,o.h)("div",{class:t.GcCommentClassNames.ChatModeSkeletonAction3}))),(0,o.h)("div",{class:t.GcCommentClassNames.ChatModeSkeletonShimmer})):(0,o.h)("div",{class:t.GcCommentClassNames.CommentSkeleton},i?(0,o.h)("div",{class:`${t.GcCommentClassNames.SkeletonColor} ${t.GcCommentClassNames.SkeletonAvatar} ${t.GcCommentClassNames.AvatarImage(n)}`}):null,(0,o.h)("div",{class:t.GcCommentClassNames.SkeletonContainer},(0,o.h)("div",{class:t.GcCommentClassNames.SkeletonInfo},(0,o.h)("div",{class:`${t.GcCommentClassNames.SkeletonColor} ${t.GcCommentClassNames.SkeletonName}`}),(0,o.h)("div",{class:`${t.GcCommentClassNames.SkeletonColor} ${t.GcCommentClassNames.SkeletonTime}`})),(0,o.h)("div",{class:`${t.GcCommentClassNames.SkeletonColor} ${t.GcCommentClassNames.SkeletonContent}`}),(0,o.h)("div",{class:`${t.GcCommentClassNames.SkeletonColor} ${t.GcCommentClassNames.SkeletonContent}`}),(0,o.h)("div",{class:`${t.GcCommentClassNames.SkeletonColor} ${t.GcCommentClassNames.SkeletonShortContent}`}),(0,o.h)("div",{class:t.GcCommentClassNames.SkeletonActionContainer},(0,o.h)("div",{class:`${t.GcCommentClassNames.SkeletonColor} ${t.GcCommentClassNames.SkeletonAction}`}),(0,o.h)("div",{class:`${t.GcCommentClassNames.SkeletonColor} ${t.GcCommentClassNames.SkeletonAction}`}),(0,o.h)("div",{class:`${t.GcCommentClassNames.SkeletonColor} ${t.GcCommentClassNames.SkeletonAction}`}),(0,o.h)("div",{class:`${t.GcCommentClassNames.SkeletonColor} ${t.GcCommentClassNames.SkeletonAction}`}))),(0,o.h)("div",{class:`${t.GcCommentClassNames.HR} ${t.GcCommentClassNames.R}`}),(0,o.h)("div",{class:t.GcCommentClassNames.AnimationMask}))}static createFindHighlightWrapper(){return(0,o.h)("span",{class:t.GcCommentClassNames.HighlightMarker})}static createRepliesContainer(){return(0,o.h)("div",{class:t.GcCommentClassNames.Replies})}static createThreadModeReplyLoadMore(e,n){return(0,o.h)("div",{class:t.GcCommentClassNames.LoadMoreReply},(0,i.SR)().getResource(i.GcCommentResourceNames.MoreReply))}static createThreadModeExpandCollapseReply(e,t,n){let o=document.createDocumentFragment();switch(e.options.collapseRepliesMode){case a.GcCommentCollapseRepliesMode.NotAllowed:break;case a.GcCommentCollapseRepliesMode.EveryLevel:{let n=u.createThreadModeExpandCollapseReplyElement(e,t);o.appendChild(n)}break;case a.GcCommentCollapseRepliesMode.TopLevel:if(0===n&&!t.parentCommentId){let n=u.createThreadModeExpandCollapseReplyElement(e,t);o.appendChild(n)}}return o}static createThreadModeExpandCollapseReplyElement(e,n){let r=!1,a=(0,i.SR)().getResource(i.GcCommentResourceNames.CollapseReplies),m=(0,i.SR)().getResource(i.GcCommentResourceNames.ExpandReplies),s=(0,o.h)("div",{class:t.GcCommentClassNames.ExpandCollapseReply},a);return s.addEventListener("click",(()=>{let o=e.getCommentElement(n.id).querySelector(t.GcCommentClassNames.Selector(t.GcCommentClassNames.Replies));o&&(r?(s.textContent=a,u.showElement(o),r=!1):(s.textContent=m,u.hideElement(o),r=!0))})),s}static getDefaultAvatar(e){return(0,o.h)("div",{class:`${t.GcCommentClassNames.DefaultAvatar} ${e}`})}static createDiv(e){let t=(0,o.h)("div",null);return t.innerHTML=e,t}static formatUpdateDate(e){return e?`${(0,i.SR)().getResource(i.GcCommentResourceNames.UpdateAt)}: ${u.formatDate(e)}`:""}static formatPostDate(e){return e?`${(0,i.SR)().getResource(i.GcCommentResourceNames.PostAt)}: ${u.formatDate(e)}`:""}static formatDate(e){if(!e||Number.isNaN(e.valueOf()))return"";return`${e.getFullYear()}/${String(e.getMonth()+1).padStart(2,"0")}/${String(e.getDate()).padStart(2,"0")} ${String(e.getHours()).padStart(2,"0")}:${String(e.getMinutes()).padStart(2,"0")}:${String(e.getSeconds()).padStart(2,"0")}`}static createMentionDom(e){return(0,o.h)("span",{class:t.GcCommentClassNames.Mention,"data-user-id":e.id,"data-user-name":e.name,contentEditable:"false"},"@",e.name)}static scrollElementIntoView(e){(0,l.default)(e,{behavior:"smooth",scrollMode:"if-needed",block:"center",inline:"center"})}static isElementVisible(e){if(!e)return!1;const t=e.getBoundingClientRect();if(!(t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)))return!1;let n=e;for(;n;){const e=n.getBoundingClientRect(),o=window.getComputedStyle(n);if("none"===o.display||"hidden"===o.visibility)return!1;const i=o.overflowY,r=o.overflowX;if(("hidden"===i||"scroll"===i)&&(t.bottom>e.bottom||t.top<e.top))return!1;if(("hidden"===r||"scroll"===r)&&(t.right>e.right||t.left<e.left))return!1;n=n.parentElement}return!0}static createWarningMessage(e){return(0,o.h)("div",{class:t.GcCommentClassNames.WarningMessage},(0,o.h)("div",{class:`${t.GcCommentClassNames.WarningIcon} ${t.GcCommentClassNames.CommonImg}`}),(0,o.h)("div",{class:t.GcCommentClassNames.WarningText},e))}static createNotAllowPostCommentElement(e){return(0,o.h)("div",null,e.options.warningMessage.notAllowPostComment)}static createCommentAbstractElement(e,n,i){if(!n)return null;let r,m=e.options.commentFormatter(n.content);"string"!=typeof m&&(m=m.textContent),r=i.show?(0,o.h)("span",{class:t.GcCommentClassNames.RemoveBtn}):null;let s=(0,o.h)("div",{class:t.GcCommentClassNames.CommentAbstract},(0,o.h)("div",{class:t.GcCommentClassNames.CommentInfo},(0,o.h)("span",{class:t.GcCommentClassNames.CommentAbstractItemName},n.userInfo.name),r),(0,o.h)("div",{class:t.GcCommentClassNames.CommentAbstractContent},m));return null==r||r.addEventListener("click",(e=>{s.remove(),i.click&&i.click(),e.preventDefault(),e.stopPropagation()})),s.addEventListener("click",(()=>{e.execCommand(a.GcCommentCommand.GotoComment,{commentId:n.id})})),s}static buildChatModeContextToolbar(e,n){let i=e.options.contextToolbar,r=i.filter((e=>"string"!=typeof e&&e.collapse)),m=i.filter((e=>!r.includes(e))),s=document.createDocumentFragment();m.forEach((t=>{let o=u.buildContextToolbarItem(t,e,n,!0);o&&s.appendChild(o)}));let l=null;if(r.length>0){let i=(0,o.h)("div",{class:`${t.GcCommentClassNames.ExpandToolbarItems} ${t.GcCommentClassNames.CommonImg}`});i.addEventListener("click",(e=>{e.stopPropagation(),u.isElementVisible(l)?u.hideElement(l):(u.showElement(l),u.adjustPopupPosition(c,l,a.Position.Top,a.GcCommentAlign.Right))})),s.appendChild(i),l=(0,o.h)("div",{class:t.GcCommentClassNames.ContextToolbarCollapsePart}),u.hideElement(l),r.forEach((t=>{let o=u.buildContextToolbarItem(t,e,n,!1);o&&l.appendChild(o)}))}let c=(0,o.h)("div",{class:t.GcCommentClassNames.ChatModeContextMenu},s,l);return c}static buildContextToolbarItem(e,t,n,o){let i=t.registry,r="string"==typeof e?e:e.name,a=i.getCommentContextToolbarItem(r);if(a&&a.shouldAppendItem(t,n)){let e=u.createItemElement(a,t,n,o);if(a.onAction&&e.addEventListener("click",(()=>a.onAction(t,n))),a.dropdownItems&&u.addDropdownItems(e,a,t,n),o&&a.tipText&&"function"==typeof a.tipText){let o=!0;e.addEventListener("mouseleave",(()=>{s.Tip.hide(),o=!1})),e.addEventListener("mousedown",(()=>{s.Tip.hide(),o=!1}));const i=u.debounce((i=>{o&&s.Tip.show(e,{message:a.tipText(t,n),position:{x:i.pageX+16,y:i.pageY+16}})}),1e3,!1);e.addEventListener("mousemove",(e=>{o=!0,s.Tip.hide(),i(e)}))}return e}return null}static createItemElement(e,n,i,r){return e.getElement?e.getElement(n,i):r?u.createImageEl(n,i,e.img):(0,o.h)("div",{class:t.GcCommentClassNames.ContextToolbarCollapseItem},u.createImageEl(n,i,e.img),e.text(n,i))}static addDropdownItems(e,n,i,r){let a,m=(0,o.h)("div",{class:`${t.GcCommentClassNames.ContextMenuItemDropdownImg} ${t.GcCommentClassNames.CommonImg}`});e.appendChild(m),e.addEventListener("mouseenter",(()=>{a||(a=(0,o.h)("div",{class:`${t.GcCommentClassNames.ContextToolbarCollapseItemsDropdown} ${t.GcCommentClassNames.ContextToolbarCollapsePart}`}),n.dropdownItems.forEach((e=>{let t=u.buildContextToolbarItem(e,i,r,!1);a.appendChild(t)}))),e.appendChild(a)})),e.addEventListener("mouseleave",(()=>{a.remove()}))}static createImageEl(e,n,i){let r=i(e,n);return"string"==typeof r?(0,o.h)("img",{src:r,alt:"",class:`${t.GcCommentClassNames.CommonImg} ${t.GcCommentClassNames.CustomContextToolbarItemImg}`}):r}static buildCommentActionButton(e,n,i){let r={};switch(e.options.commentActionButtonType){case a.GcCommentActionButtonType.Icon:{let e=(0,o.h)("div",{class:`${t.GcCommentClassNames.ActionButtonImage} ${t.GcCommentClassNames.CommonImg}`}),n=(0,o.h)("div",{class:`${t.GcCommentClassNames.ActionBtn}`,"gcim-action":i,"gcim-type":"icon"},e);r.element=n,r.img=e;break}case a.GcCommentActionButtonType.IconText:{let e=(0,o.h)("div",{class:`${t.GcCommentClassNames.ActionButtonImage} ${t.GcCommentClassNames.CommonImg}`}),a=(0,o.h)("div",{class:t.GcCommentClassNames.ActionButtonText},n),m=(0,o.h)("div",{class:`${t.GcCommentClassNames.ActionBtn}`,"gcim-action":i,"gcim-type":"icontext"},e,a);r.element=m,r.img=e,r.text=a;break}case a.GcCommentActionButtonType.Text:{let e=(0,o.h)("div",{class:t.GcCommentClassNames.ActionBtn,"gcim-action":i,"gcim-type":"text"},n);r.element=e,r.text=e;break}case a.GcCommentActionButtonType.Button:default:{let e=(0,o.h)("div",{class:t.GcCommentClassNames.ActionBtn,"gcim-action":i,"gcim-type":"button"},n);r.element=e,r.text=e;break}}return r}static isCommentPostedByCurrentUser(e,t){return t.userInfo.id===e.userInfo.id||!!e.options.allowAnonymous&&e.options.anonymousUserInfo.id===t.userInfo.id}static isGcCommentLogin(e){var t,n;return!(!e.options.allowAnonymous||!(null===(t=e.options.anonymousUserInfo)||void 0===t?void 0:t.id))||!!(null===(n=e.options.userInfo)||void 0===n?void 0:n.id)}static getRandomString(e){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let n="";for(let o=0;o<e;o++){n+=t[Math.floor(62*Math.random())]}return n}static adjustPopupPosition(e,t,n,o){const i=u.findContainerParentElement(t);let r=t.getBoundingClientRect();t.style.left="",t.style.top="";const m=e.getBoundingClientRect(),s=i.getBoundingClientRect();let l,c;n===a.Position.Top?(l=-r.height,m.top+l<s.top&&(l=m.height)):(l=m.height,m.bottom+r.height>s.bottom&&(l=-r.height)),c=o===a.GcCommentAlign.Left?0:o===a.GcCommentAlign.Right?m.width-r.width:(m.width-r.width)/2,m.left+c<s.left&&(c=-(m.left-s.left)),m.left+c+r.width>s.right&&(c=s.right-r.width-m.left),t.style.top=`${l}px`,t.style.left=`${c}px`}static createThreadModeReplyToInfo(e,n){let i=document.createDocumentFragment(),r=(0,o.h)("div",{class:`${t.GcCommentClassNames.ReplyToTriangle} ${t.GcCommentClassNames.CommonImg}`}),a=(0,o.h)("div",{class:`${t.GcCommentClassNames.Name}`},n.userInfo.name);return i.appendChild(r),i.appendChild(a),i}static getUuid(){if("object"==typeof crypto){if("function"==typeof crypto.randomUUID)return crypto.randomUUID();if("function"==typeof crypto.getRandomValues&&"function"==typeof Uint8Array){const e=e=>{const t=Number(e);return(t^crypto.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16)};return`${[1e7]}-1000-4000-8000-100000000000`.replace(/[018]/g,e)}}let e=(new Date).getTime(),t="undefined"!=typeof performance&&performance.now&&1e3*performance.now()||0;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(n=>{let o=16*Math.random();return e>0?(o=(e+o)%16|0,e=Math.floor(e/16)):(o=(t+o)%16|0,t=Math.floor(t/16)),("x"===n?o:3&o|8).toString(16)}))}static isChildOrSelfComment(e,t){return[e].some((e=>{var n;return e.id===t.id||(null===(n=e.replies)||void 0===n?void 0:n.some((e=>u.isChildOrSelfComment(e,t))))}))}}t.CommentUIHelper=u,u.createRandomComment=(e,t,n,o)=>{let i=Date.now();return{id:`comment_${u.getUuid()}`,userInfo:e,content:t,postTime:new Date(i),updateTime:new Date(i),replies:[],reactions:[],parentCommentId:o,mentionInfo:n}},u.updateComment=(e,t,n)=>{let o=Object.assign({},e);return o.content=t,o.updateTime=new Date(Date.now()),o.mentionInfo=n,o},u.debounce=(e,t,n)=>{let o,i;return function(){let r=this,a=arguments;if(o&&clearTimeout(o),n){let n=!o;o=setTimeout((function(){o=null}),t),n&&(i=e.apply(r,a))}else o=setTimeout((function(){i=e.apply(r,a)}),t);return i}},u.findContainerParentElement=e=>{let t=e;const n=e=>{const t=window.getComputedStyle(e).overflow;return!(!t||"visible"===t)};for(;t&&t!==document.documentElement&&!n(t);)t=t.parentElement;return t}},9138:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.StringDecompressor=void 0;class n{static DecompressString(e){var t=n.DecodeBase64(e),o=n.Latin1ToUnicode(t);return n.LzwDecode(o)}static Getbyte64(e,t){var o=n.ALPHA.indexOf(e.charAt(t));if(-1==o)throw"Cannot decode base64";return o}static DecodeBase64(e){if(void 0!==window.atob)return window.atob(e);e=String(e);var t,o,i,r=n.Getbyte64,a=e.length;if(0==a)return e;if(a%4!=0)throw"Cannot decode base64";t=0,e.charAt(a-1)==n.PADCHAR&&(t=1,e.charAt(a-2)==n.PADCHAR&&(t=2),a-=4);var m=[];for(o=0;o<a;o+=4)i=r(e,o)<<18|r(e,o+1)<<12|r(e,o+2)<<6|r(e,o+3),m.push(String.fromCharCode(i>>16,i>>8&255,255&i));switch(t){case 1:i=r(e,o)<<18|r(e,o+1)<<12|r(e,o+2)<<6,m.push(String.fromCharCode(i>>16,i>>8&255));break;case 2:i=r(e,o)<<18|r(e,o+1)<<12,m.push(String.fromCharCode(i>>16))}return m.join("")}static Latin1ToUnicode(e){for(var t="",n="",o=0;o<e.length;o++){for(var i=e.charCodeAt(o).toString(16);i.length<2;)i="0"+i;n+=i,o%2!=0&&(t+=String.fromCharCode(parseInt(n,16)),n="")}return t}static LzwDecode(e){for(var t,n={},o=String(e).split(""),i=o[0],r=i,a=[i],m=256,s=1;s<o.length;s++){var l=o[s].charCodeAt(0);t=l<256?o[s]:n[l]?n[l]:r+i,a.push(t),i=t.charAt(0),n[m]=r+i,m++,r=t}return a.join("")}}t.StringDecompressor=n,n.PADCHAR="=",n.ALPHA="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"},9174:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),n(5657),n(5698),n(4734),n(3672)},9221:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UnicodeCategory=t.CharUnicodeInfo=t.CharInfo=t.ArrayInit=void 0;const o=n(9138);class i{static Init(){Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){var n=this.length>>>0;for((t=(t=Number(arguments[1])||0)<0?Math.ceil(t):Math.floor(t))<0&&(t+=n);t<n;t++)if(this[t]===e)return t;return-1})}}t.ArrayInit=i,i.Init();class r{getbyte(e,t){var n=e.charCodeAt(t);if(n>255)throw"INVALID_CHARACTER_ERR: DOM Exception 5";return n}static DecodeCharInfo(){var e=o.StringDecompressor.DecodeBase64(r._base64CharInfo),t=[],n=0;for(n=0;n<e.length;n+=2){var i=256*e.charCodeAt(n+1)+e.charCodeAt(n);t.push(i)}var a=[];for(n=0;n<t.length;n++)if(65534!=t[n])a.push(t[n]);else{for(var m=t[n+1],s=1;s<m;s++)a.push(t[n-1]);n++}for(n=0;n<a.length;n+=2){var l=65536*a[n+1]+a[n];r._charInfo.push(l)}}static GetByte(e){0===r._charInfo.length&&r.DecodeCharInfo();var t=Math.floor(e/4),n=e%4,o=r._charInfo[t];switch(n){case 0:return 255&o;case 1:return o>>8&255;case 2:return o>>16&255;case 3:return o>>24&255}}static GetShortValue(e){var t=r.GetByte(e);return 256*r.GetByte(e+1)+t}static GetIntValue(e){var t=r.GetByte(e),n=r.GetByte(e+1),o=r.GetByte(e+2);return 65535*r.GetByte(e+3)*256+65535*o+256*n+t}}t.CharInfo=r,r._charInfo=[],r._base64CharInfo="YwBoAGEAcgBpAG4AZgBvAC4AbgBsAHAAAAD+/wgAPAAAAGBLAAD0SwAAgHcAAIB4AAAAERARIBEwEUARUBFgEXARgBGQEaARsBHAEdAR4BHwEQASEBIgEjASQBJQEmAScBKAEpASoBKwEsAS0BLgEvASABMQEyATMBNAE1ATYBNwE4ATkBOgE7ATwBPQE+AT8BMAFBAUIBQwFFAS/v8ZAEAUUBL+/1EAUBRgFFAS/v8DAHAUUBKAFJAUoBSwFMAUgBFQEv7/KwDQFOAU/v8IAPAU/v8ZAFASABUQFSAVMBVAFVAVYBVwFYAVkBWgFYAR/v8DALAVwBXQFYAR/v8VAFAS/v8DAOAV8BWAEf7/qwAAFhAWIBYwFkAWUBZgFnAWgBH+/xgAgBaAEf7/DwBQEv7/pgCQFoAR/v9RAFAS/v8CAKAWgBH+/wULsBbAFoAR/v/+APAU/v//ANAW8BT+//8A0BbgFugW8Bb4FgAXCBcQFxgXIBcoFzAXOBdAF0gXUBdYF2AX/v8DAGgXcBdgF/7/AgB4F4AXiBeQF5gXoBeoF2AXsBdgF/7/AwC4F8AXUBf+/wQAyBdQF9AX2BfgF+gX8Bf4F/7/BwAAGAgYEBgYGFAXIBgoGGAXMBhAF/7/AwBQF/7/AwBgF/7/AgA4GGAX/v8DAEAYYBf+/wUASBhQGEAXWBhgGFAXaBhwGPgXeBiAGIgYkBiYGKAYqBiwGLgYwBjIGNAY2Bi4GP7/BQDgGOgY8Bj4GAAZuBj4FwgZuBj+/wUAEBkYGSAZiBgoGTAZOBn+/xAAQBlIGf7/AgBQGVgZYBloGXAZeBmAGYgZkBmYGaAZqBmwGbgZgBmIGcAZyBnQGdgZ4BnoGfAZiBn4GQAaCBqoGRAaeBmAGYgZGBogGigaqBkwGjgaQBpIGlAaWBpgGtgZaBpwGngaiBmAGogakBqoGZgaoBp4GogZqBqwGrgaqBnAGqAaeBqIGcga0BrYGqgZ4BroGvAaSBn4GgAbCBs4GRAbGBtIGf7/AgAgGygbMBs4Gf7/AgA4G0AbSBtQG1gbYBs4Gf7/AgBoG3AbeBuAG4gbSBmQG5gboBuoG/gXsBu4G8AbOBn+/wIASBn+/wIAyBvQG9gb4BvoG/Ab+BsAHEAX/v8CAAgcSBn+/wIAEBxIGf7/BQAYHEgZ/v8EACAcSBn+/wQAKBxIGf7/BAAwHDgcSBn+/wIAMBxIGf7/AgBAHEgcUBxIGf7/AwBIHEgZ/v8DAFgcYBxoHEgZcBxIGf7/BQB4HBgbSBn+/yUAgByIHJAcmBxIGf7/BACgHKgcsBy4HEgZwBxIGcgcsBzQHEgZ/v8DANgc4BzoHPAc+BwAHfAcSBn+/wIACB1IGf7/AgAQHUgZ/v8CABgdOBn+/wUASBmQGyAdKB0wHUgZOB14HEgZ/v8CACgcQB1IHVAdWB3+/wIASBlgHTgZ/v8OAGgdSBn+/wIAcB14HdgbgB2IHZAdSBmYHfAcOBn+/wQASBn+/wIAoB2oHbAduB1IGcAdOBn+/wgAUBf+/wIAyB3QHf7/AwDYHeAdUBfoHdAd/v8CAPgX/v8CAPAd+B1gF/7/CQAAHmAX/v8GAAgeEB4IHv7/AgAQHhgeCB4gHige/v8DADAeOB5AHkgeUB5YHmAeaB5wHngegB6IHpAemB6gHqgesB44GbgewB7IHtAe2B7gHuge8B74HgAf/v8CAAgfEB8YH1gdIB8oH1gdMB84H0AfOB/+/w4ASB9YHVAfWB9gH/7/AwBoH1gdcB84H3gfWB2AH4gfOBlYHf7/AgCQHzgZmB84GaAf/v8CAKgfsB9gH/7/BAC4H6AfWB3+/wsAwB/IH1gd/v8CANAfWB3+/wYA2B9YHf7/AgDgH+gf8B/4HzgZ/v8DAAAgWB0IIFgdECAYICAgKCCgHzAgWB04IEAgOB9IIDgfYB/+/xAAOB/+/wgAUCBYIDgf/v8DAGAgOB9oIDgf/v8QAFgd/v8DADgfcCB4IDgZ/v8KAEAX/v8CAIAgUBf+/wIAiCCQIJggYBf+/wYAoCCoIFAX/v8CALAgSBn+/wMAuCA4GUgZiBzAIP7/BAD4F/7/AgDIINAg2CDgIDgZ/v8EAFgd6CBYHf7/BQD4H1gd/v8NAPAgOBn4IAAhCCEQIRghGBtIGf7/BAAgISghSBn+/wQAMCE4IUgZOB0YG0gZ/v8EAEAhSCFIGRAdWB3+/wIA+B9IGWAfUCFYIWAfYCFoIWAfcCFYIWAf/v8CAHghgCFgH/7/AgCIIWAf/v8HAJAhYB/+/wUAmCFgH6AhSBn+/wsAqCFYHf7/BABIGf7/DACwITgZ/v8DAEgZuCFIGf7/FgCQG1gd/v8DAJAfOBn+/wMAwCFIGcghOBlgF/7/AgDQIdghYBfgITgZ/v8GAPAX6CHwIfghYBf+/wMAACIIIjgZ/v8GABAiGCJIGSAiOBlIGf7/AwAoIjAiSBn+/wIAOCJAIvAcOBn+/wIAuB1IGUgiSBlQIlgiOBn+/woASBn+/wIAYCJoInAieCI4Gf7/CgBIGf7/CgCwITgZ/v8FAIAi/v8QAIgi/v8QAEgZ/v8CADgdSBn+/wMAkCJIGf7/BgAoHDgZ/v8CAJgioCKoIrAiuCK4GP7/BgDAIjgZyCK4GP7/FQDQIjgZuBj+/wQA2CK4GP7/AgDgIjgZ/v8CAOgi+BfwIvAd+CIAIwgjECMYI7gY/v8HACAjKCP4FgAXCBcQFzAjOCNAI0gZSCNIGUAhUCNYI2AjaCNwI0gZUBx4Izgd/v8CADgZ/v8CAEgZ/v8HAJAigCOII/7/AgCQI5gj/v8DAKAjqCP4IDgZ/v8DAGAf/v8CALAjOBn+/wgASBmQG0gZ/v8DAAgaOBn+/wIASBlAIbgjSBnAIzgZ/v8DAEgZyCNIGf7/AgDQI9gjOBn+/wIAQBf+/wIA4CNQF/7/AgBIGf7/BAA4HfAcOBn+/wUA6COIGP7/AgDwIzgZ/v8MAIgY+COIGAAkOBn+/wwACCQQJIgYGCQgJCgkOBn+/woASBn+/wYAQCE4Gf7/CQAAH/7/BgAwJDgkOBn+/wgAYB/+/w8AQCRgH/7/AgBIJGAf/v8DAFAkWCRgJGAfaCRgH/7/AgBwJDgZ/v8CAFgd/v8EAHgkOBn+/wsAWB3+/wUAkB+II4AkOBn+/wgAQBeIJFAXkCSYJKAkCB5AF6gksCS4JMAkyCRAF4gkUBfQJNgkUBfgJOgk8CT4JEAXACVQF0AXiCRQF5AkmCRQFwgeQBeoJPgkQBcAJVAXQBeIJFAXCCVAFxAlGCUgJSglUBcwJUAXOCVAJUglUCVQF1glQBdgJVAXaCVwJf7/AwBYHf7/AgD4IFgd/v8GAPgfOBn+/wYASBn+/w0AiBw4Gf7/AgBIGTgdOBn+/w4AeCU4GYAl/v8GADgZ/v8IAPgX/v8PADgZiCL+/w8AiCUBAf7/BAABAgMCBAMBAf7/BwADAwMCBQYGBwgHBgYJCgYLDA0MDA4O/v8FAAwGDw8PBgYQEBD+/wwAEAkGChESERMTE/7/DAATCQ8KDwEBAf7/AgABAwEB/v8NABQGCAj+/wIAFRURFRMW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";class a{static InitTable(){a.globalizationResourceBytePtr=0,a.headerPtr=a.globalizationResourceBytePtr,a.s_pCategoryLevel1Index=r.GetIntValue(a.globalizationResourceBytePtr+40),a.s_pCategoriesValue=r.GetIntValue(a.globalizationResourceBytePtr+44),a.s_pNumericLevel1Index=r.GetIntValue(a.globalizationResourceBytePtr+48),a.s_pNumericValues=r.GetIntValue(a.globalizationResourceBytePtr+56),a.s_pDigitValues=r.GetIntValue(a.globalizationResourceBytePtr+52)}static InternalConvertToUtf32(e,t,n){if(n.length=1,t<e.length-1){var o=e.charCodeAt(t)-55296;if(o>=0&&o<=1023){var i=e.charCodeAt(t+1)-56320;if(i>=0&&i<=1023)return n.length++,1024*o+i+65536}}return e.charCodeAt(t)}static InternalGeteCategoryValue(e,t){null==t&&(t=0);var n=r.GetShortValue(a.s_pCategoryLevel1Index+2*(e>>8));n=r.GetShortValue(a.s_pCategoryLevel1Index+2*(n+(e>>4&15)));var o=a.s_pCategoryLevel1Index+2*n,i=r.GetByte(o+(15&e));return r.GetByte(a.s_pCategoriesValue+2*i+t)}static InternalGetUnicodeCategory(e,t,n){void 0===a.globalizationResourceBytePtr&&a.InitTable();var o=a.InternalConvertToUtf32(e,t,n);return a.InternalGeteCategoryValue(o,0)}static IsCombiningCategory(e){return e===m.NonSpacingMark||e===m.SpacingCombiningMark||e===m.EnclosingMark}}var m;t.CharUnicodeInfo=a,function(e){e[e.ClosePunctuation=21]="ClosePunctuation",e[e.ConnectorPunctuation=18]="ConnectorPunctuation",e[e.Control=14]="Control",e[e.CurrencySymbol=26]="CurrencySymbol",e[e.DashPunctuation=19]="DashPunctuation",e[e.DecimalDigitNumber=8]="DecimalDigitNumber",e[e.EnclosingMark=7]="EnclosingMark",e[e.FinalQuotePunctuation=23]="FinalQuotePunctuation",e[e.Format=15]="Format",e[e.InitialQuotePunctuation=22]="InitialQuotePunctuation",e[e.LetterNumber=9]="LetterNumber",e[e.LineSeparator=12]="LineSeparator",e[e.LowercaseLetter=1]="LowercaseLetter",e[e.MathSymbol=25]="MathSymbol",e[e.ModifierLetter=3]="ModifierLetter",e[e.ModifierSymbol=27]="ModifierSymbol",e[e.NonSpacingMark=5]="NonSpacingMark",e[e.OpenPunctuation=20]="OpenPunctuation",e[e.OtherLetter=4]="OtherLetter",e[e.OtherNotAssigned=29]="OtherNotAssigned",e[e.OtherNumber=10]="OtherNumber",e[e.OtherPunctuation=24]="OtherPunctuation",e[e.OtherSymbol=28]="OtherSymbol",e[e.ParagraphSeparator=13]="ParagraphSeparator",e[e.PrivateUse=17]="PrivateUse",e[e.SpaceSeparator=11]="SpaceSeparator",e[e.SpacingCombiningMark=6]="SpacingCombiningMark",e[e.Surrogate=16]="Surrogate",e[e.TitlecaseLetter=2]="TitlecaseLetter",e[e.UppercaseLetter=0]="UppercaseLetter"}(m=t.UnicodeCategory||(t.UnicodeCategory={}))},9252:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.shouldAppendItem=t.name=t.getElement=void 0;const o=n(7286),i=n(9129),r=n(8794),a=n(5452);t.name="reply";t.getElement=(e,t)=>{let n=(0,r.LocalStorageManager)(e).load(t.id,o.GcCommentCreateEditorReason.ReplyToComment),m=n&&n.state===o.GcCommentCreateEditorReason.ReplyToComment?(0,a.SR)().getResource(a.GcCommentResourceNames.ContinueReply):(0,a.SR)().getResource(a.GcCommentResourceNames.Reply),s=i.CommentUIHelper.buildCommentActionButton(e,m,"reply");return s.element.addEventListener("click",(()=>{e.execCommand(o.GcCommentCommand.DoReplyCommentAction,{commentId:t.id}),s.text&&(s.text.innerText=(0,a.SR)().getResource(a.GcCommentResourceNames.Reply))})),s.element};t.shouldAppendItem=e=>e.options.commentMode!==o.GcCommentMode.ListMode},9316:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GCIM=void 0;const o=n(2258),i={get GcMultiLineTextBox(){return o.win.GCIMImpl.GcMultiLineTextBox}};t.GCIM=i},9344:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.buildHeaderElement=t.getCommentCountInnerHTML=t.getCommentDom=void 0;const o=n(5452),i=n(7935),r=n(8581),a="gcim__comment-count",m="gcim__count",s="gcim__text";t.getCommentDom=e=>(0,i.enhanceType)(e.elementDom);t.getCommentCountInnerHTML=(e,t)=>{let n;if(!e.options.commentCountFormatter){let e=document.createDocumentFragment(),n=(0,r.buildDomElement)({tag:"span",innerText:`${t}`,classes:[m]}),i=(0,o.SR)().getResource(o.GcCommentResourceNames.Comments).split("{}");const a=(0,r.buildDomElement)({tag:"span",innerText:`${i[0]}`,classes:[s]});if(e.appendChild(a),e.appendChild(n),i[1]){const t=(0,r.buildDomElement)({tag:"span",innerText:`${i[1]}`,classes:[s]});e.appendChild(t)}return e}{let o=e.options.commentCountFormatter(t);n="string"==typeof o?document.createTextNode(o):o}return n};t.buildHeaderElement=e=>{if(e.options.loadCommentCount){let n=(0,r.buildDomElement)({tag:"div",classes:[a]}),o=e.options.loadCommentCount();if(o instanceof Promise||"[object Promise]"===Object.prototype.toString.call(o))o.then((o=>{let i=(0,t.getCommentCountInnerHTML)(e,o);n.appendChild(i)}));else{let i=(0,t.getCommentCountInnerHTML)(e,o);n.appendChild(i)}return n}return null}},9349:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.register=void 0;const o=n(7286),i=n(1836);t.register=e=>{const t=e.registry,n=o.GcCommentHeaderFooterItem.ReactionCount;t.registerHeaderFooterItem(n,{getElement:()=>{const t=(0,i.buildHeaderElement)(e);return(0,i.getCommentDom)(e).reactionCounterElement=t,t}})}},9473:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DataManager=t.LoadCommentByLinkState=void 0;const o=n(8845),i=n(7286),r=n(2207);var a,m,s;!function(e){e.Page="page",e.Sticked="sticked",e.Reply="reply",e.Link="link"}(a||(a={})),function(e){e.Content="content",e.Stick="stick"}(m||(m={})),function(e){e.Success="success",e.AccessDenied="accessdenied",e.NotExist="notexist"}(s=t.LoadCommentByLinkState||(t.LoadCommentByLinkState={})),(0,o.expose)("LoadCommentByLinkState",s);const l=e=>{var t,n,o;const i=(0,r.request)(e),l=async(e,t,n)=>{var o,r,a,m;e.requestData&&(n=Object.assign(n,e.requestData));let s,l=e.url;switch((null!==(o=null==e?void 0:e.method)&&void 0!==o?o:t).toLowerCase()){case"post":s=await i.post(l,n,null==e?void 0:e.requestDataType);break;case"put":s=await i.put(l,n,null==e?void 0:e.requestDataType);break;case"delete":s=await i.del(l,n);break;default:s=await i.get(l,n)}if(null===(r=null==e?void 0:e.schema)||void 0===r?void 0:r.succeedPath){if(!s[e.schema.succeedPath])return null}return(null===(a=null==e?void 0:e.schema)||void 0===a?void 0:a.dataPath)?s[e.schema.dataPath]:(null===(m=null==e?void 0:e.schema)||void 0===m?void 0:m.dataSchema)?c(s,e.schema.dataSchema):s},c=(e,t)=>{if(e instanceof Array)return e.map((e=>c(e,t)));const n=Object.assign({},e);for(const e in t){const o=t[e];Object.hasOwnProperty.call(n,o)&&(n[e]=n[o])}return n},d=async(e,t)=>await l(e,"Get",t),u=async(e,t)=>await l(e,"Post",t),C=async(e,t)=>await l(e,"Delete",t);let A=e.options.dataSource,g=null===(t=null==A?void 0:A.remote)||void 0===t?void 0:t.comments,p=null===(n=null==A?void 0:A.remote)||void 0===n?void 0:n.reactions,h=null===(o=null==A?void 0:A.remote)||void 0===o?void 0:o.users,f=(()=>{let e=new Map,t=e=>{var t,n,o;if(null===(null==e?void 0:e.id)||void 0===(null==e?void 0:e.id))return null;let i={};return i.avatar=null===(t=e.avatar)||void 0===t?void 0:t.toString(),i.id=null===(n=e.id)||void 0===n?void 0:n.toString(),i.name=null===(o=e.name)||void 0===o?void 0:o.toString(),i},n=async n=>{let o=await d(h.read,n),i=[];if(!(o instanceof Array)){let n=t(o);if(n){return i.push(n),e.set(o.id,n),[n]}return[null]}return o.forEach((n=>{let o=t(n);o&&(i.push(o),e.set(n.id,o))})),i};return{loadUserById:async t=>{if(e.has(t))return e.get(t);return(await n({id:t}))[0]},loadUsersByFilterText:async e=>await n({filterText:e})}})(),v=(()=>{let t=async e=>{let t=[];if(e)for(let n=0;n<e.length;n++){let i=await o(e[n]);t[n]=i}return t},n=async(e,t,n)=>{let o=Object.assign(Object.assign(Object.assign(Object.assign({},e),{userId:e.userInfo.id}),t),{updateType:n});return delete o.replies,delete o.userInfo,delete o.reactions,await(async(e,t)=>await l(e,"Put",t))(g.update,o)},o=async t=>{var n,o,i,r,a;if(!(null==t?void 0:t.id))return Promise.resolve(null);let m=null!==(n=t.userInfo)&&void 0!==n?n:t.userId?await f.loadUserById(t.userId):null;return m?(t.id=null===(o=t.id)||void 0===o?void 0:o.toString(),t.userInfo=m,t.content=null!==(i=t.content)&&void 0!==i?i:"",t.parentCommentId=null===(r=t.parentCommentId)||void 0===r?void 0:r.toString(),t.postTime=t.postTime?new Date(t.postTime):null,t.updateTime=t.updateTime?new Date(t.updateTime):null,t.reactions=null!==(a=t.reactions)&&void 0!==a?a:await E.loadReactions(t.id,e.userInfo.id),t.mentionInfo instanceof Array||"string"==typeof t.mentionInfo&&(t.mentionInfo=JSON.parse(t.mentionInfo)),t):Promise.resolve(null)};return{loadCommentRange:async(e,n)=>{let o=await d(g.read,{type:a.Page,pageNumber:e,pageSize:n}),i={};return i.hasMore=o.hasMore,i.comments=await t(o.comments),i},loadStickedComment:async()=>{let e=await d(g.read,{type:a.Sticked});return e?await o(e):Promise.resolve(null)},createComment:async(e,t,n,i)=>{let r={userId:e,content:t,mentionInfo:JSON.stringify(n)};i&&(r=Object.assign(Object.assign({},r),{parentId:i}));let a=await u(g.create,r);return await o(a)},updateCommentContent:async(e,t,i)=>{let r=await n(e,{newContent:t,mentions:i},m.Content);return await o(r)},stickComment:async(e,t)=>await n(e,{stick:t},m.Stick),deleteComment:async e=>await C(g.delete,{commentId:e}),loadCommentReplies:async(e,n)=>{let o=await d(g.read,{type:a.Reply,commentId:e.id,loadedCount:n}),i={};return i.hasMore=o.hasMore,i.comments=await t(o.comments),i},loadCommentByLink:async e=>{let t=await d(g.read,{type:a.Link,url:e}),n={};return n.loadState=t.loadState,n.comment=null,n.loadState===s.Success&&(n.comment=await o(t.comment)),n}}})(),E={loadReactions:async(e,t)=>await d(p.read,{commentId:e,userId:t}),reactToComment:async(e,t,n)=>await u(p.create,{userId:e,commentId:t,reactChar:n}),unreactToComment:async(e,t,n)=>await C(p.delete,{userId:e,commentId:t,reactChar:n})};return{commentsManager:v,userManager:f,reactionsManager:E,destroy:()=>{f=null,v=null,E=null,e=null}}};t.DataManager=e=>{var t;return(null===(t=e.options.dataSource)||void 0===t?void 0:t.enabled)?l(e):(e=>{let t={loadUserById:async t=>{let n=await e.options.loadUsersInfoHandler({loadType:i.LoadUserType.ById,value:t});return n instanceof Array?n.length>0?n[0]:null:n},loadUsersByFilterText:async t=>await e.options.loadUsersInfoHandler({loadType:i.LoadUserType.FilterText,value:t})},n={loadCommentRange:(t,n)=>Promise.resolve(e.options.loadComments({pageNumber:t,pageSize:n})),loadStickedComment:()=>Promise.resolve(e.options.loadStickedComment()),createComment:(e,t,n,o)=>Promise.resolve(null),deleteComment:e=>Promise.resolve(void 0),stickComment:(e,t)=>Promise.resolve(!0),updateCommentContent:(e,t)=>Promise.resolve(null),loadCommentReplies:(t,n)=>Promise.resolve(e.options.loadCommentReplies(t,n)),loadCommentByLink:async t=>Promise.resolve(e.options.loadCommentByLink(t))},o={loadReactions:e=>Promise.resolve(null),reactToComment:(e,t,n)=>Promise.resolve(!0),unreactToComment:(e,t,n)=>Promise.resolve(!0)};return{userManager:t,commentsManager:n,reactionsManager:o,destroy:()=>{t=null,n=null,o=null,e=null}}})(e)}},9487:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.register=void 0;const o=n(7286),i=n(3074),r=n(9473),a=n(5452),m=n(1462);t.register=e=>{e.addCommand(o.GcCommentCommand.CopyLink,((t,n)=>{var o;if(n.commentId){const r=null===(o=e.getComment(n.commentId))||void 0===o?void 0:o.comment;(0,i.copyCommentLink)(t,r)}})),e.addCommand(o.GcCommentCommand.OpenCommentLink,(async(t,n)=>{var i,s;if(n.url){const t=await e.dataManager.commentsManager.loadCommentByLink(n.url),l=null==t?void 0:t.loadState;if(l===r.LoadCommentByLinkState.Success)switch(null!==(i=n.openMode)&&void 0!==i?i:e.options.openLinkMode){case o.OpenLinkMode.NewTab:window.open(n.url,"_blank");break;case o.OpenLinkMode.GoToComment:{const n=null===(s=null==t?void 0:t.comment)||void 0===s?void 0:s.id;n&&e.getComment(n)?e.execCommand(o.GcCommentCommand.GotoComment,{commentId:n}):m.MessageBox.show((0,a.SR)().getResource(a.GcCommentResourceNames.ThisCommentDoesNotExist),!0,{showCancelButton:!1});break}case o.OpenLinkMode.CurrentTab:default:window.location.href=n.url}else l===r.LoadCommentByLinkState.AccessDenied?m.MessageBox.show((0,a.SR)().getResource(a.GcCommentResourceNames.YouDontHaveAccessToThisContent),!0,{showCancelButton:!1}):l===r.LoadCommentByLinkState.NotExist&&m.MessageBox.show((0,a.SR)().getResource(a.GcCommentResourceNames.ThisCommentDoesNotExist),!0,{showCancelButton:!1})}}))}},9529:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.h=void 0;var n=window.document;function o(){var e=[];function t(t,o){var i=[].slice.call(arguments),r=null;function s(t){var o,i,l;if(null==t);else if("string"==typeof t)r?r.appendChild(o=n.createTextNode(t)):(l=t.split(/([\.#]?[^\s#.]+)/),/^\.|#/.test(l[1])&&(r=n.createElement("div")),m(l,(function(e){var t=e.substring(1,e.length);e&&(r?"."===e[0]?r.classList.add(t):"#"===e[0]&&r.setAttribute("id",t):r=n.createElement(e))})));else if("number"==typeof t||"boolean"==typeof t||t instanceof Date||t instanceof RegExp)r.appendChild(o=n.createTextNode(t.toString()));else if(i=t,"[object Array]"==Object.prototype.toString.call(i))m(t,s);else if(a(t))r.appendChild(o=t);else if(t instanceof Text)r.appendChild(o=t);else if("object"==typeof t)for(var c in t)if("function"==typeof t[c])/^on\w+/.test(c)?function(t,n){r.addEventListener?(r.addEventListener(t.substring(2),n[t],!1),e.push((function(){r.removeEventListener(t.substring(2),n[t],!1)}))):(r.attachEvent(t,n[t]),e.push((function(){r.detachEvent(t,n[t])})))}(c,t):(r[c]=t[c](),e.push(t[c]((function(e){r[c]=e}))));else if("style"===c)if("string"==typeof t[c])r.style.cssText=t[c];else for(var d in t[c])!function(n,o){if("function"==typeof o)r.style.setProperty(n,o()),e.push(o((function(e){r.style.setProperty(n,e)})));else var i=t[c][n].match(/(.*)\W+!important\W*$/);i?r.style.setProperty(n,i[1],"important"):r.style.setProperty(n,t[c][n])}(d,t[c][d]);else if("attrs"===c)for(let e in t[c])r.setAttribute(e,t[c][e]);else"data-"===c.substr(0,5)||"gcim-"===c.substr(0,5)||["class","tabindex","autocomplete","name"].indexOf(c)>-1?r.setAttribute(c,t[c]):r[c]=t[c];else if("function"==typeof t){let i=t();r.appendChild(o=a(i)?i:n.createTextNode(i)),e.push(t((function(e){a(e)&&o.parentElement?(o.parentElement.replaceChild(e,o),o=e):o.textContent=e})))}return o}for(;i.length;)s(i.shift());return r}return t.cleanup=function(){for(var t=0;t<e.length;t++)e[t]();e.length=0},t}var i=o();i.context=o;let r=i;function a(e){return e&&e.nodeName&&e.nodeType}function m(e,t){if(e.forEach)return e.forEach(t);for(var n=0;n<e.length;n++)t(e[n],n)}t.h=r},9818:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.init=void 0;const o=n(9129);t.init=(e,t)=>{e.ui.registry.addAutocompleter("mention",{trigger:"@",columns:1,minChars:0,fetch:(e,n)=>new Promise((async n=>{n((await t.dataManager.userManager.loadUsersByFilterText(e)).map((e=>({type:"cardmenuitem",value:e,label:e.name,items:[{type:"cardcontainer",direction:"horizontal",items:[{type:"cardimage",src:e.avatar,classes:["gcim__gccomment-mention-auto-complater-image"]},{type:"cardtext",text:e.name,name:"char_name"}]}]}))))})),onAction:(t,n,i)=>{e.selection.setRng(n),e.insertContent(o.CommentUIHelper.createMentionDom(i).outerHTML),t.hide()}})}}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,__webpack_require__),n.exports}var __webpack_exports__={};(()=>{__webpack_require__(7906),__webpack_require__(9174),__webpack_require__(8970);let e=window;"object"==typeof e.GC?e.GC.InputMan=e.GCIM:e.GC={InputMan:e.GCIM}})()})();;(function(a){if (typeof define === 'function') { define(function (require, exports) {exports.InputMan = a.InputMan;exports.__esModule = true;});} else if (typeof module !== 'undefined'&& module !== null) { module.exports = a;}})(GC||{});